<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Vue3+Typescript | 0zxm</title><meta name="author" content="0zxm"><meta name="copyright" content="0zxm"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Vue3+Typescript入门笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Vue3+Typescript">
<meta property="og:url" content="https://0zxm.github.io/2025/01/12/vue3-typescript/index.html">
<meta property="og:site_name" content="0zxm">
<meta property="og:description" content="Vue3+Typescript入门笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://0zxm.github.io/img/cover1.jpg">
<meta property="article:published_time" content="2025-01-12T05:46:38.000Z">
<meta property="article:modified_time" content="2025-02-27T10:55:08.260Z">
<meta property="article:author" content="0zxm">
<meta property="article:tag" content="Vue3">
<meta property="article:tag" content="Typescript">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://0zxm.github.io/img/cover1.jpg"><link rel="shortcut icon" href="/favicon.png"><link rel="canonical" href="https://0zxm.github.io/2025/01/12/vue3-typescript/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 0zxm","link":"链接: ","source":"来源: 0zxm","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Vue3+Typescript',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-02-27 18:55:08'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">65</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/src/"><i class="fa-fw fas fa-cloud"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cover1.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">0zxm</span></a><a class="nav-page-title" href="/"><span class="site-name">Vue3+Typescript</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/src/"><i class="fa-fw fas fa-cloud"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Vue3+Typescript</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2025-01-12T05:46:38.000Z" title="发表于 2025-01-12 13:46:38">2025-01-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-27T10:55:08.260Z" title="更新于 2025-02-27 18:55:08">2025-02-27</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">23.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>105分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Za4y1r7KE">尚硅谷Vue3入门到实战，最新版vue3+TypeScript前端开发教程</a></p>
<p><a target="_blank" rel="noopener" href="https://24kcs.github.io/vue3_study">线上笔记</a></p>
<h2 id="1-Vue3简介"><a href="#1-Vue3简介" class="headerlink" title="1. Vue3简介"></a>1. Vue3简介</h2><h3 id="1-1-性能的提升"><a href="#1-1-性能的提升" class="headerlink" title="1.1.性能的提升"></a>1.1.性能的提升</h3><ul>
<li>打包大小减少 41%</li>
<li>初次渲染快 55%，更新渲染快 133%</li>
<li>内存减少 54%。</li>
</ul>
<h3 id="1-2-源码的升级"><a href="#1-2-源码的升级" class="headerlink" title="1.2.源码的升级"></a>1.2.源码的升级</h3><ul>
<li>使用 Proxy 代替 defineProperty 实现响应式,</li>
<li>重写虚拟 DOM 的实现和 Tree-shaking</li>
</ul>
<h3 id="1-3-【拥抱TypeScript】"><a href="#1-3-【拥抱TypeScript】" class="headerlink" title="1.3.【拥抱TypeScript】"></a>1.3.【拥抱TypeScript】</h3><ul>
<li>Vue3 可以更好的支持 Typescript</li>
</ul>
<h3 id="1-4-新的特性"><a href="#1-4-新的特性" class="headerlink" title="1.4 新的特性"></a>1.4 新的特性</h3><ol>
<li><code>Cmposition API(组合 API)</code><ul>
<li><code>setup</code></li>
<li><code>ref</code>与<code>reactive</code></li>
<li><code>computed</code>与<code>watch</code></li>
</ul>
</li>
<li><code>新的内置组件</code>:<ul>
<li><code>Fragment</code></li>
<li><code>Teleport</code></li>
<li><code>Suspense</code></li>
</ul>
</li>
<li>其他改变:<ul>
<li>新的生命周期钩子</li>
<li>data 选项应始终被声明为一个函数</li>
<li>移除<code>keyCode</code>支持作为<code>v-on</code>的修饰符</li>
</ul>
</li>
</ol>
<h2 id="2-创建Vue3工程"><a href="#2-创建Vue3工程" class="headerlink" title="2. 创建Vue3工程"></a>2. 创建Vue3工程</h2><h3 id="2-1-基于Vue-cli创建"><a href="#2-1-基于Vue-cli创建" class="headerlink" title="2.1 基于Vue-cli创建"></a>2.1 基于Vue-cli创建</h3><p><a href="https://link.juejin.cn/?target=https://cli.vuejs.org/zh/guide/creating-a-project.html%23vue-create">官方文档</a></p>
<p>目前<code>vue-cli</code>已处于维护状态,推荐使用<code>Vite</code>创建项目</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">## 查看 @vue/cli版本，确保 @vue/cli版本在4.5.0以上</span>
vue <span class="token parameter variable">--version</span> 或 vue <span class="token parameter variable">-V</span>
<span class="token comment">## 安装或升级@vue/cli</span>
<span class="token function">npm</span> <span class="token function">install</span> <span class="token parameter variable">-g</span> @vue/cli
<span class="token comment">## 创建</span>
vue create vue_project
<span class="token comment">## 启动</span>
<span class="token builtin class-name">cd</span> vue_project
<span class="token function">npm</span> run serve<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这个运行项目的速度明显比使用vite创建要慢，因为这种方式会先进行打包。</p>
<h3 id="2-2-基于Vite创建-推荐"><a href="#2-2-基于Vite创建-推荐" class="headerlink" title="2.2 基于Vite创建(推荐)"></a>2.2 基于Vite创建(推荐)</h3><p><a href="https://link.juejin.cn/?target=https://vitejs.cn">vitejs.cn</a></p>
<p>vite是新一代的前端构建工具。<a href="https://link.juejin.cn/?target=https://v3.cn.vuejs.org/guide/installation.html%23vite">官方文档</a> vite优势如下：</p>
<ul>
<li>开发环境中，无需打包操作，可快速的冷启动。</li>
<li>轻量快速的热重载(<code>HMR</code>)。</li>
<li>真正的按需编译，不再等待整个应用编译完成。</li>
</ul>
<p><code>webpack构建和vite构建对比图如下:(上图为webpack)</code></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/8bceaaf5175a85e6669821b6771a91a8.png" alt="img" style="zoom:80%;">

<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/5b5b8ae251ae7e7870d5b17e4ce11210.png" alt="img" style="zoom:80%;">

<p>具体操作如下:<a target="_blank" rel="noopener" href="https://cn.vuejs.org/guide/quick-start.html#creating-a-vue-application">官方文档</a></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">## 1.创建命令</span>
<span class="token function">npm</span> create vue@latest

<span class="token comment">## 2.具体配置</span>
<span class="token comment">## 配置项目名称</span>
√ Project name: vue3_test
<span class="token comment">## 是否添加TypeScript支持</span>
√ Add TypeScript?  Yes
<span class="token comment">## 是否添加JSX支持</span>
√ Add JSX Support?  No
<span class="token comment">## 是否添加路由环境</span>
√ Add Vue Router <span class="token keyword">for</span> Single Page Application development?  No
<span class="token comment">## 是否添加pinia环境</span>
√ Add Pinia <span class="token keyword">for</span> state management?  No
<span class="token comment">## 是否添加单元测试</span>
√ Add Vitest <span class="token keyword">for</span> Unit Testing?  No
<span class="token comment">## 是否添加端到端测试方案</span>
√ Add an End-to-End Testing Solution? » No
<span class="token comment">## 是否添加ESLint语法检查</span>
√ Add ESLint <span class="token keyword">for</span> code quality?  Yes
<span class="token comment">## 是否添加Prettiert代码格式化</span>
√ Add Prettier <span class="token keyword">for</span> code formatting?  No<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>创建项目成功后会出现如下的目录结构:(排除pdf)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250112202901651.png" alt="image-20250112202901651"></p>
<blockquote>
<p>src目录结构:</p>
<ul>
<li>main.ts</li>
<li>App.vue</li>
<li>assets文件夹</li>
<li>components(组件文件夹)</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250112210448254.png" alt="image-20250112210448254"></p>
<p><strong>总结:</strong></p>
<ul>
<li><code>vite</code>项目中，<code>index.html</code>是项目的入口文件，在项目最外层</li>
<li>加载 <code>index.html</code> 后，Vite 解析<code>&lt;script type=&quot;module&quot; src=&quot;xxx&quot;&gt;</code> 指向的 <code>Javascript</code></li>
<li>Vue3 中是通过 <code>createApp函数</code> 创建一个应用实例。</li>
</ul>
<blockquote>
<p>Vue2语法演示(选项式API):</p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;!-- html --&gt;
     &lt;div class&#x3D;&quot;app&quot;&gt;
        &lt;h1&gt;你好啊!&lt;&#x2F;h1&gt;
        &lt;Person&gt;&lt;&#x2F;Person&gt;
     &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;
import Person from &#39;.&#x2F;components&#x2F;Person.vue&#39;;
&#x2F;&#x2F; js 或ts
export default &#123;
    name: &#39;App&#39;, &#x2F;&#x2F; 组件名称
    components: &#123;
        Person &#x2F;&#x2F; 注册子组件
    &#125;
&#125;
&lt;&#x2F;script&gt;

&lt;style&gt;
 &#x2F;* css *&#x2F;
 .app&#123;
    background-color: pink;
    box-shadow: 0 0 10px rgba(0,0,0,0.5);
    border-radius: 10px;
    padding: 20px;
 &#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;姓名: &#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;p&gt;年龄: &#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;showTel&quot;&gt;展示联系方式&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
    data() &#123;
        return &#123;
            name: &#39;张三&#39;,&#x2F;&#x2F; 组件数据
            age: 25,
            tel: &#39;13800138000&#39;
        &#125;
    &#125;,
    methods: &#123;
        showTel() &#123;
            alert(this.tel);
        &#125;,
        changeName() &#123;
            this.name &#x3D; &quot;zhang-san&quot;
        &#125;,
        changeAge() &#123;
            this.age +&#x3D; 1
        &#125;
    &#125;

&#125;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.person &#123;
    background-color: skyblue;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    padding: 20px;
&#125;

button &#123;
    margin: 0 5px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250112213010711.png" alt="image-20250112213010711"></p>
<h2 id="3-Vue3核心语法"><a href="#3-Vue3核心语法" class="headerlink" title="3. Vue3核心语法"></a>3. Vue3核心语法</h2><h3 id="3-1【OptionsAPI-与-CompositionAPI】"><a href="#3-1【OptionsAPI-与-CompositionAPI】" class="headerlink" title="3.1【OptionsAPI 与 CompositionAPI】"></a>3.1【OptionsAPI 与 CompositionAPI】</h3><ul>
<li><code>Vue2</code>的<code>API</code>设计是<code>Options</code>（配置&#x2F;选项）风格的。</li>
<li><code>Vue3</code>的<code>API</code>设计是<code>Composition</code>（组合）风格的。</li>
</ul>
<h4 id="OptionsAPI-的弊端"><a href="#OptionsAPI-的弊端" class="headerlink" title="OptionsAPI 的弊端"></a>OptionsAPI 的弊端</h4><p><code>Options</code>类型的 <code>API</code>，数据、方法、计算属性等，是分散在：<code>data</code>、<code>methods</code>、<code>computed</code>中的，若想新增或者修改一个需求，就需要分别修改：<code>data</code>、<code>methods</code>、<code>computed</code>，不便于维护和复用。</p>
<h4 id="Composition-API-的优势"><a href="#Composition-API-的优势" class="headerlink" title="Composition API 的优势"></a>Composition API 的优势</h4><p>可以用函数的方式，更加优雅的组织代码，让相关功能的代码更加有序的组织在一起。</p>
<h3 id="3-2【拉开序幕的setup】"><a href="#3-2【拉开序幕的setup】" class="headerlink" title="3.2【拉开序幕的setup】"></a>3.2【拉开序幕的setup】</h3><h4 id="setup概述"><a href="#setup概述" class="headerlink" title="setup概述"></a>setup概述</h4><p><code>setup</code>是<code>Vue3</code>中一个新的配置项，值是一个函数，它是 <code>Composition API</code> <strong>“表演的舞台</strong>_<strong>”</strong>_，组件中所用到的：数据、方法、计算属性、监视……等等，均配置在<code>setup</code>中。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250112215059484.png" alt="image-20250112215059484"></p>
<p>特点如下：<code>（Vue3中弱化了this）</code></p>
<p>- <code>setup</code>函数返回的对象中的内容，可直接在模板中使用。<br>- <code>setup</code>中访问<code>this</code>是<code>undefined</code>。<br>- <code>setup</code>函数会在<code>beforeCreate</code>之前调用，它是“领先”所有钩子执行的。</p>
<h4 id="setup返回值"><a href="#setup返回值" class="headerlink" title="setup返回值"></a>setup返回值</h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;姓名: &#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;p&gt;年龄: &#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;showTel&quot;&gt;展示联系方式&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
    setup() &#123;
        console.log(this); &#x2F;&#x2F; setup中没有维护this

        &#x2F;&#x2F; 数据
        let name &#x3D; &#39;张三&#39;; &#x2F;&#x2F; 注意: 此时的name不是响应式,不会即刻更新
        let age &#x3D; 25;
        let tel &#x3D; &#39;13812345678&#39;;

        &#x2F;&#x2F; 方法
        function changeName() &#123;
            name &#x3D; &#39;zhang-san&#39; &#x2F;&#x2F; 确实改了,但是不会触发视图更新
        &#125;
        function changeAge() &#123;
            age +&#x3D; 1
        &#125;
        function showTel() &#123;
            alert(tel)
        &#125;

        &#x2F;&#x2F; 其实是return &#123; name: name, age : age, tel : tel &#125; 但是触发对象的简写形式
        &#x2F;&#x2F; return &#123; name, age, changeName, changeAge, showTel &#125; &#x2F;&#x2F; 返不返回看模板用到与否

        return () &#x3D;&gt; &quot;哈哈&quot;; &#x2F;&#x2F; 也可返回一个函数,返回的函数的返回值将会直接作为渲染内容
    &#125;,
    components:&#123;
    &#x2F;&#x2F; 显示注册子组件
	&#125;
&#125;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.person &#123;
    background-color: skyblue;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    padding: 20px;
&#125;

button &#123;
    margin: 0 5px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="setup与OptionsAPI的关系"><a href="#setup与OptionsAPI的关系" class="headerlink" title="setup与OptionsAPI的关系"></a>setup与OptionsAPI的关系</h4><p><code>（面试题）</code></p>
<ul>
<li><code>Vue2</code> 的配置（<code>data</code>、<code>methods</code>）中可以访问到<code>setup</code>中的属性、方法。（因为<code>setup</code>处于<code>beforeCreate钩子</code>之前）</li>
<li>但在<code>setup</code>中不能访问到<code>Vue2</code>的配置（<code>data</code>、<code>methos</code>）。</li>
<li>如果与<code>Vue2</code>冲突，则<code>setup</code>优先。</li>
</ul>
<p>（setup没有this。里面不能写this）</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;姓名: &#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;p&gt;年龄: &#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;showTel&quot;&gt;展示联系方式&lt;&#x2F;button&gt;
        &lt;hr&gt;
        &lt;h2&gt;测试1: &#123;&#123; a &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;h2&gt;测试2: &#123;&#123; c &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;button @click&#x3D;&quot;b&quot;&gt;测试按钮&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
    data() &#123;
        return &#123;
            a: 100,
            c: this.name
        &#125;
    &#125;,
    methods: &#123;
        b() &#123;
            console.log(&quot;b&quot;);
        &#125;
    &#125;,
    setup() &#123;
        console.log(this); &#x2F;&#x2F; setup中没有维护this
        &#x2F;&#x2F; 数据
        let name &#x3D; &#39;张三&#39;;
        let age &#x3D; 25;
        let tel &#x3D; &#39;13812345678&#39;;
        let x &#x3D; a; &#x2F;&#x2F; error: 未定义的
    &#125;

&#125;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="expose函数-补充"><a href="#expose函数-补充" class="headerlink" title="expose函数(补充)"></a>expose函数(补充)</h4><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1djN3ebEMj/">setup到底做了什么</a></p>
<blockquote>
<p><code>setup()</code>函数能够接收两个参数，第二个参数是一个对象，其中有<code>expose()函数</code>，能够自定义暴露在外部的函数，<code>不使用setup语法糖的情况下，默认暴露所有数据</code></p>
<p>setup语法糖默认不传入参数， 即<code>expose()</code>外部不能接触该组件内部数据</p>
</blockquote>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'Setup'</span><span class="token punctuation">,</span>
    <span class="token function">setup</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            x<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">&#125;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>props<span class="token punctuation">,</span> ctx<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>expose<span class="token punctuation">)</span><span class="token punctuation">;</span>
        ctx<span class="token punctuation">.</span><span class="token function">expose</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
            <span class="token comment">// 自定义暴露出去的数据</span>
            x<span class="token punctuation">,</span> add<span class="token punctuation">,</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>语法糖</code></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script lang&#x3D;&quot;ts&quot; setup&gt; 
 let x &#x3D; 10;
 function add() &#123; x++; &#125;          
    
 &#x2F;&#x2F; 需要使用宏 defineExpose(带define开头的一般都是宏)暴露
 &#x2F;&#x2F; 其实最后编译完宏就会变成 expose()函数 
 defineExpose([&#39;x&#39;])
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-3-setup语法糖"><a href="#3-3-setup语法糖" class="headerlink" title="3.3 setup语法糖"></a>3.3 setup语法糖</h3><p>语法:</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;script lang&#x3D;&quot;ts&quot; setup&gt; &#x2F;&#x2F; 配置组合式api
let a &#x3D; 100;
&lt;&#x2F;script&gt;


&lt;!- Person.vue -&gt;
&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;姓名: &#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;p&gt;年龄: &#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
        &lt;p&gt;地址: &#123;&#123; address &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;showTel&quot;&gt;展示联系方式&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;

&#x2F;&#x2F; 数据
let name &#x3D; &#39;张三&#39;; &#x2F;&#x2F; 注意: 此时的name不是响应式,不会即刻更新
let age &#x3D; 25;
let tel &#x3D; &#39;13812345678&#39;;
let address &#x3D; &#39;北京市海淀区&#39;;

&#x2F;&#x2F; 方法
function changeName() &#123;
    name &#x3D; &#39;zhang-san&#39; &#x2F;&#x2F; 确实改了,但是不会触发视图更新
&#125;
function changeAge() &#123;
    age +&#x3D; 1
&#125;
function showTel() &#123;
    alert(tel)
&#125;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.person &#123;
    background-color: skyblue;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    padding: 20px;
&#125;

button &#123;
    margin: 0 5px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>这样就相当于在script标签&#96;&#96;setup函数内创建变量并return<code>,但是要求</code>setup属性&#96;的script标签和函数的script标签有同样的语言类型</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/10afafa904b49db2a848217ab9af80c3.png" alt="img"></p>
<blockquote>
<p>扩展： 上述代码，还需要编写一个不写<code>setup</code>的<code>script</code>标签，去指定组件名字，比较麻烦，我们可以借助<code>vite</code>中的插件简化</p>
</blockquote>
<ol>
<li>第一步：在终端中<code>npm i vite-plugin-vue-setup-extend -D</code></li>
<li>第二步：打开<code>vite.config.ts</code>文件，添加：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineConfig <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vite'</span>
<span class="token keyword">import</span> VueSetupExtend <span class="token keyword">from</span> <span class="token string">'vite-plugin-vue-setup-extend'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  plugins<span class="token operator">:</span> <span class="token punctuation">[</span> <span class="token function">VueSetupExtend</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>第三步：<code>&lt;script setup lang=&quot;ts&quot; name=&quot;Person&quot;&gt;</code></li>
</ol>
<h3 id="3-4-ref创建【基本类型的响应式数据】"><a href="#3-4-ref创建【基本类型的响应式数据】" class="headerlink" title="3.4 ref创建【基本类型的响应式数据】"></a>3.4 ref创建【基本类型的响应式数据】</h3><blockquote>
<p>在Vue2中,只要把数据丢在<code>data()函数</code>中，该数据就是响应式的。</p>
</blockquote>
<p>而在Vue3中，我们有两种创建响应式数据的方法<code>ref</code>和<code>reactive</code></p>
<p>（该ref与vue2中的ref不同。该ref是可以使数据变为响应式的，哪个是响应式，就把哪个用ref包一下）</p>
<ul>
<li>作用：定义响应式变量。</li>
<li>语法：<code>let xxx = ref(初始值)</code>。</li>
<li>返回值：一个<code>RefImpl</code>的实例对象，简称<code>ref对象</code>或<code>ref</code>，<code>ref</code>对象的<code>value</code>属性是响应式的。</li>
<li>注意点：<ul>
<li><code>JS</code>中操作数据需要：<code>xxx.value</code>，但模板中不需要<code>.value</code>，直接使用即可。</li>
<li>对于<code>let name = ref(&#39;张三&#39;)</code>来说，<code>name</code>不是响应式的，<code>name.value</code>是响应式的。（JS中操作ref对象时候需要.value）</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;姓名: &#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;p&gt;年龄: &#123;&#123; age &#125;&#125;&lt;&#x2F;p&gt;
        &lt;p&gt;地址: &#123;&#123; address &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;showTel&quot;&gt;展示联系方式&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; ref &#125; from &#39;vue&#39;;
&#x2F;&#x2F; 数据
let name &#x3D; ref(&#39;张三&#39;); &#x2F;&#x2F; 注意: 此时的name不是响应式,不会即刻更新
let age &#x3D; ref(25);
let tel &#x3D; &#39;13812345678&#39;;
let address &#x3D; &#39;北京市海淀区&#39;;

&#x2F;&#x2F; 方法
function changeName() &#123;
    name.value &#x3D; &#39;zhang-san&#39; &#x2F;&#x2F; 确实改了,但是不会触发视图更新
&#125;
function changeAge() &#123;
    age.value +&#x3D; 1
&#125;
function showTel() &#123;
    alert(tel)
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-5-reactive定义【对象类型的响应式数据】"><a href="#3-5-reactive定义【对象类型的响应式数据】" class="headerlink" title="3.5 reactive定义【对象类型的响应式数据】"></a>3.5 reactive定义【对象类型的响应式数据】</h3><ul>
<li>作用：定义一个响应式对象（基本类型不要用它，要用<code>ref</code>，否则报错）</li>
<li>语法：<code>let 响应式对象 = reactive(源对象)</code>。</li>
<li>返回值：一个<code>Proxy</code>的实例对象，简称：<code>响应式对象</code>，修改数据会立刻在界面上修改。</li>
<li>注意点：<code>reactive</code>定义的响应式数据是<code>&quot;深层次&quot;</code>的。</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;一辆&#123;&#123; car.brand &#125;&#125;车,价值&#123;&#123; car.price &#125;&#125;万元&lt;&#x2F;h2&gt;
        &lt;button @click&#x3D;&quot;changePrice&quot;&gt;修改汽车点击事件&lt;&#x2F;button&gt;
        &lt;h2&gt;游戏列表&lt;&#x2F;h2&gt;
        &lt;ul&gt;
            &lt;!-- key属性用于给Vue的虚拟DOM添加唯一标识，在列表更新时，Vue会基于key来判断元素是否被移动、删除或增加，从而减少重新渲染的开销 --&gt;
            &lt;!-- :表示要按照vue语法解析 --&gt;
            &lt;li v-for&#x3D;&quot;game in games&quot; :key&#x3D;&quot;game.id&quot;&gt;&#123;&#123; game.name &#125;&#125;&lt;&#x2F;li&gt;
        &lt;&#x2F;ul&gt;
        &lt;button @click&#x3D;&quot;changeFirstGameName&quot;&gt;修改第一个游戏名称&lt;&#x2F;button&gt;

        &lt;hr&gt;
        &lt;p&gt;&#123;&#123; data.a.b.c &#125;&#125;&lt;&#x2F;p&gt;
        &lt;button @click&#x3D;&quot;data.a.b.c++&quot;&gt;测试按钮&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive &#125; from &#39;vue&#39;;
&#x2F;&#x2F; 数据
let car &#x3D; reactive(&#123;
    brand: &#39;宝马&#39;,
    price: 100,
&#125;)
let games &#x3D; reactive([
    &#123; id: 1, name: &#39;王者荣耀&#39; &#125;,
    &#123; id: 2, name: &#39;绝地求生&#39; &#125;,
    &#123; id: 3, name: &#39;英雄联盟&#39; &#125;,
])

let data &#x3D; reactive(&#123; &#x2F;&#x2F; 深层次
    a: &#123;
        b: &#123;
            c: 1
        &#125;
    &#125;
&#125;)
&#x2F;&#x2F;方法
function changePrice() &#123;
    let newPrice &#x3D; prompt(&#39;请输入新的价格：&#39;);
    car.price &#x3D; parseInt(newPrice &#x3D;&#x3D;&#x3D; null ? &#39;0&#39; : newPrice);
&#125;
function changeFirstGameName() &#123;
    games[0].name &#x3D; &quot;原神启动&quot;
&#125;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.person &#123;
    background-color: skyblue;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    padding: 20px;
&#125;

button &#123;
    margin: 0 5px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-6-ref定义【对象类型的响应式数据】"><a href="#3-6-ref定义【对象类型的响应式数据】" class="headerlink" title="3.6 ref定义【对象类型的响应式数据】"></a>3.6 ref定义【对象类型的响应式数据】</h3><ul>
<li>其实<code>ref</code>接收的数据可以是：基本类型、对象类型。</li>
<li>若<code>ref</code>接收的是对象类型，内部其实也是调用了<code>reactive</code>函数。</li>
</ul>
<blockquote>
<p>reactive只能定义对象类型的响应式数据</p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;一辆&#123;&#123; car.brand &#125;&#125;车,价值&#123;&#123; car.price &#125;&#125;万元&lt;&#x2F;h2&gt;
        &lt;button @click&#x3D;&quot;changePrice&quot;&gt;修改汽车点击事件&lt;&#x2F;button&gt;
        &lt;h2&gt;游戏列表&lt;&#x2F;h2&gt;
        &lt;ul&gt;
            &lt;!-- key属性用于给Vue的虚拟DOM添加唯一标识，在列表更新时，Vue会基于key来判断元素是否被移动、删除或增加，从而减少重新渲染的开销 --&gt;
            &lt;!-- :表示要按照vue语法解析 --&gt;
            &lt;li v-for&#x3D;&quot;game in games&quot; :key&#x3D;&quot;game.id&quot;&gt;&#123;&#123; game.name &#125;&#125;&lt;&#x2F;li&gt;
        &lt;&#x2F;ul&gt;
        &lt;button @click&#x3D;&quot;changeFirstGameName&quot;&gt;修改第一个游戏名称&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;

&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive, ref &#125; from &#39;vue&#39;;
&#x2F;&#x2F; 数据
let car &#x3D; ref(&#123;
    brand: &#39;宝马&#39;,
    price: 100,
&#125;)
let games &#x3D; ref([
    &#123; id: 1, name: &#39;王者荣耀&#39; &#125;,
    &#123; id: 2, name: &#39;绝地求生&#39; &#125;,
    &#123; id: 3, name: &#39;英雄联盟&#39; &#125;,
])

let obj &#x3D; reactive(&#123; x: 1, y: 2 &#125;)
&#x2F;&#x2F;方法
function changePrice() &#123;
    let newPrice &#x3D; prompt(&#39;请输入新的价格：&#39;);
    car.value.price &#x3D; parseInt(newPrice &#x3D;&#x3D;&#x3D; null ? &#39;0&#39; : newPrice);
&#125;
function changeFirstGameName() &#123;
    games.value[0].name &#x3D; &quot;原神启动&quot;
&#125;

console.log(car);
console.log(obj);

&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p><code>ref</code>创建响应式对象类型和<code>reactive</code>创建响应式对象的对比（ref创建的内部有一个<code>Proxy(Object)</code>）</p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250113233542748.png" alt="image-20250113233542748"></p>
<h3 id="3-7【ref-对比-reactive】"><a href="#3-7【ref-对比-reactive】" class="headerlink" title="3.7【ref 对比 reactive】"></a>3.7【ref 对比 reactive】</h3><p>宏观角度看：</p>
<blockquote>
<ol>
<li><code>ref</code>用来定义：基本类型数据、对象类型数据；</li>
<li><code>reactive</code>用来定义：对象类型数据。</li>
</ol>
</blockquote>
<p>区别：</p>
<blockquote>
<ol>
<li><code>ref</code>创建的变量必须使用<code>.value</code>（可以使用<a target="_blank" rel="noopener" href="https://blog.csdn.net/m0_53562074/article/details/136273367">volar_vue3</a>插件自动添加<code>.value</code>）(不过现在似乎集成到<code>Vue-official插件上了</code></li>
<li><code>reactive</code>重新分配一个新对象，会失去响应式（可以使用<code>Object.assign</code>去整体替换）。</li>
<li><code>ref</code>创建一个响应式对象,可以直接使用<code>.value = &#123;a: 100, b: 200&#125;</code>这样的方式,根本原因是因为<code>.value</code>里面维护的就是一个对象属性</li>
</ol>
</blockquote>
<blockquote>
<p><code>reactive</code>定义的<code>Proxy</code>示例对象中假如有属性是<code>ref()</code>数据，不用<code>.value</code></p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;一辆&#123;&#123; car.brand &#125;&#125;车,价值&#123;&#123; car.price &#125;&#125;万元&lt;&#x2F;h2&gt;
        &lt;button @click&#x3D;&quot;changePrice&quot;&gt;修改汽车点击事件&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeBrand&quot;&gt;改变车辆品牌&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeCar&quot;&gt;修改车辆&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive, ref &#125; from &#39;vue&#39;;
&#x2F;&#x2F; 数据
let car &#x3D; reactive(&#123;
    brand: &#39;宝马&#39;,
    price: 100,
&#125;)

let obj &#x3D; reactive(&#123; x: 1, y: 2 &#125;)
&#x2F;&#x2F;方法
function changePrice() &#123;
    let newPrice &#x3D; prompt(&#39;请输入新的价格：&#39;);
    car.price &#x3D; parseInt(newPrice &#x3D;&#x3D;&#x3D; null ? &#39;0&#39; : newPrice);
&#125;
function changeBrand() &#123;
    car.brand &#x3D; &quot;奔驰&quot;
&#125;

function changeCar() &#123;

    &#x2F;&#x2F; car &#x3D; &#123; brand: &#39;奥迪&#39;, price: 200 &#125; &#x2F;&#x2F; error 原本car是一个Proxy对象,这样修改变成普通对象
    &#x2F;&#x2F; car &#x3D; reactive(&#123; brand: &#39;奥迪&#39;, price: 200 &#125;) &#x2F;&#x2F; error 有两个Proxy对象,也不行
    Object.assign(car, &#123; brand: &#39;奥迪&#39;, price: 200 &#125;) &#x2F;&#x2F; 正确
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>使用原则：</li>
</ul>
<blockquote>
<ol>
<li>若需要一个基本类型的响应式数据，必须使用<code>ref</code>。</li>
<li>若需要一个响应式对象，层级不深，<code>ref</code>、<code>reactive</code>都可以。</li>
<li>若需要一个响应式对象，且层级较深，推荐使用<code>reactive</code>。做表单相关的数据，推荐使用reactive。</li>
</ol>
</blockquote>
<h3 id="3-8【toRefs-与-toRef】"><a href="#3-8【toRefs-与-toRef】" class="headerlink" title="3.8【toRefs 与 toRef】"></a>3.8【toRefs 与 toRef】</h3><p><code>解析赋值</code>: 提取值并赋给变量</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/%E8%A7%A3%E6%9E%90%E8%B5%8B%E5%80%BC.png" alt="image-20250114151603945"></p>
<blockquote>
<p>想要把对象里面的每一个属性拿出来变成<code>RefImpl</code>对象,就要用到<code>toRef(s)</code>方法,这样返回的<code>类似于响应式对象里面属性的引用??</code></p>
</blockquote>
<p> 作用：将一个响应式对象中的每一个属性，转换为<code>ref</code>对象。</p>
<ul>
<li><p>备注：<code>toRefs</code>与<code>toRef</code>功能一致，但<code>toRefs</code>可以批量转换。 </p>
</li>
<li><p>toRefs是把整个reactive所定义的对象的每一组key-value都拿出来形成一个新的对象并且还具备响应式的能力</p>
</li>
<li><p>语法如下：</p>
</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;hr&gt;
        &lt;!-- &lt;h2&gt;姓名：&#123;&#123; name &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;h2&gt;年龄：&#123;&#123; age &#125;&#125;&lt;&#x2F;h2&gt; --&gt;
        &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名称&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; reactive, ref, toRef, toRefs &#125; from &#39;vue&#39;;
let person &#x3D; reactive(&#123; name: &#39;张三&#39;, age: 20 &#125;)

let &#123; name, age &#125; &#x3D; toRefs(person) &#x2F;&#x2F; 解构赋值

let age_ &#x3D; toRef(person, &#39;age&#39;) &#x2F;&#x2F; 单独取出age

function changeName() &#123;
    &#x2F;&#x2F; person.name +&#x3D; &#39;-&#39;
    name.value +&#x3D; &#39;-&#39;
&#125;
function changeAge() &#123;
    &#x2F;&#x2F; person.age +&#x3D; 1
    age.value +&#x3D; 1
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-9-computed计算属性"><a href="#3-9-computed计算属性" class="headerlink" title="3.9 computed计算属性"></a>3.9 computed计算属性</h3><blockquote>
<p>补充知识点: <code>双向绑定和单向数据绑定</code></p>
<p>在 Vue.js 中，<code>v-bind</code> 和 <code>v-model</code> 都用于处理数据绑定，但它们的方式和数据源有所不同。</p>
<ol>
<li><strong>v-bind 单项绑定</strong>：<code>v-bind</code> 的作用是将数据从 Vue 实例单向绑定到 DOM 元素的属性上。也就是说，当数据发生变化时，DOM 会自动更新以反映这些变化，但 DOM 的变化不会影响到 Vue 实例中的数据。<code>v-bind</code> 的数据源通常是 Vue 实例的 <code>data</code> 选项中定义的数据。例如：</li>
</ol>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">v-bind:</span>title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    鼠标悬停几秒钟查看此处动态绑定的提示信息！
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'页面加载于 '</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLocaleString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，<code>message</code> 是数据源，它被绑定到 <code>span</code> 元素的 <code>title</code> 属性上。</p>
<ol>
<li><strong>v-model 双向绑定</strong>：<code>v-model</code> 指令用于在表单元素或组件上创建双向数据绑定。这意味着不仅数据可以动态地反映到视图中，用户对视图的修改也会同步到数据源中。<code>v-model</code> 内部使用了 <code>v-bind</code> 和 <code>v-on</code>（即事件监听器）来实现双向数据绑定。<code>v-model</code> 的数据源同样也是 Vue 实例的 <code>data</code> 选项中定义的数据。例如：</li>
</ol>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>&#123;&#123; message &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>message<span class="token punctuation">"</span></span> <span class="token attr-name">placeholder</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>编辑我<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    <span class="token literal-property property">el</span><span class="token operator">:</span> <span class="token string">'#app'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">'Hello Vue!'</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，<code>message</code> 是数据源，输入框的内容与 <code>message</code> 数据进行了双向绑定，用户修改输入框的内容时，<code>message</code> 也会随之改变，反之亦然。</p>
<p>需要注意的是，<code>v-model</code> 并不是适用于所有类型的元素，它主要用于表单输入元素（如 <code>input</code>、<code>textarea</code>、<code>select</code>）以及自定义的组件。</p>
</blockquote>
<p><strong><code>computed</code>函数</strong></p>
<p>作用：<code>根据已有数据计算出新数据</code>（和<code>Vue2</code>中的<code>computed</code>作用一致）计算属性是有缓存的,即使在模板中多次调用,但是假设计算相关的变量的值没有改变,那么只会执行一次computed函数</p>
<p>底层借助了<code>Object.defineProperty</code>方法提供的getter和setter</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        姓: &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;firstName&quot;&gt; &lt;br&gt;
        名:&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;lastName&quot;&gt;&lt;br&gt;
        &lt;!-- 假如要实现一个首字母大写的需求，把它放在模板中将会十分臃肿，所以使用计算属性能够更加清晰 --&gt;
        全名: &lt;span&gt;&#123;&#123; firstName.slice(0, 1).toUpperCase() + firstName.slice(1) + &quot;-&quot; + lastName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;!-- 
Vue2写计算属性的方式 
&lt;script lang&#x3D;&quot;ts&quot;&gt;
export default &#123;
    computed: &#123;

    &#125;
&#125;
&lt;&#x2F;script&gt;
--&gt;

&lt;!-- Vue3写计算属性的方式 --&gt;
&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; ref, computed &#125; from &#39;vue&#39;;
let firstName &#x3D; ref(&#39;张&#39;);
let lastName &#x3D; ref(&#39;三&#39;);


function fullName2() &#123;
    console.log(&#39;没有缓存,每次都会被调用&#39;)
    return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &quot;-&quot; + lastName.value
&#125;
let fullName &#x3D; computed(() &#x3D;&gt; &#123;
    console.log(&#39;有缓存&#39;)
    return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &quot;-&quot; + lastName.value
&#125;)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250114212309989.png" alt="image-20250114212309989"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        姓: &lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;firstName&quot;&gt; &lt;br&gt;
        名:&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;lastName&quot;&gt;&lt;br&gt;
        &lt;!-- 假如要实现一个首字母大写的需求 --&gt;
        全名: &lt;span&gt;&#123;&#123; firstName.slice(0, 1).toUpperCase() + firstName.slice(1) + &quot;-&quot; + lastName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        全名: &lt;span&gt;&#123;&#123; fullName2() &#125;&#125;&lt;&#x2F;span&gt;&lt;br&gt;
        &lt;button @click&#x3D;&quot;changefullName&quot;&gt;修改fullName为li-si&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;!-- Vue2写计算属性的方式 
&lt;script lang&#x3D;&quot;ts&quot;&gt;
export default &#123;
    computed: &#123;
		fullName: &#123;
     		 get() &#123;
       			return &#96;$&#123;this.firstName&#125; $&#123;this.lastName&#125;&#96;;
      &#125;,
      set(value) &#123;
        const names &#x3D; value.split(&#39; &#39;);
        this.firstName &#x3D; names[0];
        this.lastName &#x3D; names[1];
      		&#125;
   		&#125;
    &#125;
&#125;
&lt;&#x2F;script&gt;
--&gt;
&lt;!-- Vue3写计算属性的方式 --&gt;
&lt;script lang&#x3D;&quot;ts&quot;&gt;

export default &#123;
    name: &#39;Person&#39;, &#x2F;&#x2F; 组件名称
&#125;
&lt;&#x2F;script&gt;

&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
import &#123; ref, computed &#125; from &#39;vue&#39;;
let firstName &#x3D; ref(&#39;张&#39;);
let lastName &#x3D; ref(&#39;三&#39;);

function fullName2() &#123;
    console.log(&#39;没有缓存,每次都会被调用&#39;)
    return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &quot;-&quot; + lastName.value
&#125;
&#x2F;&#x2F; 这样定义的fullName是只读的
&#x2F;&#x2F; let fullName &#x3D; computed(() &#x3D;&gt; &#123;
&#x2F;&#x2F;     console.log(&#39;有缓存&#39;)
&#x2F;&#x2F;     return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &quot;-&quot; + lastName.value
&#x2F;&#x2F; &#125;)

&#x2F;&#x2F; 这样定义的fullName可读写
let fullName &#x3D; computed(&#123;
    get() &#123;
        return firstName.value.slice(0, 1).toUpperCase() + firstName.value.slice(1) + &quot;-&quot; + lastName.value
    &#125;,
    set(val) &#123;
        const x &#x3D; val.split(&#39;-&#39;)
        firstName.value &#x3D; x[0]
        lastName.value &#x3D; x[1]
        console.log(&quot;当修改fullName的值时,会触发set方法&quot;, val);
    &#125;
&#125;)

function changefullName() &#123;
    console.log(fullName); &#x2F;&#x2F; computedRefImpl对象
    console.log(fullName.value); &#x2F;&#x2F; 全名
    fullName.value &#x3D; &#39;li-si&#39;; &#x2F;&#x2F; 修改fullName的值
&#125;
&lt;&#x2F;script&gt;
&lt;style&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-10-watch"><a href="#3-10-watch" class="headerlink" title="3.10 watch"></a>3.10 watch</h3><ul>
<li>作用：监视数据的变化（和<code>Vue2</code>中的<code>watch</code>作用一致）</li>
<li>特点：<code>Vue3</code>中的<code>watch</code>只能监视以下四种数据：</li>
</ul>
<blockquote>
<ol>
<li><code>ref</code>定义的数据。</li>
<li><code>reactive</code>定义的数据。</li>
<li>函数返回一个值（<code>getter函数</code>）。</li>
<li>一个包含上述内容的数组。</li>
</ol>
</blockquote>
<p>我们在<code>Vue3</code>中使用<code>watch</code>的时候，通常会遇到以下几种情况：</p>
<h4 id="情况一"><a href="#情况一" class="headerlink" title="情况一"></a>情况一</h4><blockquote>
<p>监视<code>ref</code>定义的【基本类型】数据：直接写数据名即可，监视的是其<code>value</code>值的改变。</p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h1&gt;情况一：监视【ref】定义的【基本类型】数据&lt;&#x2F;h1&gt;
    &lt;h2&gt;当前求和为：&#123;&#123;sum&#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;changeSum&quot;&gt;点我sum+1&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;ref,watch&#125; from &#39;vue&#39;
  &#x2F;&#x2F; 数据
  let sum &#x3D; ref(0)
  &#x2F;&#x2F; 方法
  function changeSum()&#123;
    sum.value +&#x3D; 1
  &#125;
  &#x2F;&#x2F; 监视，情况一：监视【ref】定义的【基本类型】数据
  const stopWatch &#x3D; watch(sum,(newValue,oldValue)&#x3D;&gt;&#123;  &#x2F;&#x2F;不写sum.value,因为sum才是ref定义的数据。而不是sum.value
    console.log(&#39;sum变化了&#39;,newValue,oldValue)
    if(newValue &gt;&#x3D; 10)&#123;
      stopWatch()  &#x2F;&#x2F;回调一个停止监视的函数，此处是当newValue&gt;10时，停止监视。
    &#125;
  &#125;)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="情况二"><a href="#情况二" class="headerlink" title="情况二"></a>情况二</h4><blockquote>
<p>监视<code>ref</code>定义的【对象类型】数据：<code>直接写数据名，监视的是对象的【地址值】，若想监视对象内部的数据，要手动开启深度监视</code></p>
</blockquote>
<p> 注意：</p>
<ul>
<li>若修改的是<code>ref</code>定义的对象中的属性，<code>newValue</code> 和 <code>oldValue</code> 都是新值，因为它们是同一个对象（地址一样）。</li>
<li>若修改整个<code>ref</code>定义的对象，<code>newValue</code> 是新值， <code>oldValue</code> 是旧值，因为不是同一个对象了（非同一个地址）。</li>
</ul>
<p>深度监视的语法：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">"Person数据发生变化"</span><span class="token punctuation">,</span> newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> deep<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>watch的第一个参数是：被监视的数据</p>
<p>watch的第二个参数是：监视的回调</p>
<p>watch的第三个参数是：配置对象（deep、immediate等等…..）qing</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h1&gt;情况二：监视【ref】定义的【对象类型】数据&lt;&#x2F;h1&gt;
    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changePerson&quot;&gt;修改整个人&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;ref,watch&#125; from &#39;vue&#39;
  &#x2F;&#x2F; 数据
  let person &#x3D; ref(&#123;
    name:&#39;张三&#39;,
    age:18
  &#125;)
  &#x2F;&#x2F; 方法
  function changeName()&#123;
    person.value.name +&#x3D; &#39;~&#39;
  &#125;
  function changeAge()&#123;
    person.value.age +&#x3D; 1
  &#125;
  function changePerson()&#123;
    person.value &#x3D; &#123;name:&#39;李四&#39;,age:90&#125;
  &#125;
  &#x2F;* 
    监视，情况一：监视【ref】定义的【对象类型】数据，监视的是对象的地址值，只有整个对象被改变的时候才会被监视到。
    若想监视对象内部属性的变化，需要手动开启深度监视
    watch的第一个参数是：被监视的数据
    watch的第二个参数是：监视的回调
    watch的第三个参数是：配置对象（deep、immediate等等.....） 
  *&#x2F;
  watch(person,(newValue,oldValue)&#x3D;&gt;&#123;
    console.log(&#39;person变化了&#39;,newValue,oldValue)
  &#125;,&#123;deep:true&#125;)
  
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="情况三"><a href="#情况三" class="headerlink" title="情况三"></a>情况三</h4><blockquote>
<p>监视<code>reactive</code>定义的对象型数据，且默认开启了深度监视</p>
</blockquote>
<p><code>reactiv隐式创建深层监听，并且该深度监视没法关闭</code></p>
<p>对比ref与reactiv修改整个对象的方法</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250115143636575.png" alt="image-20250115143636575"></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h1&gt;情况三：监视【reactive】定义的【对象类型】数据&lt;&#x2F;h1&gt;
    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changePerson&quot;&gt;修改整个人&lt;&#x2F;button&gt;
    &lt;hr&gt;
    &lt;h2&gt;测试：&#123;&#123;obj.a.b.c&#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;test&quot;&gt;修改obj.a.b.c&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;reactive,watch&#125; from &#39;vue&#39;
  &#x2F;&#x2F; 数据
  let person &#x3D; reactive(&#123;
    name:&#39;张三&#39;,
    age:18
  &#125;)
  let obj &#x3D; reactive(&#123;
    a:&#123;
      b:&#123;
        c:666
      &#125;
    &#125;
  &#125;)
  &#x2F;&#x2F; 方法
  function changeName()&#123;
    person.name +&#x3D; &#39;~&#39;
  &#125;
  function changeAge()&#123;
    person.age +&#x3D; 1
  &#125;
  function changePerson()&#123;
    Object.assign(person,&#123;name:&#39;李四&#39;,age:80&#125;)
  &#125;
  function test()&#123;
    obj.a.b.c &#x3D; 888
  &#125;
 
  &#x2F;&#x2F; 监视，情况三：监视【reactive】定义的【对象类型】数据，且默认是开启深度监视的
  watch(person,(newValue,oldValue)&#x3D;&gt;&#123;
    console.log(&#39;person变化了&#39;,newValue,oldValue)
  &#125;)
  watch(obj,(newValue,oldValue)&#x3D;&gt;&#123;
    console.log(&#39;Obj变化了&#39;,newValue,oldValue)
  &#125;)
  
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="情况四"><a href="#情况四" class="headerlink" title="情况四"></a>情况四</h4><p>监视<code>ref</code>或<code>reactive</code>定义的【对象类型】数据中的<code>某个属性</code>，（遇到该情况，反手将起包装成<code>getter函数 -&gt; 返回一个值的函数</code>）注意点如下：</p>
<ol>
<li>若该属性值不是【对象类型】，需要写成函数形式。</li>
<li>若该属性值是依然是【对象类型】，可直接编，也可写成函数，<code>建议写成函数</code>，这样能够监视全部改变。</li>
</ol>
<p>结论：监视的要是对象里的属性，那么最好写函数式，注意点：若是对象监视的是地址值，需要关注对象内部，需要手动开启深度监视。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/747c75a02c946d2c5dc47cd01af97a29.png" alt="img"></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> ref<span class="token punctuation">,</span> reactive<span class="token punctuation">,</span> watch <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token number">25</span><span class="token punctuation">,</span>
    car<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        c1<span class="token operator">:</span> <span class="token string">'BMW'</span><span class="token punctuation">,</span>
        c2<span class="token operator">:</span> <span class="token string">'Audi'</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">changeName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'Mike'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">changeAge</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    person<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">changeFirstCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c1 <span class="token operator">=</span> <span class="token string">'Tesla'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">changeSecondCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    person<span class="token punctuation">.</span>car<span class="token punctuation">.</span>c2 <span class="token operator">=</span> <span class="token string">'Toyota'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">function</span> <span class="token function">changeAllCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    person<span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token punctuation">&#123;</span>
        c1<span class="token operator">:</span> <span class="token string">'Honda'</span><span class="token punctuation">,</span>
        c2<span class="token operator">:</span> <span class="token string">'Ford'</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>

<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> person<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'name changed from'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>car<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token comment">// 这样监视的是car对象里面的属性值，所以整体对象被重新赋值不会触发</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'car changed from'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> person<span class="token punctuation">.</span>car<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token comment">// 这样监视的是car的地址值，这样整体对象被重新赋值才会触发，不关心细枝末节</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'car changed from'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token function">watch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> person<span class="token punctuation">.</span>car<span class="token punctuation">,</span> <span class="token punctuation">(</span>newVal<span class="token punctuation">,</span> oldVal<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span> <span class="token comment">// 所有的改变都会触发，包括对象内部的属性值改变</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'car changed from'</span><span class="token punctuation">,</span> oldVal<span class="token punctuation">,</span> <span class="token string">'to'</span><span class="token punctuation">,</span> newVal<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> deep<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="情况五"><a href="#情况五" class="headerlink" title="情况五"></a>情况五</h4><blockquote>
<p>监视上述多个数据，使用数组</p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h1&gt;情况五：监视上述的多个数据&lt;&#x2F;h1&gt;
    &lt;h2&gt;姓名：&#123;&#123; person.name &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;h2&gt;年龄：&#123;&#123; person.age &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;h2&gt;汽车：&#123;&#123; person.car.c1 &#125;&#125;、&#123;&#123; person.car.c2 &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;changeName&quot;&gt;修改名字&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeAge&quot;&gt;修改年龄&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeC1&quot;&gt;修改第一台车&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeC2&quot;&gt;修改第二台车&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeCar&quot;&gt;修改整个车&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;reactive,watch&#125; from &#39;vue&#39;
 
  &#x2F;&#x2F; 数据
  let person &#x3D; reactive(&#123;
    name:&#39;张三&#39;,
    age:18,
    car:&#123;
      c1:&#39;奔驰&#39;,
      c2:&#39;宝马&#39;
    &#125;
  &#125;)
  &#x2F;&#x2F; 方法
  function changeName()&#123;
    person.name +&#x3D; &#39;~&#39;
  &#125;
  function changeAge()&#123;
    person.age +&#x3D; 1
  &#125;
  function changeC1()&#123;
    person.car.c1 &#x3D; &#39;奥迪&#39;
  &#125;
  function changeC2()&#123;
    person.car.c2 &#x3D; &#39;大众&#39;
  &#125;
  function changeCar()&#123;
    person.car &#x3D; &#123;c1:&#39;雅迪&#39;,c2:&#39;爱玛&#39;&#125;
  &#125;
 
  &#x2F;&#x2F; 监视，情况五：监视上述的多个数据
  watch([()&#x3D;&gt;person.name,person.car],(newValue,oldValue)&#x3D;&gt;&#123;
    console.log(&#39;person.car变化了&#39;,newValue,oldValue)
  &#125;,&#123;deep:true&#125;)
 
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>watch函数监视对象是监视它的地址值，即使开启了深层监听，假如原来对象的地址值并没有改变，那么回调函数中监听到的<code>newValue</code>和<code>oldValue</code>都还是读取原来地址的内容，所以会出现新值和旧值有时候一样的情况</p>
</blockquote>
<h3 id="3-11-watchEffect"><a href="#3-11-watchEffect" class="headerlink" title="3.11 watchEffect"></a>3.11 watchEffect</h3><p>官网：<code>立即运行一个函数</code>，同时响应式地追踪其依赖，并在依赖更改时重新执行该函数。</p>
<p> <code>watch</code>对比<code>watchEffect</code></p>
<blockquote>
<ol>
<li>都能监听响应式数据的变化，不同的是监听数据变化的方式不同</li>
<li><code>watch</code>：要明确指出监视的数据，watch是惰性的，你让他监视谁才监视谁</li>
<li><code>watchEffect</code>：不用明确指出监视的数据（<code>函数中用到哪些属性，那就监视哪些属性</code>）。</li>
</ol>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h2&gt;需求：当水温达到60度，或水位达到80cm时，给服务器发请求&lt;&#x2F;h2&gt;
    &lt;h2&gt;当前水温：&#123;&#123;temp&#125;&#125;℃&lt;&#x2F;h2&gt;
    &lt;h2&gt;当前水位：&#123;&#123;height&#125;&#125;cm&lt;&#x2F;h2&gt;
    &lt;button @click&#x3D;&quot;changeTemp&quot;&gt;水温+10&lt;&#x2F;button&gt;
    &lt;button @click&#x3D;&quot;changeHeight&quot;&gt;水位+10&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;ref,watch,watchEffect&#125; from &#39;vue&#39;
 
  &#x2F;&#x2F; 数据
  let temp &#x3D; ref(10)
  let height &#x3D; ref(0)
 
  &#x2F;&#x2F; 方法
  function changeTemp()&#123;
    temp.value +&#x3D; 10
  &#125;
  function changeHeight()&#123;
    height.value +&#x3D; 10
  &#125;
 
  &#x2F;&#x2F; 监视 -- watch实现  watch是惰性的，你让他监视谁才监视谁
  &#x2F;* watch([temp,height],(value)&#x3D;&gt;&#123;
    &#x2F;&#x2F; 从value中获取最新的水温(newTemp)、最新的水位(newHeight)
    let [newTemp,newHeight] &#x3D; value
    &#x2F;&#x2F; 逻辑
    if(newTemp &gt;&#x3D; 60 || newHeight &gt;&#x3D; 80)&#123;
      console.log(&#39;给服务器发请求&#39;)
    &#125;
  &#125;) *&#x2F;
 
  &#x2F;&#x2F; 监视 -- watchEffect实现
  watchEffect(()&#x3D;&gt;&#123; &#x2F;&#x2F; 函数里面依赖了temp.value和height.value
    if(temp.value &gt;&#x3D; 60 || height.value &gt;&#x3D; 80)&#123;
      console.log(&#39;给服务器发请求&#39;)
    &#125;
  &#125;)
 
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-12【标签的-ref-属性】"><a href="#3-12【标签的-ref-属性】" class="headerlink" title="3.12【标签的 ref 属性】"></a>3.12【标签的 ref 属性】</h3><p>作用：用于注册模板引用。</p>
<ul>
<li>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</li>
<li>用在组件标签上，获取的是<code>组件实例对象</code>。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250115234252620.png" alt="image-20250115234252620"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250115234330590.png" alt="image-20250115234330590"></p>
<blockquote>
<p>用在普通<code>DOM</code>标签上，获取的是<code>DOM</code>节点。</p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;h1 ref&#x3D;&quot;title1&quot;&gt;尚硅谷&lt;&#x2F;h1&gt;
    &lt;h2 ref&#x3D;&quot;title2&quot;&gt;前端&lt;&#x2F;h2&gt;
    &lt;h3 ref&#x3D;&quot;title3&quot;&gt;Vue&lt;&#x2F;h3&gt;
    &lt;input type&#x3D;&quot;text&quot; ref&#x3D;&quot;inpt&quot;&gt; &lt;br&gt;&lt;br&gt;
    &lt;button @click&#x3D;&quot;showLog&quot;&gt;点我打印内容&lt;&#x2F;button&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;ref&#125; from &#39;vue&#39;
	
  let title1 &#x3D; ref()
  let title2 &#x3D; ref()
  let title3 &#x3D; ref()
 
  function showLog()&#123;
    &#x2F;&#x2F; 通过id获取元素
    const t1 &#x3D; document.getElementById(&#39;title1&#39;)
    &#x2F;&#x2F; 打印内容
    console.log((t1 as HTMLElement).innerText)
    console.log((&lt;HTMLElement&gt;t1).innerText)
    console.log(t1?.innerText)
    
    &#x2F;&#x2F; 通过ref获取元素
    console.log(title1.value)
    console.log(title2.value)
    console.log(title3.value)
  &#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>用在组件标签上，获取的是组件实例对象。但是<code>默认在组件中的数据是被隐藏的，需要暴露出来才能被看到</code></p>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 父组件App.vue --&gt;
&lt;template&gt;
  &lt;Person ref&#x3D;&quot;ren&quot;&#x2F;&gt;
  &lt;button @click&#x3D;&quot;test&quot;&gt;测试&lt;&#x2F;button&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;App&quot;&gt;
  import Person from &#39;.&#x2F;components&#x2F;Person.vue&#39;
  import &#123;ref&#125; from &#39;vue&#39;
 
  let ren &#x3D; ref()
 
  function test()&#123;
    console.log(ren.value.name)
    console.log(ren.value.age)
  &#125;
&lt;&#x2F;script&gt;
 
 
&lt;!-- 子组件Person.vue中要使用defineExpose暴露内容 --&gt;
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;ref,defineExpose&#125; from &#39;vue&#39;
	&#x2F;&#x2F; 数据
  let name &#x3D; ref(&#39;张三&#39;)
  let age &#x3D; ref(18)
  &#x2F;&#x2F; 使用defineExpose将组件中的数据交给外部
  defineExpose(&#123;name,age&#125;)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="回顾ts的泛型以及-路径"><a href="#回顾ts的泛型以及-路径" class="headerlink" title="回顾ts的泛型以及@路径"></a>回顾ts的泛型以及@路径</h3><p><code>路径别名报错注意：</code></p>
<p>如果在引入<code>&quot;@&quot;</code>符号以下报错的时候，出现</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/df3f66a49599a527ed70e1621d70357b.png" alt="img"></p>
<p>这个错误通常是由于找不到所需的模块或类型声明文件引起的。在 Vue 3 项目中，<code>使用@引入根目录是一个常见的路径别名设置</code>。</p>
<p>要解决这个问题，你需要在你的项目中进行一些配置：</p>
<p>在项目的根目录下找到 <code>tsconfig.json</code> 文件（如果没有，请创建一个）。这是 TypeScript 的配置文件。</p>
<p>在 <code>tsconfig.json</code> 文件中，添加一个 <code>&quot;baseUrl&quot;</code> 属性，指定你的根目录的路径</p>
<p>如果你使用了路径别名，比如 <code>&quot;@&quot;</code>，你还需要添加一个 <code>&quot;paths&quot;</code> 属性来映射路径别名到实际的文件路径。</p>
<p>tsconfig.json 文件代码如下：</p>
<pre class="line-numbers language-json" data-language="json"><code class="language-json"><span class="token punctuation">&#123;</span>
  <span class="token property">"files"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"references"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.node.json"</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
      <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"./tsconfig.app.json"</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  
    <span class="token property">"compilerOptions"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
      <span class="token property">"baseUrl"</span><span class="token operator">:</span> <span class="token string">"."</span><span class="token punctuation">,</span>
      <span class="token property">"paths"</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token property">"@/*"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"src/*"</span><span class="token punctuation">]</span>
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token comment">// 其他选项...</span>
    <span class="token punctuation">&#125;</span> 
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>泛型编程</code>是一种重要的概念，类似于c++中的模板编程</p>
<pre class="line-numbers language-Vue" data-language="Vue"><code class="language-Vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;


&lt;script setup lang&#x3D;&quot;ts&quot;&gt;
&#x2F;&#x2F; import &#123; typePersonInter &#125; from &quot;..&#x2F;types&#x2F;index&quot; &#x2F;&#x2F; type表示该变量是一个类型，不是一个简单的值
import &#123; type PersonInter, type Persons &#125; from &quot;@&#x2F;types&quot; &#x2F;&#x2F; @符表示从src目录开始寻找
let person: PersonInter &#x3D; &#123; id: &quot;aacc01&quot;, name: &#39;张三&#39;, age: 20 &#125;

let personList: Persons &#x3D; [ &#x2F;&#x2F; 泛型的概念类似于C++中的模板
    &#123; id: &quot;aacc01&quot;, name: &#39;张三&#39;, age: 20 &#125;,
    &#123; id: &quot;aacc02&quot;, name: &#39;李四&#39;, age: 21 &#125;,
    &#123; id: &quot;aacc03&quot;, name: &#39;王五&#39;, age: 25 &#125;
]


&lt;&#x2F;script&gt;

&lt;style scoped&gt;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 定义一个接口用于限制Person的属性</span>
<span class="token keyword">export</span> <span class="token keyword">interface</span> <span class="token class-name">PersonInter</span><span class="token punctuation">&#123;</span>
    id<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span>
    age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span>
    gender <span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token comment">// ?:表示该属性在实例化的时候可有可无</span>
<span class="token punctuation">&#125;</span>

<span class="token comment">// 自定义类型 c++的typedef ???</span>
<span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">Persons</span> <span class="token operator">=</span> <span class="token builtin">Array</span><span class="token operator">&lt;</span>PersonInter<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-13-组件-props的使用"><a href="#3-13-组件-props的使用" class="headerlink" title="3.13 (组件)props的使用"></a>3.13 (组件)props的使用</h3><p>在父组件的标签中定义属性（可以使用vue语法）传递变量给子组件，这样子组件中可以使用对应的数据</p>
<p><code>defineProps()</code>函数接收一个数组作为参数，数组的每一项都是一个父组件中传递数据的<code>属性字符串</code>，该函数将数据接收并<code>返回</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116141336102.png" alt="image-20250116141336102"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116142008832.png" alt="image-20250116142008832"></p>
<p><code>v-for</code>语法中，可以使用<code>(item, index) in list</code>这样能够把索引下标也获取下来，一定程度避免没有设置<code>:key</code>时数据出现混乱的情况，但是一般情况下不建议</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116143027561.png" alt="image-20250116143027561"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116143947255.png" alt="image-20250116143947255"></p>
<h4 id="App-vue"><a href="#App-vue" class="headerlink" title="App.vue"></a>App.vue</h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;!-- 务必看懂下面这一行代码 --&gt;
  &lt;!-- &lt;h2 a&#x3D;&quot;1+1&quot; :b&#x3D;&quot;1+1&quot; c&#x3D;&quot;x&quot; :d&#x3D;&quot;x&quot; ref&#x3D;&quot;qwe&quot;&gt;测试&lt;&#x2F;h2&gt; --&gt;
  
  &lt;Person a&#x3D;&quot;哈哈&quot; &#x2F;&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;App&quot;&gt;
  import Person from &#39;.&#x2F;components&#x2F;Person.vue&#39;
  import &#123;reactive&#125; from &#39;vue&#39;
  import &#123;type Persons&#125; from &#39;@&#x2F;types&#39;
 
  let x &#x3D; 9
 
  let personList &#x3D; reactive&lt;Persons&gt;([
    &#123;id:&#39;asudfysafd01&#39;,name:&#39;张三&#39;,age:18&#125;,
    &#123;id:&#39;asudfysafd02&#39;,name:&#39;李四&#39;,age:20&#125;,
    &#123;id:&#39;asudfysaf)d03&#39;,name:&#39;王五&#39;,age:22&#125;
  ])
 
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="Person-vue"><a href="#Person-vue" class="headerlink" title="Person.vue"></a>Person.vue</h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;person&quot;&gt;
    &lt;ul&gt;
      &lt;li v-for&#x3D;&quot;p in list&quot; :key&#x3D;&quot;p.id&quot;&gt;
        &#123;&#123;p.name&#125;&#125; -- &#123;&#123;p.age&#125;&#125;
      &lt;&#x2F;li&gt;
    &lt;&#x2F;ul&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;Person&quot;&gt;
  import &#123;withDefaults&#125; from &#39;vue&#39;
  import &#123;type Persons&#125; from &#39;@&#x2F;types&#39;
 
  &#x2F;&#x2F; 只接收list
  &#x2F;&#x2F; defineProps([&#39;list&#39;])
 
  &#x2F;&#x2F; 接收list + 限制类型
  &#x2F;&#x2F; defineProps&lt;&#123;list:Persons&#125;&gt;()
 
  &#x2F;&#x2F;  接收list + 限制类型 + 限制必要性 + 指定默认值
  withDefaults(defineProps&lt;&#123;list?:Persons&#125;&gt;(),&#123;
    list:()&#x3D;&gt; [&#123;id:&#39;ausydgyu01&#39;,name:&#39;康师傅·王麻子·特仑苏&#39;,age:19&#125;]
  &#125;)
 
 
  &#x2F;&#x2F; 接收list，同时将props保存起来
  &#x2F;* let x &#x3D; defineProps([&#39;list&#39;])
  console.log(x.list) *&#x2F;
 
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-14-生命周期钩子"><a href="#3-14-生命周期钩子" class="headerlink" title="3.14 生命周期钩子"></a>3.14 生命周期钩子</h3><p>概念：<code>Vue</code>组件实例在创建时要经历一系列的初始化步骤，在此过程中<code>Vue</code>会在合适的时机，调用特定的函数，从而让开发者有机会在特定阶段运行自己的代码，这些特定的函数统称为：<code>生命周期钩子</code></p>
<ul>
<li><p>规律：</p>
<blockquote>
<p>生命周期整体分为四个阶段，分别是：创建、挂载、更新、销毁，<code>每个阶段都有两个钩子，一前一后</code>。</p>
</blockquote>
</li>
<li><p><code>Vue2</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>beforeCreate</code>、<code>created</code><br>挂载阶段：<code>beforeMount</code>、<code>mounted</code><br>更新阶段：<code>beforeUpdate</code>、<code>updated</code><br>销毁阶段：<code>beforeDestroy</code>、<code>destroyed</code></p>
</blockquote>
<p><code>v-if</code>和<code>v-show</code>的区别:</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116183448823.png" alt="image-20250116183448823"></p>
</li>
<li><p><code>Vue3</code>的生命周期</p>
<blockquote>
<p>创建阶段：<code>setup</code><br>挂载阶段：<code>onBeforeMount</code>、<code>onMounted</code><br>更新阶段：<code>onBeforeUpdate</code>、<code>onUpdated</code><br>卸载阶段：<code>onBeforeUnmount</code>、<code>onUnmounted</code></p>
</blockquote>
</li>
<li><p>常用的钩子：<code>onMounted</code>(挂载完毕)、<code>onUpdated</code>(更新完毕)、<code>onBeforeUnmount</code>(卸载之前)</p>
</li>
</ul>
<p>（注意：在组件中，需要先把子组件挂载完毕，最后再挂载父组件App，因为父组件的最上面就是引用的一些子组件，必须先把所有的子组件挂载完毕以后。才会挂载父组件。有点像深度优先遍历）</p>
<h4 id="Person-vue-1"><a href="#Person-vue-1" class="headerlink" title="Person.vue"></a><code>Person.vue</code></h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;person&quot;&gt;
        &lt;h2&gt;当前求和为： &#123;&#123; sum &#125;&#125;&lt;&#x2F;h2&gt;
        &lt;button @click&#x3D;&quot;addSum&quot;&gt;加1&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;


&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Person&quot;&gt;
import &#123; onBeforeMount, onBeforeUnmount, onBeforeUpdate, onMounted, onUnmounted, onUpdated, ref &#125; from &#39;vue&#39;

let sum &#x3D; ref(0);
function addSum() &#123;
    sum.value +&#x3D; 1
&#125;
&#x2F;&#x2F; 创建钩子 setup其实就是
console.log(&#39;创建&#39;);

&#x2F;&#x2F; 挂载钩子 指定挂载时调用的函数
onBeforeMount(() &#x3D;&gt; &#123;
    console.log(&#39;子组件挂载前&#39;);
&#125;)
onMounted(() &#x3D;&gt; &#123;
    console.log(&#39;子组件挂载后&#39;);
&#125;)
&#x2F;&#x2F; 更新钩子
onBeforeUpdate(() &#x3D;&gt; &#123;
    console.log(&#39;更新前&#39;);
&#125;)
onUpdated(() &#x3D;&gt; &#123;
    console.log(&#39;更新后&#39;);
&#125;)
&#x2F;&#x2F; 取消挂载，卸载钩子
onBeforeUnmount(() &#x3D;&gt; &#123;
    console.log(&#39;卸载前&#39;);
&#125;)
onUnmounted(() &#x3D;&gt; &#123;
    console.log(&#39;卸载后&#39;);
&#125;)

&lt;&#x2F;script&gt;

&lt;style scoped&gt;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="App-vue-1"><a href="#App-vue-1" class="headerlink" title="App.vue"></a><code>App.vue</code></h4><pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;Person v-if&#x3D;&quot;isShow&quot; &#x2F;&gt;
&lt;&#x2F;template&gt;


&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;App&quot;&gt;
import &#123; onBeforeMount, onMounted &#125; from &quot;vue&quot;;
import Person from &quot;.&#x2F;components&#x2F;Person.vue&quot;;
let isShow &#x3D; true

onBeforeMount(() &#x3D;&gt; &#123;
    console.log(&quot;父组件--开始挂载&quot;);
&#125;)
onMounted(() &#x3D;&gt; &#123;
    console.log(&quot;父组件--挂载完毕&quot;);

&#125;)
&lt;&#x2F;script&gt;

&lt;style&gt;&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250116195711898.png" alt="image-20250116195711898"></p>
<h3 id="3-15-自定义hooks"><a href="#3-15-自定义hooks" class="headerlink" title="3.15 自定义hooks"></a>3.15 自定义hooks</h3><ul>
<li><p>什么是<code>hook</code>? &#x3D;&gt; 本质是一个函数，把<code>setup</code>函数中使用的<code>Composition API</code>进行了封装，类似于<code>vue2.x</code>中的<code>mixin</code>。</p>
</li>
<li><p>自定义<code>hook</code>的优势：复用代码, 让<code>setup</code>中的逻辑更清楚易懂。</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250117190537755.png" alt="image-20250117190537755"></p>
<blockquote>
<p><code>自定义hooks</code>在Vue3中就是一个个文件（ts）里面有一个函数包裹原本的方法，每个文件包含原本放在.vue文件中的数据和方法</p>
<p>命名规范是: 存放有关学生的就命名为useStudent.ts,有关狗的就命名为useDog.ts</p>
</blockquote>
<h4 id="useDog-ts"><a href="#useDog-ts" class="headerlink" title="useDog.ts"></a><code>useDog.ts</code></h4><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> axios<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> AxiosError <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>

<span class="token keyword">let</span> dogList <span class="token operator">=</span> <span class="token generic-function"><span class="token function">reactive</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getDog</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">try</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 发请求</span>
        <span class="token keyword">let</span> <span class="token punctuation">&#123;</span> data <span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://dog.ceo/api/breed/pembroke/images/random'</span><span class="token punctuation">)</span>
        <span class="token comment">// 维护数据</span>
        dogList<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 处理错误</span>
        <span class="token keyword">const</span> err <span class="token operator">=</span> <span class="token operator">&lt;</span>AxiosError<span class="token operator">></span>error
        <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">.</span>message<span class="token punctuation">)</span>
    <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> dogList<span class="token punctuation">,</span> getDog <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="useSum-ts"><a href="#useSum-ts" class="headerlink" title="useSum.ts"></a><code>useSum.ts</code></h4><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> computed<span class="token punctuation">,</span> ref <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token comment">// export default 直接跟值，可以是变量，数组，函数等等</span>

<span class="token comment">// export default 10</span>
<span class="token comment">// export default 'hello'</span>
<span class="token comment">// export default [1, 2, 3]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">let</span> sum <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">let</span> bigSum <span class="token operator">=</span> <span class="token function">computed</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> sum<span class="token punctuation">.</span>value <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span>

    <span class="token comment">// 方法</span>
    <span class="token keyword">function</span> <span class="token function">addSum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        sum<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
    <span class="token comment">// 向外部提供东西，这样外部才能调用</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> sum<span class="token punctuation">,</span> bigSum<span class="token punctuation">,</span> addSum <span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="3-16-v-if和v-for"><a href="#3-16-v-if和v-for" class="headerlink" title="3.16 v-if和v-for"></a>3.16 v-if和v-for</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/1737359123226.png" alt="1737359123226"></p>
<h4 id="1-功能区别"><a href="#1-功能区别" class="headerlink" title="1. 功能区别"></a>1. <strong>功能区别</strong></h4><p><code>v-if</code></p>
<ul>
<li><strong>作用</strong>：用于条件渲染，根据表达式的真假值来决定是否渲染元素。</li>
<li><strong>特点</strong>：<ul>
<li>如果表达式为 <code>false</code>，元素不会被渲染到 DOM 中。</li>
<li>如果表达式为 <code>true</code>，元素才会被渲染。</li>
<li>它是真正的条件渲染，因为切换过程中会确保条件块内的事件监听器和子组件适当地被销毁和重建。</li>
<li>如果条件块内的数据发生变化，<code>v-if</code> 会重新渲染整个条件块。</li>
</ul>
</li>
</ul>
<p><code>v-for</code></p>
<ul>
<li><strong>作用</strong>：用于循环渲染列表数据，根据数组或对象的值生成多个元素或组件。</li>
<li><strong>特点</strong>：<ul>
<li>它会根据数组或对象的长度动态生成多个 DOM 元素。</li>
<li>每个循环项是一个独立的 DOM 节点，可以通过 <code>key</code> 属性确保每个节点的唯一性。</li>
<li>适用于渲染列表、表格、动态内容等场景。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="2-使用场景区别"><a href="#2-使用场景区别" class="headerlink" title="2. 使用场景区别"></a>2. <strong>使用场景区别</strong></h4><p><code>v-if</code></p>
<ul>
<li><p><strong>适用场景</strong>：</p>
<ul>
<li><p>当需要根据条件显示或隐藏某个元素时。</p>
</li>
<li><p>当某个元素的渲染逻辑比较复杂，且不需要频繁切换时。</p>
</li>
<li><p>示例：</p>
<p>  HTML复制</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>isVisible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>只有当 isVisible 为 true 时才会显示<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<p><code>v-for</code></p>
<ul>
<li><p><strong>适用场景</strong>：</p>
<ul>
<li><p>当需要渲染一个列表或数组时。</p>
</li>
<li><p>当需要根据动态数据生成多个元素时。</p>
</li>
<li><p>示例：</p>
<p>  HTML复制</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>(item, index) in items<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>index<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<hr>
<h4 id="3-性能区别"><a href="#3-性能区别" class="headerlink" title="3. 性能区别"></a>3. <strong>性能区别</strong></h4><p><code>v-if</code></p>
<ul>
<li><strong>性能开销</strong>：<ul>
<li>如果条件为 <code>false</code>，<code>v-if</code> 不会渲染任何内容，因此在某些情况下可以节省性能。</li>
<li>如果条件频繁切换（从 <code>true</code> 到 <code>false</code> 或反之），可能会导致较多的 DOM 操作和性能开销。</li>
</ul>
</li>
</ul>
<p><code>v-for</code></p>
<ul>
<li><strong>性能开销</strong>：<ul>
<li>如果数组或对象的长度很大，<code>v-for</code> 会生成大量的 DOM 元素，可能会导致性能问题。</li>
<li>使用 <code>key</code> 属性可以优化性能，因为 Vue 会通过 <code>key</code> 来追踪每个节点的身份，从而避免不必要的 DOM 操作。</li>
</ul>
</li>
</ul>
<hr>
<h4 id="4-注意事项"><a href="#4-注意事项" class="headerlink" title="4. 注意事项"></a>4. <strong>注意事项</strong></h4><p><code>v-if</code> 和 <code>v-for</code> 的组合</p>
<ul>
<li><p><strong>不推荐同时使用</strong>：</p>
<ul>
<li><p>Vue.js 不推荐在同一个元素上同时使用 <code>v-if</code> 和 <code>v-for</code>，因为这会导致性能问题和不可预测的行为。</p>
</li>
<li><p>如果需要根据条件渲染列表，可以将 <code>v-if</code> 放在父级元素上，或者使用计算属性来过滤数据。</p>
</li>
<li><p>示例：</p>
<p>  HTML复制</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token comment">&lt;!-- 不推荐 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in items<span class="token punctuation">"</span></span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.isVisible<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.name &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>

<span class="token comment">&lt;!-- 推荐 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item in filteredItems<span class="token punctuation">"</span></span> <span class="token attr-name">:key</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>item.id<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; item.name &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<p><code>v-for</code> 的 <code>key</code> 属性</p>
<ul>
<li><strong>重要性</strong>：<ul>
<li>在使用 <code>v-for</code> 时，强烈建议为每个循环项提供唯一的 <code>key</code> 属性。</li>
<li>这有助于 Vue 更高效地更新 DOM，并避免潜在的渲染问题。</li>
</ul>
</li>
</ul>
<h3 id="3-17-v-on"><a href="#3-17-v-on" class="headerlink" title="3.17 v-on"></a>3.17 v-on</h3><p><code>v-on</code> 是 Vue.js 中用于绑定事件监听器的指令，它允许你监听 DOM 事件并在事件触发时执行指定的 JavaScript 方法或逻辑。以下是关于 <code>v-on</code> 的详细说明：</p>
<h4 id="基本用法"><a href="#基本用法" class="headerlink" title="基本用法"></a><strong>基本用法</strong></h4><p><code>v-on</code> 用于绑定事件，语法为：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup">v-on:eventName="methodName"<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>其中：</p>
<ul>
<li><code>eventName</code> 是要监听的 DOM 事件，如 <code>click</code>、<code>mouseover</code>、<code>keydown</code> 等。</li>
<li><code>methodName</code> 是 Vue 实例中定义的方法。</li>
</ul>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a><strong>示例</strong></h4><pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name"><span class="token namespace">v-on:</span>click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">&#123;</span>
  <span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
    <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">'Button clicked!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个示例中，<code>v-on:click</code> 绑定了一个点击事件，当按钮被点击时，会调用 <code>handleClick</code> 方法。</p>
<h4 id="简写形式"><a href="#简写形式" class="headerlink" title="简写形式"></a><strong>简写形式</strong></h4><p><code>v-on</code> 可以简写为 <code>@</code>，例如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="绑定内联-JavaScript"><a href="#绑定内联-JavaScript" class="headerlink" title="绑定内联 JavaScript"></a><strong>绑定内联 JavaScript</strong></h4><p><code>v-on</code> 也可以绑定内联 JavaScript，例如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>alert('You clicked the button')<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  Click Me
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>但通常建议将逻辑放在方法中，以保持模板的清晰。</p>
<h4 id="访问事件对象"><a href="#访问事件对象" class="headerlink" title="访问事件对象"></a><strong>访问事件对象</strong></h4><p>如果需要访问事件对象，可以通过 <code>$event</code> 来传递给方法：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick($event)<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token literal-property property">methods</span><span class="token operator">:</span> <span class="token punctuation">&#123;</span>
  <span class="token function">handleClick</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 访问事件对象</span>
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="事件修饰符"><a href="#事件修饰符" class="headerlink" title="事件修饰符"></a><strong>事件修饰符</strong></h4><p>Vue.js 提供了一些事件修饰符，用于简化事件处理逻辑：</p>
<ul>
<li><p><code>.stop</code>：调用 <code>event.stopPropagation()</code>。例如：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.stop</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleDivClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleButtonClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>  在这个示例中，<code>@click.stop</code> 会阻止点击事件冒泡到外层 <code>div</code>。</p>
</li>
<li><p><code>.prevent</code>：调用 <code>event.preventDefault()</code>。例如：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleSubmit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Submit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>.capture</code>：在捕获阶段触发事件。例如：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.capture</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleDivClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleButtonClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>.self</code>：只当事件是从监听器绑定的元素本身触发时才触发回调。例如：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">@click.self</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleDivClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleButtonClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
</li>
<li><p><code>.once</code>：只触发一次事件。例如：</p>
  <pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click.once</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
<h4 id="绑定多个事件"><a href="#绑定多个事件" class="headerlink" title="绑定多个事件"></a><strong>绑定多个事件</strong></h4><p>可以同时绑定多个事件监听器到同一个元素：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleClick<span class="token punctuation">"</span></span> <span class="token attr-name">@dblclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleDblClick<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Click Me<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="动态绑定事件"><a href="#动态绑定事件" class="headerlink" title="动态绑定事件"></a><strong>动态绑定事件</strong></h4><p><code>v-on</code> 可以与动态参数结合使用，例如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">:@click</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleEvent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>&#123;&#123; message &#125;&#125;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>但通常不推荐这种方式，应尽量使用明确的事件名称。</p>
<h4 id="自定义事件"><a href="#自定义事件" class="headerlink" title="自定义事件"></a><strong>自定义事件</strong></h4><p>如果你在自定义组件中使用 <code>v-on</code>，可以监听子组件发出的自定义事件。例如：</p>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>my-component</span> <span class="token attr-name">@custom-event</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>handleCustomEvent<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>my-component</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>在子组件中，可以通过 <code>$emit</code> 触发自定义事件：</p>
<pre class="line-numbers language-javascript" data-language="javascript"><code class="language-javascript"><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'custom-event'</span><span class="token punctuation">,</span> eventData<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h4 id="笔记"><a href="#笔记" class="headerlink" title="笔记"></a><strong>笔记</strong></h4><ul>
<li><code>v-on</code> 是 Vue.js 中非常强大的指令，用于绑定事件。</li>
<li>使用事件修饰符可以简化事件处理逻辑。</li>
<li>在复杂的事件处理场景中，建议使用方法而不是内联 JavaScript。</li>
</ul>
<h2 id="4-路由器"><a href="#4-路由器" class="headerlink" title="4. 路由器"></a>4. 路由器</h2><h3 id="4-1-对路由的基本理解"><a href="#4-1-对路由的基本理解" class="headerlink" title="4.1 对路由的基本理解"></a>4.1 对路由的基本理解</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/481e0a9576c3da6ec683be48418a3131.png" alt="img"></p>
<blockquote>
<p>前端和后端的路由交互： 前端访问什么的路由，交由对应的后端的函数处理请求返回对应的数据</p>
</blockquote>
<p><code>SPA（Single Page Application，单页应用）</code>是一种 Web 应用程序的架构，它通过在一个单一的页面中加载所有必要的代码（HTML、CSS 和 JavaScript），然后在用户与应用交互时动态地更新页面内容，而无需重新加载整个页面。这种架构提供了一种更流畅和响应更快的用户体验，因为它减少了页面加载的时间和资源的消耗。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250117201346271.png" alt="image-20250117201346271"></p>
<blockquote>
<p><code>vue3中的路由切换指的是（Vue组件的加载和卸载以及切换)</code></p>
<ul>
<li>改变路由并不意味着应用就变成了多页面应用<code>（Multi-Page Application, MPA）</code></li>
<li>在单页面应用<code>（Single-Page Application, SPA）</code>中，路由变化只是触发了页面内容的动态更新，而不会重新加载整个页面。这种行为与多页面应用有本质的区别</li>
</ul>
<p><strong>多页面应用（MPA）</strong></p>
<ol>
<li><strong>路由变化</strong>：</li>
</ol>
<ul>
<li>在 MPA 中，每个页面是一个独立的 HTML 文件，路由变化会触发浏览器重新加载整个页面。</li>
<li>每次用户点击链接或提交表单时，浏览器会向服务器发送一个新的请求，服务器返回一个新的 HTML 页面。</li>
</ul>
<ol start="2">
<li><strong>内容更新</strong>：</li>
</ol>
<ul>
<li>每个页面的内容是独立的，每次路由变化都会重新加载整个页面，包括 HTML、CSS 和 JavaScript。</li>
<li>这种方式可能导致页面闪烁和加载延迟，用户体验相对较差。</li>
</ul>
<ol start="3">
<li><strong>性能优化</strong>：</li>
</ol>
<ul>
<li>MPA 通常需要优化每个页面的加载时间，因为每次请求都会加载新的资源。</li>
<li>可以通过服务端渲染（SSR）和缓存策略来提高性能，但每次路由变化仍然会重新加载页面。</li>
</ul>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250117201009284.png" alt="image-20250117201009284"></p>
<h3 id="4-2-基本切换效果"><a href="#4-2-基本切换效果" class="headerlink" title="4.2 基本切换效果"></a>4.2 基本切换效果</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250117202648008.png" alt="image-20250117202648008"></p>
<ul>
<li><code>Vue3</code>中要使用<code>vue-router</code>的最新版本，目前是<code>4</code>版本。</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i vue-router<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li>路由配置文件代码如下：</li>
</ul>
<blockquote>
<p>在<code>src</code>文件夹中创建<code>router</code>文件夹 &#x2F;<code>index.ts</code></p>
</blockquote>
<p><strong>index.ts代码：</strong></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 创建一个路由器并暴露出去</span>

<span class="token comment">// 第一步：导入 createRouter 方法</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createRouter<span class="token punctuation">,</span> createWebHashHistory<span class="token punctuation">,</span> createWebHistory <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>

<span class="token comment">// 第二步：导入组件</span>
<span class="token keyword">import</span> Home <span class="token keyword">from</span> <span class="token string">'@/components/Home.vue'</span>
<span class="token keyword">import</span> About <span class="token keyword">from</span> <span class="token string">'@/components/About.vue'</span>
<span class="token keyword">import</span> News <span class="token keyword">from</span> <span class="token string">'@/components/News.vue'</span>

<span class="token comment">// 第二步：创建路由器</span>
<span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 路由器的工作模式</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// &#123; path: '路径', component: '组件' &#125;</span>
        <span class="token punctuation">&#123;</span> path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span> path<span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span> path<span class="token operator">:</span> <span class="token string">'/news'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> News <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>

<span class="token comment">// 第三步：导出路由器   </span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>然后在项目的<code>main.ts</code>中引入你配置的路由并使用</p>
</blockquote>
<p><strong>main.ts代码：</strong></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 引入createApp方法用于创建应用</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token comment">// 引入App根组件</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>

<span class="token comment">// 引入路由器</span>
<span class="token keyword">import</span> router <span class="token keyword">from</span> <span class="token string">'./router'</span>
<span class="token comment">// 创建一个App实例</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
<span class="token comment">// 挂载路由器</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
<span class="token comment">// 挂载到应用到app容器上</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>在<code>App</code>组件中设置样式和子组件的位置<code>RouterView组件</code>等，</p>
</blockquote>
<p><strong>App.vue</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;app&quot;&gt;&lt;&#x2F;div&gt;
    &lt;h2 class&#x3D;&quot;title&quot;&gt;Vue路由测试&lt;&#x2F;h2&gt;
    &lt;!-- 导航区 --&gt;
    &lt;div class&#x3D;&quot;navigate&quot;&gt;
        &lt;!-- active-class属性用于设置当前路由的链接高亮样式 --&gt;
        &lt;RouterLink to&#x3D;&quot;&#x2F;home&quot; active-class&#x3D;&quot;active&quot;&gt;首页&lt;&#x2F;RouterLink&gt;
        &lt;RouterLink to&#x3D;&quot;&#x2F;news&quot; active-class&#x3D;&quot;active&quot;&gt;新闻&lt;&#x2F;RouterLink&gt;
        &lt;RouterLink to&#x3D;&quot;&#x2F;about&quot; active-class&#x3D;&quot;active&quot;&gt;关于&lt;&#x2F;RouterLink&gt;
    &lt;&#x2F;div&gt;
    &lt;!-- 展示区 --&gt;
    &lt;div class&#x3D;&quot;main-content&quot;&gt;
        &lt;!-- 该组件将会渲染当前路由匹配到的组件 --&gt;
        &lt;RouterView&gt;&lt;&#x2F;RouterView&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script lang&#x3D;&quot;ts&quot; setup name&#x3D;&quot;App&quot;&gt;
import &#123; RouterView, RouterLink &#125; from &#39;vue-router&#39;;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.title &#123;
    width: 90%;
    height: 70px;
    line-height: 70px;
    margin: 0 auto;
    background: linear-gradient(to right, #4facfe, #00f2fe);
    text-align: center;
    border-radius: 10px;
    font-size: 40px;
&#125;

.navigate &#123;
    width: 90%;
    margin: 10px auto;
    display: flex;
    justify-content: space-around;
    align-items: center;
    height: 50px;
    border-radius: 10px;
&#125;

.navigate a &#123;
    color: aqua;
    background-color: #333;
    text-decoration: none;
    font-size: 20px;
    padding: 10px 30px;
    border-radius: 20px;
&#125;

.navigate a.active &#123;
    background-color: #4facfe;
    color: #fff;
&#125;

.main-content &#123;
    width: 90%;
    height: 500px;
    margin: 10px auto;
    padding: 5px;
    border: 2px solid #ccc;
    border-radius: 20px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>注意：<code>需要在App组件中引入RouterLink</code>，替代传统的<code>&lt;a&gt;标签</code>，把<code>href</code>属性改成to，<code>激活当前路由高亮是active-class</code></p>
</blockquote>
<h3 id="4-3-两个注意点"><a href="#4-3-两个注意点" class="headerlink" title="4.3 两个注意点"></a>4.3 两个注意点</h3><ol>
<li>路由组件通常存放在<code>pages</code>或<code>views</code>文件夹，一般组件通常存放在<code>components</code>文件夹。</li>
<li>通过点击导航，视觉效果上 “消失” 了的路由组件，默认是被卸载掉的，需要的时候再去挂载。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/ad9ad9107386db2ede97ecf23d4990c4.png" alt="img"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250117232438173.png"></p>
<h3 id="4-4-路由器工作模式"><a href="#4-4-路由器工作模式" class="headerlink" title="4.4 路由器工作模式"></a>4.4 路由器工作模式</h3><ol>
<li><code>history</code>模式</li>
</ol>
<blockquote>
<p>优点：<code>URL</code>更加美观，不带有<code>#</code>，更接近传统的网站<code>URL</code>。<br>缺点：后期项目上线，需要服务端（例如nginx）配合处理路径问题，否则<code>刷新</code>会有<code>404</code>错误。</p>
</blockquote>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  	history<span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//history模式</span>
    <span class="token comment">/********/</span>
 <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250204192116652.png" alt="image-20250204192116652"></p>
<ol start="2">
<li><code>hash</code>模式</li>
</ol>
<blockquote>
<p>优点：兼容性更好，因为不需要服务器端处理路径。<br>缺点：<code>URL</code>带有<code>#</code>不太美观，且在<code>SEO</code>优化方面相对较差。</p>
</blockquote>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  	history<span class="token operator">:</span><span class="token function">createWebHashHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//hash模式</span>
   	<span class="token comment">/********/</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-5-to的两种写法"><a href="#4-5-to的两种写法" class="headerlink" title="4.5 to的两种写法"></a>4.5 to的两种写法</h3><p><code>路由链接标签的to属性</code>既可以写成字符串模式，这样跳转到的是对应路由规则的组件，</p>
<p>也可以写成<code>对象形式</code>，不过这样要加<code>:to</code>表示按照Vue语法解析，对象内部可以选择按照<code>path</code>或者<code>name</code>等路由规则解析</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 第一种：to的字符串写法 <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link active<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"active"</span> to<span class="token operator">=</span><span class="token string">"/home"</span><span class="token operator">></span>主页<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span>
 
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 第二种：to的对象写法 <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link active<span class="token operator">-</span><span class="token keyword">class</span><span class="token operator">=</span><span class="token string">"active"</span> <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"&#123;path:'/home'&#125;"</span><span class="token operator">></span>Home<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-6-命名路由"><a href="#4-6-命名路由" class="headerlink" title="4.6 命名路由"></a>4.6 命名路由</h3><p>给路由规则命名: <code>可以简化路由跳转和传参</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">routes<span class="token operator">:</span><span class="token punctuation">[</span>
  <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span><span class="token string">'zhuye'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>Home
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span><span class="token string">'xinwen'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>News<span class="token punctuation">,</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token punctuation">&#123;</span>
    name<span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
    path<span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span>About
  <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>路由跳转可以有多种方式</p>
</blockquote>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>简化前：需要写完整的路径（to的字符串写法） <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link to<span class="token operator">=</span><span class="token string">"/about"</span><span class="token operator">></span>跳转<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span>
 
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"&#123;path:'/about'&#125;"</span><span class="token operator">></span>跳转<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span>
<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span>简化后：直接通过名字跳转（to的对象写法配合name属性） <span class="token operator">--</span><span class="token operator">></span>
<span class="token operator">&lt;</span>router<span class="token operator">-</span>link <span class="token operator">:</span>to<span class="token operator">=</span><span class="token string">"&#123;name:'guanyu'&#125;"</span><span class="token operator">></span>跳转<span class="token operator">&lt;</span><span class="token operator">/</span>router<span class="token operator">-</span>link<span class="token operator">></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-7【嵌套路由】"><a href="#4-7【嵌套路由】" class="headerlink" title="4.7【嵌套路由】"></a>4.7【嵌套路由】</h3><ol>
<li>编写<code>News</code>的子路由：<code>Detail.vue</code></li>
<li>配置路由规则，使用<code>children</code>配置项：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
  history<span class="token operator">:</span><span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	routes<span class="token operator">:</span><span class="token punctuation">[</span>
		<span class="token punctuation">&#123;</span>
			name<span class="token operator">:</span><span class="token string">'zhuye'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/home'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>Home
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#123;</span>
			name<span class="token operator">:</span><span class="token string">'xinwen'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/news'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>News<span class="token punctuation">,</span>
			children<span class="token operator">:</span><span class="token punctuation">[</span>
				<span class="token punctuation">&#123;</span>
					name<span class="token operator">:</span><span class="token string">'xiang'</span><span class="token punctuation">,</span>
					path<span class="token operator">:</span><span class="token string">'detail'</span><span class="token punctuation">,</span>
					component<span class="token operator">:</span>Detail
				<span class="token punctuation">&#125;</span>
			<span class="token punctuation">]</span>
		<span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
		<span class="token punctuation">&#123;</span>
			name<span class="token operator">:</span><span class="token string">'guanyu'</span><span class="token punctuation">,</span>
			path<span class="token operator">:</span><span class="token string">'/about'</span><span class="token punctuation">,</span>
			component<span class="token operator">:</span>About
		<span class="token punctuation">&#125;</span>
	<span class="token punctuation">]</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> router<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>跳转路由（记得要加完整路径）：</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;router-link to&#x3D;&quot;&#x2F;news&#x2F;detail&quot;&gt;xxxx&lt;&#x2F;router-link&gt;
&lt;!-- 或 --&gt;
&lt;router-link :to&#x3D;&quot;&#123;path:&#39;&#x2F;news&#x2F;detail&#39;&#125;&quot;&gt;xxxx&lt;&#x2F;router-link&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<ol start="4">
<li>记得去<code>Home</code>组件中预留一个<code>&lt;router-view&gt;</code></li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;news&quot;&gt;
    &lt;nav class&#x3D;&quot;news-list&quot;&gt;
      &lt;RouterLink v-for&#x3D;&quot;news in newsList&quot; :key&#x3D;&quot;news.id&quot; :to&#x3D;&quot;&#123;path:&#39;&#x2F;news&#x2F;detail&#39;&#125;&quot;&gt;
        &#123;&#123;news.name&#125;&#125;
      &lt;&#x2F;RouterLink&gt;
    &lt;&#x2F;nav&gt;
    &lt;div class&#x3D;&quot;news-detail&quot;&gt;
      &lt;RouterView&#x2F;&gt;
    &lt;&#x2F;div&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-8-Vue路由传参"><a href="#4-8-Vue路由传参" class="headerlink" title="4.8 Vue路由传参"></a>4.8 Vue路由传参</h3><p>在Vue中，传参有两种类型，分别是<code>query</code>和<code>params</code></p>
<h4 id="query传参"><a href="#query传参" class="headerlink" title="query传参"></a>query传参</h4><ol>
<li>传递参数</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 跳转并携带query参数（to的字符串写法） --&gt;
&lt;router-link to&#x3D;&quot;&#x2F;news&#x2F;detail?a&#x3D;1&amp;b&#x3D;2&amp;content&#x3D;欢迎你&quot;&gt;
	跳转
&lt;&#x2F;router-link&gt;
				
&lt;!-- 跳转并携带query参数（to的对象写法） --&gt;
&lt;RouterLink 
  :to&#x3D;&quot;&#123;
    &#x2F;&#x2F;name:&#39;xiang&#39;, &#x2F;&#x2F;用name也可以跳转
    path:&#39;&#x2F;news&#x2F;detail&#39;,
    query:&#123;
      id:news.id,
      title:news.title,
      content:news.content
    &#125;
  &#125;&quot;
&gt;
  &#123;&#123;news.title&#125;&#125;
&lt;&#x2F;RouterLink&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li>接收参数：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>useRoute<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 打印query参数</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="params传参"><a href="#params传参" class="headerlink" title="params传参"></a>params传参</h4><p>params参数就是<code>http://localhost:5173/news/detail/参数1/参数2</code></p>
<p>可以直接写&#x2F;，但是必须在<code>index.ts</code>规则中占好位，在最后加上？就是配置参数的必要性。可传参可不传<br>传参时路径不能用path了，只能用name</p>
<ol>
<li>传递参数</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 跳转并携带params参数（to的字符串写法） --&gt;
&lt;RouterLink :to&#x3D;&quot;&#96;&#x2F;news&#x2F;detail&#x2F;001&#x2F;新闻001&#x2F;内容001&#96;&quot;&gt;&#123;&#123;news.title&#125;&#125;&lt;&#x2F;RouterLink&gt;
				
&lt;!-- 跳转并携带params参数（to的对象写法） --&gt;
&lt;RouterLink 
  :to&#x3D;&quot;&#123;
    name:&#39;xiang&#39;, &#x2F;&#x2F;用name跳转
    params:&#123;
      id:news.id,
      title:news.title,
      content:news.title
    &#125;
  &#125;&quot;
&gt;
  &#123;&#123;news.title&#125;&#125;
&lt;&#x2F;RouterLink&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="2">
<li>配置路由<code>占位</code></li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token function">createRouter</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>
    history<span class="token operator">:</span> <span class="token function">createWebHistory</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// 路由器的工作模式</span>
    <span class="token comment">// history: createWebHashHistory(),</span>
    routes<span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token comment">// &#123; path: '路径', component: '组件' &#125;</span>
        <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'zhuye'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'guanyu'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>
            name<span class="token operator">:</span> <span class="token string">'xinwen'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/news'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> News<span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
                path<span class="token operator">:</span> <span class="token string">'detail/:id/:title/:content?'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Detail
                <span class="token comment">// ? 配置路由参数的必要性</span>
            <span class="token punctuation">&#125;</span><span class="token punctuation">]</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>接收参数</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>useRoute<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue-router'</span>
<span class="token keyword">const</span> route <span class="token operator">=</span> <span class="token function">useRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 打印params参数</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>route<span class="token punctuation">.</span>params<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>传递<code>params</code>参数时，若使用<code>to</code>的对象写法，必须使用<code>name</code>配置项，不能用<code>path</code>。</li>
<li>传递<code>params</code>参数时，需要提前在规则中占位。 </li>
<li>使用<code>params</code>参数时，传递的<code>params</code>参数对象中不能有数组</li>
</ul>
<h3 id="4-9【路由的props配置】"><a href="#4-9【路由的props配置】" class="headerlink" title="4.9【路由的props配置】"></a>4.9【路由的props配置】</h3><p>作用：让路由组件更方便的收到参数（可以将路由参数作为<code>props</code>传给组件）</p>
<p><code>index.ts</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">routes<span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// &#123; path: '路径', component: '组件' &#125;</span>
    <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'zhuye'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> Home <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span> name<span class="token operator">:</span> <span class="token string">'guanyu'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/about'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> About <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>
        name<span class="token operator">:</span> <span class="token string">'xinwen'</span><span class="token punctuation">,</span> path<span class="token operator">:</span> <span class="token string">'/news'</span><span class="token punctuation">,</span> component<span class="token operator">:</span> News<span class="token punctuation">,</span> children<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">&#123;</span>
            name<span class="token operator">:</span> <span class="token string">'xiangqing'</span><span class="token punctuation">,</span>
            path<span class="token operator">:</span> <span class="token string">'detail/:id/:title/:content'</span><span class="token punctuation">,</span>
            component<span class="token operator">:</span> Detail<span class="token punctuation">,</span>

            <span class="token comment">// props的对象写法，作用：把对象中的每一组key-value作为props传给Detail组件</span>
            <span class="token comment">// props:&#123;a:1,b:2,c:3&#125;, </span>

            <span class="token comment">// props的布尔值写法，作用：把收到了每一组params参数，作为props传给Detail组件</span>
            props<span class="token operator">:</span><span class="token boolean">true</span>

            <span class="token comment">// props的函数写法，作用：把返回的对象中每一组key-value作为props传给Detail组件</span>
            <span class="token comment">//props(route)&#123;</span>
            <span class="token comment">//    return route.query</span>
            <span class="token comment">//&#125;</span>
        <span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-10【replace属性】"><a href="#4-10【replace属性】" class="headerlink" title="4.10【replace属性】"></a>4.10【replace属性】</h3><ol>
<li><p>作用：控制路由跳转时操作浏览器历史记录的模式。（在历史记录中返回不去）</p>
</li>
<li><p>浏览器的历史记录有两种写入方式：分别为<code>push</code>和<code>replace</code>：</p>
<ul>
<li><code>push</code>是追加历史记录（默认值）。</li>
<li><code>replace</code>是替换当前记录。这样无法前进后退</li>
</ul>
</li>
<li><p>开启<code>replace</code>模式：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;RouterLink replace to&#x3D;&quot;&#x2F;news&quot;&gt;News&lt;&#x2F;RouterLink&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ol>
<h3 id="4-11-编程式导航"><a href="#4-11-编程式导航" class="headerlink" title="4.11 编程式导航"></a>4.11 编程式导航</h3><p><code>编程式导航</code>就是不通过<code>RouterLink</code>来实现路由的跳转。这样可以完成一些自动的任务，例如主页停留三秒钟后自动跳转新闻页面,或者只有输入正确的用户名和密码才能跳转（需要有逻辑判断）</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;home&quot;&gt;
        &lt;img src&#x3D;&quot;http:&#x2F;&#x2F;www.atguigu.com&#x2F;images&#x2F;logo.png&quot; alt&#x3D;&quot;&quot;&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Home&quot;&gt;
import &#123; onMounted &#125; from &#39;vue&#39;;
import &#123; useRouter &#125; from &#39;vue-router&#39;;

const router &#x3D; useRouter();

onMounted(() &#x3D;&gt; &#123;
    setTimeout(() &#x3D;&gt; &#123;
        &#x2F;&#x2F; 路由跳转新闻页面
        router.push(&#39;&#x2F;news&#39;);
    &#125;, 3000)
&#125;)
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.home &#123;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100%;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>编程式路由跳转同样可以带参数的跳转</p>
<ul>
<li><code>push()</code> 带历史记录的跳转</li>
<li><code>replace()</code> 是替换当前记录</li>
</ul>
</blockquote>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;news-container&quot;&gt;
        &lt;!-- 新闻列表 --&gt;
        &lt;div class&#x3D;&quot;news-list&quot;&gt;
            &lt;h2&gt;欢迎来到新闻页面&lt;&#x2F;h2&gt;
            &lt;ul&gt;
                &lt;li v-for&#x3D;&quot;item in newsList&quot; :key&#x3D;&quot;item.id&quot;&gt;
                    &lt;button @click&#x3D;&quot;showNewsDetail(item)&quot;&gt;查看新闻&lt;&#x2F;button&gt;
                    &lt;!-- 第二种写法 --&gt;
                    &lt;RouterLink :to&#x3D;&quot;&#123;
                        path: &#96;&#x2F;news&#x2F;detail&#96;,
                        query: &#123;
                            id: item.id,
                            title: item.title,
                            content: item.content
                        &#125;
                    &#125;&quot;&gt;&#123;&#123; item.title &#125;&#125;&lt;&#x2F;RouterLink&gt;
                &lt;&#x2F;li&gt;
            &lt;&#x2F;ul&gt;
        &lt;&#x2F;div&gt;

        &lt;!-- 新闻详情 --&gt;
        &lt;div class&#x3D;&quot;news-content&quot;&gt;
            &lt;RouterView&gt;&lt;&#x2F;RouterView&gt;
        &lt;&#x2F;div&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;News&quot;&gt;
import &#123; reactive &#125; from &quot;vue&quot;;
import &#123; RouterLink, RouterView, useRouter &#125; from &quot;vue-router&quot;;

const newsList &#x3D; reactive([
    &#123; id: &quot;1&quot;, title: &quot;新闻1&quot;, content: &quot;内容1&quot; &#125;,
    &#123; id: &quot;2&quot;, title: &quot;新闻2&quot;, content: &quot;内容2&quot; &#125;,
    &#123; id: &quot;3&quot;, title: &quot;新闻3&quot;, content: &quot;内容3&quot; &#125;,
    &#123; id: &quot;4&quot;, title: &quot;新闻4&quot;, content: &quot;内容4&quot; &#125;,
]);

const router &#x3D; useRouter();


interface NewsItem &#123;
    id: string,
    title: string,
    content: string
&#125;
function showNewsDetail(item: NewsItem) &#123;
    &#x2F;&#x2F; to怎么写，push的参数就可以怎么写
    router.push(&#123;
        path: &#96;&#x2F;news&#x2F;detail&#96;,
        query: &#123;
            id: item.id,
            title: item.title,
            content: item.content
        &#125;
    &#125;)
&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="4-12-路由重定向"><a href="#4-12-路由重定向" class="headerlink" title="4.12 路由重定向"></a>4.12 路由重定向</h3><p><code>作用：将特定的路径，重新定向到已有路由</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token punctuation">&#123;</span>
    path<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span> redirect<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        path<span class="token operator">:</span> <span class="token string">"/home"</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span>
<span class="token comment">// 同样支持多种写法</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="5-pinia"><a href="#5-pinia" class="headerlink" title="5. pinia"></a>5. pinia</h2><p><code>vue2中用的是vuex，vue3用的是pinia。就是集中式状态(数据)管理</code></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250208232603423.png" alt="image-20250208232603423"></p>
<h3 id="5-1-准备一个效果"><a href="#5-1-准备一个效果" class="headerlink" title="5.1 准备一个效果"></a>5.1 准备一个效果</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/320baeff92f023c23da64dbf73bb1dad.png" alt="img"></p>
<h3 id="5-2-搭建pinia环境"><a href="#5-2-搭建pinia环境" class="headerlink" title="5.2 搭建pinia环境"></a>5.2 搭建pinia环境</h3><ul>
<li>第一步：<code>npm i pinia</code></li>
<li>第二步：操作<code>src/main.ts</code></li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createApp <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
<span class="token keyword">import</span> App <span class="token keyword">from</span> <span class="token string">'./App.vue'</span>
 
<span class="token comment">/* 引入createPinia，用于创建pinia */</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> createPinia <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
 
<span class="token comment">/* 创建pinia */</span>
<span class="token keyword">const</span> pinia <span class="token operator">=</span> <span class="token function">createPinia</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">createApp</span><span class="token punctuation">(</span>App<span class="token punctuation">)</span>
 
<span class="token comment">/* 使用插件 */</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">mount</span><span class="token punctuation">(</span><span class="token string">'#app'</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>此时开发者工具vue.devtools中已经有了<code>pinia</code>选项</p>
<h3 id="5-3【存储-读取数据】"><a href="#5-3【存储-读取数据】" class="headerlink" title="5.3【存储+读取数据】"></a>5.3【存储+读取数据】</h3><ol>
<li><p><code>Store</code>是一个保存：状态、业务逻辑 的实体，每个组件都可以读取、写入它。</p>
</li>
<li><p>它有三个概念：<code>state</code>、<code>getter</code>、<code>action</code>，相当于组件中的： <code>data</code>、 <code>computed</code> 和 <code>methods</code>。</p>
</li>
<li><p>具体代码：<code>src/store/count.ts</code></p>
</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>defineStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 定义并暴露一个store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 动作</span>
  actions<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 状态</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>sum<span class="token operator">:</span><span class="token number">6</span><span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  getters<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="4">
<li>具体代码：<code>src/store/talk.ts</code></li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>defineStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token comment">// 定义并暴露一个store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useTalkStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 动作</span>
  actions<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 状态</span>
  <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      talkList<span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'yuysada01'</span><span class="token punctuation">,</span>content<span class="token operator">:</span><span class="token string">'你今天有点怪，哪里怪？怪好看的！'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
     	 <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'yuysada02'</span><span class="token punctuation">,</span>content<span class="token operator">:</span><span class="token string">'草莓、蓝莓、蔓越莓，你想我了没？'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
        <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'yuysada03'</span><span class="token punctuation">,</span>content<span class="token operator">:</span><span class="token string">'心里给你留了一块地，我的死心塌地'</span><span class="token punctuation">&#125;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
  <span class="token comment">// 计算</span>
  getters<span class="token operator">:</span><span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="5">
<li>组件中使用<code>state</code>中的数据</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;h2&gt;当前求和为：&#123;&#123; sumStore.sum &#125;&#125;&lt;&#x2F;h2&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Count&quot;&gt;
  &#x2F;&#x2F; 引入对应的useXxxxxStore	
  import &#123;useSumStore&#125; from &#39;@&#x2F;store&#x2F;sum&#39;
  
  &#x2F;&#x2F; 调用useXxxxxStore得到对应的store
  const sumStore &#x3D; useSumStore()
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;ul&gt;
    &lt;li v-for&#x3D;&quot;talk in talkStore.talkList&quot; :key&#x3D;&quot;talk.id&quot;&gt;
      &#123;&#123; talk.content &#125;&#125;
    &lt;&#x2F;li&gt;
  &lt;&#x2F;ul&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Count&quot;&gt;
  import axios from &#39;axios&#39;
  import &#123;useTalkStore&#125; from &#39;@&#x2F;store&#x2F;talk&#39;

  const talkStore &#x3D; useTalkStore()
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-4【改变数据的方式】-三种方式"><a href="#5-4【改变数据的方式】-三种方式" class="headerlink" title="5.4【改变数据的方式】(三种方式)"></a>5.4【改变数据的方式】(三种方式)</h3><ol>
<li>直接修改</li>
<li>通过<code>$patch</code>批量更新</li>
<li>在<code>store</code>中添加<code>actions</code>配置项，里面配置函数来修改</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 第一种修改方式</span>
<span class="token comment">// countStore.sum += n.value;</span>

<span class="token comment">// 第二种修改方式（批量更新）</span>
<span class="token comment">// countStore.$patch(&#123;</span>
<span class="token comment">//     sum: countStore.sum + n.value</span>
<span class="token comment">// &#125;)</span>

<span class="token comment">// 第三种修改方式（actions）便于复用</span>
countStore<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span>n<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>store/count.ts</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> defineStore <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span> <span class="token punctuation">&#123;</span>
    <span class="token comment">// actions里面是一个个的方法，用于响应组件的动作</span>
    actions<span class="token operator">:</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// this指向当前的store实例</span>
        <span class="token function">increment</span><span class="token punctuation">(</span>num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>sum <span class="token operator">+=</span> num
        <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token comment">// 真正存储数据的地方</span>
    <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token keyword">return</span> <span class="token punctuation">&#123;</span> sum<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-5【storeToRefs】"><a href="#5-5【storeToRefs】" class="headerlink" title="5.5【storeToRefs】"></a>5.5【storeToRefs】</h3><ul>
<li>借助<code>storeToRefs</code>将<code>store</code>中的数据转为<code>ref</code>对象，方便在模板中使用。</li>
<li>注意：<code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而不关注’store’里的方法。而<code>Vue</code>的<code>toRefs</code>会转换<code>store</code>中的所有数据包括方法。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/55f933c186aa06546bab5b8dfadfa78a.png" alt="img"></p>
<p>直接解构赋值的话会丢失响应式。 </p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/468a49238d583892d0095b7253d88e0f.png" alt="img"></p>
<p>用<code>toRefs</code>包裹的话，会把’store’中所有的属性和方法都转化为ref</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/2e30d0b474c348c61c8708ea836ac887.png" alt="img"></p>
<p><code>pinia</code>提供的<code>storeToRefs</code>只会将数据做转换，而不关注’store’里的方法</p>
<p>示例代码：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;count&quot;&gt;
        &lt;h1&gt;当前求和为：&#123;&#123; sum &#125;&#125;&lt;&#x2F;h1&gt;
        &lt;select v-model.number&#x3D;&quot;n&quot; name&#x3D;&quot;select&quot;&gt;
            &lt;option value&#x3D;&quot;1&quot;&gt;1&lt;&#x2F;option&gt;
            &lt;option value&#x3D;&quot;2&quot;&gt;2&lt;&#x2F;option&gt;
            &lt;option value&#x3D;&quot;3&quot;&gt;3&lt;&#x2F;option&gt;
        &lt;&#x2F;select&gt;
        &lt;button @click&#x3D;&quot;add&quot;&gt;加&lt;&#x2F;button&gt;
        &lt;button @click&#x3D;&quot;sub&quot;&gt;减&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Count&quot;&gt;
import &#123; ref, toRefs &#125; from &#39;vue&#39;;
import &#123; useCountStore &#125; from &#39;@&#x2F;store&#x2F;count&#39;;
import &#123; storeToRefs &#125; from &#39;pinia&#39;;

const countStore &#x3D; useCountStore()
&#x2F;&#x2F; toRefs会将countStore里面的所有属性转成响应式的对象，过于臃肿
&#x2F;&#x2F; let &#123; sum &#125; &#x3D; toRefs(countStore); &#x2F;&#x2F; 解构赋值

&#x2F;&#x2F; 推荐使用 storetoRefs 代替 toRefs
let &#123; sum &#125; &#x3D; storeToRefs(countStore);

let n &#x3D; ref(1);

function add() &#123;
    &#x2F;&#x2F; 第一种修改方式
    &#x2F;&#x2F; countStore.sum +&#x3D; n.value;

    &#x2F;&#x2F; 第二种修改方式（批量更新）
    &#x2F;&#x2F; countStore.$patch(&#123;
    &#x2F;&#x2F;     sum: countStore.sum + n.value
    &#x2F;&#x2F; &#125;)

    &#x2F;&#x2F; 第三种修改方式（actions）便于复用
    countStore.increment(n.value);
&#125;

function sub() &#123;
    countStore.sum -&#x3D; n.value;
&#125;
&lt;&#x2F;script&gt;

&lt;style scoped&gt;
.count &#123;
    background: pink;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 0 10px;
&#125;

select,
button &#123;
    margin-right: 10px;
&#125;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-6【getters】"><a href="#5-6【getters】" class="headerlink" title="5.6【getters】"></a>5.6【getters】</h3><ol>
<li>概念：当<code>state</code>中的数据，需要经过处理后再使用时，可以使用<code>getters</code>配置。</li>
<li>追加<code>getters</code>配置。</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 引入defineStore用于创建store</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>defineStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
 
<span class="token comment">// 定义并暴露一个store</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useCountStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">,</span><span class="token punctuation">&#123;</span>
 <span class="token comment">// 动作</span>
 actions<span class="token operator">:</span><span class="token punctuation">&#123;</span>
   <span class="token comment">//</span>
 <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
 <span class="token comment">// 状态</span>
 <span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
   <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
     sum<span class="token operator">:</span><span class="token number">1</span><span class="token punctuation">,</span>
     school<span class="token operator">:</span><span class="token string">'atguigu'</span>
   <span class="token punctuation">&#125;</span>
 <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
 <span class="token comment">// 计算</span>
 getters<span class="token operator">:</span><span class="token punctuation">&#123;</span>
   bigSum<span class="token operator">:</span><span class="token punctuation">(</span>state<span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">number</span> <span class="token operator">=></span> state<span class="token punctuation">.</span>sum <span class="token operator">*</span><span class="token number">10</span><span class="token punctuation">,</span>
   bigSum<span class="token operator">:</span>
   <span class="token function">upperSchool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">&#123;</span>
     <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span> school<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
   <span class="token punctuation">&#125;</span>
 <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250209212136912.png" alt="image-20250209212136912"></p>
<h3 id="5-7【-subscribe】"><a href="#5-7【-subscribe】" class="headerlink" title="5.7【$subscribe】"></a>5.7【$subscribe】</h3><p>通过 store 的 <code>$subscribe()</code> 方法侦听 <code>state</code> 及其变化</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">talkStore<span class="token punctuation">.</span><span class="token function">$subscribe</span><span class="token punctuation">(</span><span class="token punctuation">(</span>mutate<span class="token punctuation">,</span>state<span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'LoveTalk'</span><span class="token punctuation">,</span>mutate<span class="token punctuation">,</span>state<span class="token punctuation">)</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>talkList<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-8【store组合式写法】"><a href="#5-8【store组合式写法】" class="headerlink" title="5.8【store组合式写法】"></a>5.8【store组合式写法】</h3><pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span>defineStore<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'pinia'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>nanoid<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'nanoid'</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span>reactive<span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">'vue'</span>
 
<span class="token comment">// 组合式  函数变量直接写，记得return</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> useTalkStore <span class="token operator">=</span> <span class="token function">defineStore</span><span class="token punctuation">(</span><span class="token string">'talk'</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
  <span class="token comment">// talkList就是state</span>
  <span class="token keyword">const</span> talkList <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>
    <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">'talkList'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token punctuation">)</span>
 
  <span class="token comment">// getATalk函数相当于action</span>
  <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">getATalk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
    <span class="token comment">// 发请求，下面这行的写法是：连续解构赋值+重命名</span>
    <span class="token keyword">let</span> <span class="token punctuation">&#123;</span>data<span class="token operator">:</span><span class="token punctuation">&#123;</span>content<span class="token operator">:</span>title<span class="token punctuation">&#125;</span><span class="token punctuation">&#125;</span> <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'https://api.uomg.com/api/rand.qinghua?format=json'</span><span class="token punctuation">)</span>
    <span class="token comment">// 把请求回来的字符串，包装成一个对象</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token function">nanoid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>title<span class="token punctuation">&#125;</span>
    <span class="token comment">// 放到数组中</span>
    talkList<span class="token punctuation">.</span><span class="token function">unshift</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
  <span class="token punctuation">&#125;</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>talkList<span class="token punctuation">,</span>getATalk<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="6-组件通信"><a href="#6-组件通信" class="headerlink" title="6. 组件通信"></a>6. 组件通信</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250214194130231.png" alt="image-20250214194130231"></p>
<p><code>Vue3</code>组件通信和<code>Vue2</code>的区别：</p>
<ul>
<li>移除事件总线，使用<code>mitt</code>代替。</li>
</ul>
<ul>
<li><code>vuex</code>换成了<code>pinia</code>。</li>
<li>把<code>.sync</code>优化到了<code>v-model</code>里面了。</li>
<li>把<code>$listeners</code>所有的东西，合并到<code>$attrs</code>中了。</li>
<li><code>$children</code>被砍掉了</li>
</ul>
<h3 id="6-1【props】"><a href="#6-1【props】" class="headerlink" title="6.1【props】"></a>6.1【props】</h3><p>概述：<code>props</code>是使用频率最高的一种通信方式，常用与：父 &lt;-&gt; 子。</p>
<p>需要传递数据时：</p>
<p>- 若 父传子：属性值是非函数。（直接写在子组件标签属性中）<br>- 若 子传父：属性值是函数。（需要父组件先定义函数，子组件调用传递）</p>
<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;father&quot;&gt;
    &lt;h3&gt;父组件，&lt;&#x2F;h3&gt;
		&lt;h4&gt;我的车：&#123;&#123; car &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;儿子给的玩具：&#123;&#123; toy &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;Child :car&#x3D;&quot;car&quot; :getToy&#x3D;&quot;getToy&quot;&#x2F;&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Father&quot;&gt;
	import Child from &#39;.&#x2F;Child.vue&#39;
	import &#123; ref &#125; from &quot;vue&quot;;
	&#x2F;&#x2F; 数据
	const car &#x3D; ref(&#39;奔驰&#39;)
	const toy &#x3D; ref()
	&#x2F;&#x2F; 方法
	function getToy(value:string)&#123;
		toy.value &#x3D; value
	&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;child&quot;&gt;
    &lt;h3&gt;子组件&lt;&#x2F;h3&gt;
		&lt;h4&gt;我的玩具：&#123;&#123; toy &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;父给我的车：&#123;&#123; car &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;button @click&#x3D;&quot;getToy(toy)&quot;&gt;玩具给父亲&lt;&#x2F;button&gt; &#x2F;&#x2F; 可以直接使用
      	&lt;button @click&#x3D;&quot;sendToy(toy)&quot;&gt;玩具给父亲&lt;&#x2F;button&gt; &#x2F;&#x2F; 可以直接使用
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Child&quot;&gt;
	import &#123; ref &#125; from &quot;vue&quot;;
	const toy &#x3D; ref(&#39;奥特曼&#39;)
	
	let props &#x3D; defineProps([&#39;car&#39;,&#39;getToy&#39;])
    let sendToy &#x3D; props.getToy
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-2【自定义事件】"><a href="#6-2【自定义事件】" class="headerlink" title="6.2【自定义事件】"></a>6.2【自定义事件】</h3><ol>
<li>概述：自定义事件常用于：子 &#x3D;&gt; 父。</li>
<li>注意区分好：原生事件、自定义事件。</li>
</ol>
<ul>
<li>原生事件：<ul>
<li>事件名是特定的（<code>click</code>、<code>mosueenter</code>等等）    </li>
<li>事件对象<code>$event</code>: 是包含事件相关信息的对象（<code>pageX</code>、<code>pageY</code>、<code>target</code>、<code>keyCode</code>）</li>
</ul>
</li>
<li>自定义事件：<ul>
<li>事件名是任意名称</li>
<li><strong style="color:red">事件对象<code>$event</code>: 是调用<code>emit</code>时所提供的数据，可以是任意类型！！！</strong></li>
</ul>
</li>
</ul>
<ol start="3">
<li>示例：</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!--在父组件中，给子组件绑定自定义事件：--&gt;
&lt;Child @send-toy&#x3D;&quot;toy &#x3D; $event&quot;&#x2F;&gt;
 
&lt;!--注意区分原生事件与自定义事件中的$event--&gt;
&lt;button @click&#x3D;&quot;toy &#x3D; $event&quot;&gt;测试&lt;&#x2F;button&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">//子组件中，触发事件：</span>
<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">,</span> 具体数据<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><strong style="color : red">原生事件 </strong><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250210201321508.png" alt="image-20250210201321508"></p>
<p><strong style="color : yellow">自定义事件 </strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250210203132825.png" alt="image-20250210203132825"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250212112906895.png" alt="image-20250212112906895"></p>
<h3 id="6-3【mitt】"><a href="#6-3【mitt】" class="headerlink" title="6.3【mitt】"></a>6.3【mitt】</h3><p>概述：与消息订阅与发布（<code>pubsub</code>）功能类似，可以实现任意组件间通信。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/c12e728ebdc326cf38f6d262a79343be.png" alt="img"></p>
<ol>
<li>安装<code>mitt</code></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">npm</span> i mitt<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ol start="2">
<li>新建文件 <code>src/utils/emitter.ts</code></li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 引入mitt </span>
<span class="token keyword">import</span> mitt <span class="token keyword">from</span> <span class="token string">"mitt"</span><span class="token punctuation">;</span>
 
<span class="token comment">// 创建emitter</span>
<span class="token keyword">const</span> emitter <span class="token operator">=</span> <span class="token function">mitt</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 
<span class="token comment">/*
  // 绑定事件
  emitter.on('abc',(value)=>&#123;
    console.log('abc事件被触发',value)
  &#125;)
  emitter.on('xyz',(value)=>&#123;
    console.log('xyz事件被触发',value)
  &#125;)
 
  setInterval(() => &#123;
    // 触发事件
    emitter.emit('abc',666)
    emitter.emit('xyz',777)
  &#125;, 1000);
 
  setTimeout(() => &#123;
    // 清理事件
    emitter.all.clear()
  &#125;, 3000); 
*/</span>
 
<span class="token comment">// 创建并暴露mitt</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> emitter<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>接收数据的组件中：绑定事件、同时在销毁前解绑事件：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> emitter <span class="token keyword">from</span> <span class="token string">"@/utils/emitter"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">&#123;</span> onUnmounted <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
 
<span class="token comment">// 绑定事件</span>
emitter<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">,</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'send-toy事件被触发'</span><span class="token punctuation">,</span>value<span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
 
<span class="token function">onUnmounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 解绑事件</span>
  emitter<span class="token punctuation">.</span><span class="token function">off</span><span class="token punctuation">(</span><span class="token string">'send-toy'</span><span class="token punctuation">)</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-4【v-model】"><a href="#6-4【v-model】" class="headerlink" title="6.4【v-model】"></a>6.4<code>【v-model】</code></h3><ol>
<li>概述：实现 父 &lt;&#x3D;&gt; 子 之间相互通信。</li>
<li>前序知识 —— <code>v-model</code>的本质</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 使用v-model指令 --&gt;
&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;userName&quot;&gt;
 
&lt;!-- v-model的本质是下面这行代码 --&gt;
&lt;input 
 type&#x3D;&quot;text&quot; 
 :value&#x3D;&quot;userName&quot; 
 @input&#x3D;&quot;userName &#x3D;(&lt;HTMLInputElement&gt;$event.target).value&quot; 断言$event.target为一个input元素，通过ts语法检查
&gt;
绑定输入事件，实现双向绑定<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="3">
<li>组件标签上的<code>v-model</code>的本质：<code>:moldeValue</code> ＋ <code>update:modelValue</code>事件。</li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 组件标签上使用v-model指令 --&gt;
&lt;AtguiguInput v-model&#x3D;&quot;userName&quot;&#x2F;&gt;
 
&lt;!-- 组件标签上v-model的本质 --&gt;
&lt;AtguiguInput :modelValue&#x3D;&quot;userName&quot; @update:modelValue&#x3D;&quot;userName &#x3D; $event&quot;&#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250212110712961.png" alt="image-20250212110712961"></p>
<p><code>AtguiguInput</code>组件中：需要处理事件和传递的数据</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class&#x3D;&quot;box&quot;&gt;
   &lt;!--将接收的value值赋给input元素的value属性，目的是：为了呈现数据 --&gt;
		&lt;!--给input元素绑定原生input事件，触发input事件时，进而触发update:model-value事件--&gt;
   &lt;input 
      type&#x3D;&quot;text&quot; 
      :value&#x3D;&quot;modelValue&quot; 
      @input&#x3D;&quot;emit(&#39;update:modelValue&#39;,$event.target.value)&quot;
   &gt;
 &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;AtguiguInput&quot;&gt;
 &#x2F;&#x2F; 接收props
 defineProps([&#39;modelValue&#39;])
 &#x2F;&#x2F; 声明事件
 const emit &#x3D; defineEmits([&#39;update:modelValue&#39;])
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="4">
<li>也可以更换<code>modelValue</code>属性名，例如改成<code>abc</code>，这样传递过去的变量和函数名就都改为<code>abc</code>，<code>update:abc</code></li>
</ol>
<p>	</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;!-- 也可以更换value，例如改成abc--&gt;
&lt;AtguiguInput v-model:abc&#x3D;&quot;userName&quot;&#x2F;&gt;
 
&lt;!-- 上面代码的本质如下 --&gt;
&lt;AtguiguInput :abc&#x3D;&quot;userName&quot; @update:abc&#x3D;&quot;userName &#x3D; $event&quot;&#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>AtguiguInput</code>组件中：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class&#x3D;&quot;box&quot;&gt;
   &lt;input 
      type&#x3D;&quot;text&quot; 
      :value&#x3D;&quot;abc&quot; 
      @input&#x3D;&quot;emit(&#39;update:abc&#39;,$event.target.value)&quot;
   &gt;
 &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;AtguiguInput&quot;&gt;
 &#x2F;&#x2F; 接收props
 defineProps([&#39;abc&#39;])
 &#x2F;&#x2F; 声明事件
 const emit &#x3D; defineEmits([&#39;update:abc&#39;])
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol start="5">
<li>如果<code>value</code>可以更换，那么就可以在组件标签上多次使用<code>v-model</code></li>
</ol>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;AtguiguInput v-model:abc&#x3D;&quot;userName&quot; v-model:xyz&#x3D;&quot;password&quot;&#x2F;&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/8b320b98417ccd7370d5ed1f1798b36d.png" alt="img"></p>
<h3 id="6-5【-attrs】"><a href="#6-5【-attrs】" class="headerlink" title="6.5【$attrs】"></a>6.5【$attrs】</h3><ol>
<li><p>概述：<code>$attrs</code>用于实现当前组件的父组件（相当于一个中间人），向当前组件的子组件通信（祖-&gt;孙）。</p>
</li>
<li><p>具体说明：<code>$attrs</code>是一个对象，包含所有父组件传入的标签属性。</p>
<blockquote>
<p>注意：<code>$attrs</code>会自动排除<code>props</code>中声明的属性(可以认为声明过的 <code>props</code> 被子组件自己“消费”了)</p>
</blockquote>
</li>
</ol>
<p>父组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;father&quot;&gt;
    &lt;h3&gt;父组件&lt;&#x2F;h3&gt;
      	&#x2F;&#x2F; v-bind用于传递（绑定）数据，处于某个组件上的时候，将数据传递给该子组件（保留响应式）
		&lt;Child :a&#x3D;&quot;a&quot; :b&#x3D;&quot;b&quot; :c&#x3D;&quot;c&quot; :d&#x3D;&quot;d&quot; v-bind&#x3D;&quot;&#123;x:100,y:200&#125;&quot; :updateA&#x3D;&quot;updateA&quot;&#x2F;&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Father&quot;&gt;
	import Child from &#39;.&#x2F;Child.vue&#39;
	import &#123; ref &#125; from &quot;vue&quot;;
	let a &#x3D; ref(1)
	let b &#x3D; ref(2)
	let c &#x3D; ref(3)
	let d &#x3D; ref(4)
 
	function updateA(value)&#123;
		a.value &#x3D; value
	&#125;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>子组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;child&quot;&gt;
		&lt;h3&gt;子组件&lt;&#x2F;h3&gt;
		&lt;GrandChild v-bind&#x3D;&quot;$attrs&quot;&#x2F;&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Child&quot;&gt;
	import GrandChild from &#39;.&#x2F;GrandChild.vue&#39;
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>孙组件：</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;grand-child&quot;&gt;
		&lt;h3&gt;孙组件&lt;&#x2F;h3&gt;
		&lt;h4&gt;a：&#123;&#123; a &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;b：&#123;&#123; b &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;c：&#123;&#123; c &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;d：&#123;&#123; d &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;x：&#123;&#123; x &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;h4&gt;y：&#123;&#123; y &#125;&#125;&lt;&#x2F;h4&gt;
		&lt;button @click&#x3D;&quot;updateA(666)&quot;&gt;点我更新A&lt;&#x2F;button&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;GrandChild&quot;&gt;
	defineProps([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;,&#39;x&#39;,&#39;y&#39;,&#39;updateA&#39;])
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-6-【-refs-、-parent】"><a href="#6-6-【-refs-、-parent】" class="headerlink" title="6.6. 【 $refs 、$parent】"></a>6.6. 【 <code>$refs</code> 、<code>$parent</code>】</h3><blockquote>
<p>在讲标签的<code>ref</code>属性的时候，我们已经可以在父组件中通过<code>ref</code>属性获取到子组件实例（<code>子组件中将要修改的变量暴露</code>）来实现组件间的通信</p>
</blockquote>
<ol>
<li><p>概述：</p>
<ul>
<li><code>$refs</code>用于 ：父 -&gt; 子。</li>
<li><code>$parent</code>用于：子 -&gt; 父。</li>
</ul>
</li>
<li><p>原理如下：</p>
</li>
</ol>
<table>
<thead>
<tr>
<th>属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$refs</code></td>
<td>值为对象，包含所有被<code>ref</code>属性标识的<code>DOM</code>元素或组件实例。</td>
</tr>
<tr>
<td><code>$parent</code></td>
<td>值为对象，当前组件的父组件实例对象。</td>
</tr>
</tbody></table>
<h3 id="6-7【provide、reject】"><a href="#6-7【provide、reject】" class="headerlink" title="6.7【provide、reject】"></a>6.7【provide、reject】</h3><ol>
<li>概述：实现祖孙组件直接通信</li>
<li>具体使用：</li>
</ol>
<ul>
<li>在祖先组件中通过<code>provide</code>配置向后代组件提供数据</li>
<li>在后代组件中通过<code>inject</code>配置来声明接收数据</li>
</ul>
<ol start="3">
<li>具体编码：</li>
</ol>
<p>【<strong>第一步</strong>】父组件中，使用<code>provide</code>提供数据</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class&#x3D;&quot;father&quot;&gt;
   &lt;h3&gt;父组件&lt;&#x2F;h3&gt;
   &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;&#x2F;h4&gt;
   &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;&#x2F;h4&gt;
   &lt;button @click&#x3D;&quot;money +&#x3D; 1&quot;&gt;资产+1&lt;&#x2F;button&gt;
   &lt;button @click&#x3D;&quot;car.price +&#x3D; 1&quot;&gt;汽车价格+1&lt;&#x2F;button&gt;
   &lt;Child&#x2F;&gt;
 &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Father&quot;&gt;
 import Child from &#39;.&#x2F;Child.vue&#39;
 import &#123; ref,reactive,provide &#125; from &quot;vue&quot;;
 &#x2F;&#x2F; 数据
 let money &#x3D; ref(100)
 let car &#x3D; reactive(&#123;
   brand:&#39;奔驰&#39;,
   price:100
 &#125;)
 &#x2F;&#x2F; 用于更新money的方法
 function updateMoney(value:number)&#123;
   money.value +&#x3D; value
 &#125;
 &#x2F;&#x2F; 提供数据 （不能.value，要不然传过去的不是一个ref对象）
 provide(&#39;moneyContext&#39;,&#123;money,updateMoney&#125;)
 provide(&#39;car&#39;,car)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<blockquote>
<p>注意：子组件中不用编写任何东西，是不受到任何打扰的</p>
</blockquote>
<p>【<strong>第二步</strong>】孙组件中使用<code>inject</code>配置项接受数据。</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
 &lt;div class&#x3D;&quot;grand-child&quot;&gt;
   &lt;h3&gt;我是孙组件&lt;&#x2F;h3&gt;
   &lt;h4&gt;资产：&#123;&#123; money &#125;&#125;&lt;&#x2F;h4&gt;
   &lt;h4&gt;汽车：&#123;&#123; car &#125;&#125;&lt;&#x2F;h4&gt;
   &lt;button @click&#x3D;&quot;updateMoney(6)&quot;&gt;点我&lt;&#x2F;button&gt;
 &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;GrandChild&quot;&gt;
 import &#123; inject &#125; from &#39;vue&#39;;
 &#x2F;&#x2F; 注入数据
let &#123;money,updateMoney&#125; &#x3D; inject(&#39;moneyContext&#39;,&#123;money:0,updateMoney:(x:number)&#x3D;&gt;&#123;&#125;&#125;)
let car &#x3D; inject(&#39;car&#39;)
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="6-8【pinia】"><a href="#6-8【pinia】" class="headerlink" title="6.8【pinia】"></a>6.8【pinia】</h3><p>参考之前的第5节</p>
<h3 id="6-9【solt】插槽"><a href="#6-9【solt】插槽" class="headerlink" title="6.9【solt】插槽"></a>6.9【solt】插槽</h3><h4 id="a-默认插槽"><a href="#a-默认插槽" class="headerlink" title="a. 默认插槽"></a>a. 默认插槽</h4><blockquote>
<p>组件标签既可以是单标签<code>&lt;Category/&gt;</code>，也可以是双标签<code>&lt;Category&gt;&lt;/Category&gt;</code></p>
</blockquote>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250214000801105.png" alt="image-20250214000801105"></p>
<p><code>插槽</code>就是在父组件中的子组件的双标签中写入标签，在子组件中需要的地方插入slot，子组件就会接收到父组件中传输过来的数据。</p>
<p>如果在子组件中的插槽有几对，就会显示几次数据。</p>
<p><code>默认插槽的name是name:default</code></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">父组件中：
        &lt;Category title&#x3D;&quot;今日热门游戏&quot;&gt;
          &lt;ul&gt;
            &lt;li v-for&#x3D;&quot;g in games&quot; :key&#x3D;&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;&#x2F;li&gt;
          &lt;&#x2F;ul&gt;
        &lt;&#x2F;Category&gt;
子组件中：
        &lt;template&gt;
          &lt;div class&#x3D;&quot;item&quot;&gt;
            &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;&#x2F;h3&gt;
            &lt;!-- 默认插槽 --&gt;
            &lt;slot&gt;&lt;&#x2F;slot&gt;
          &lt;&#x2F;div&gt;
        &lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="b-具名插槽"><a href="#b-具名插槽" class="headerlink" title="b. 具名插槽"></a>b. 具名插槽</h4><p>在子组件中的<code>插槽slot标签</code>中设置<code>name属性</code>，父组件中的<code>v-slot属性</code>和子组件中插槽的name相同，会把数据插入到对应的插槽中。</p>
<p>简单来说，就是把数据插入到指定的位置</p>
<p><code>在父组件中的组件标签中写入template标签</code>，把要插入子组件的结构放入到template标签中，给template标签设置<code>name属性</code></p>
<p><strong>父组件中：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;Category title&#x3D;&quot;今日热门游戏&quot;&gt;
  &lt;template v-slot:s1&gt;
    &lt;ul&gt;
      &lt;li v-for&#x3D;&quot;g in games&quot; :key&#x3D;&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;&#x2F;li&gt;
    &lt;&#x2F;ul&gt;
  &lt;&#x2F;template&gt;
  &lt;template #s2&gt; 
    &lt;a href&#x3D;&quot;&quot;&gt;更多&lt;&#x2F;a&gt;
  &lt;&#x2F;template&gt;
&lt;&#x2F;Category&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><code>v-slot:s1</code>和<code>#s1</code>都是同样作用</p>
<p><strong>子组件中：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
&lt;div class&#x3D;&quot;item&quot;&gt;
  &lt;h3&gt;&#123;&#123; title &#125;&#125;&lt;&#x2F;h3&gt;
  &lt;slot name&#x3D;&quot;s1&quot;&gt;&lt;&#x2F;slot&gt;
  &lt;slot name&#x3D;&quot;s2&quot;&gt;&lt;&#x2F;slot&gt;
&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="c-作用域插槽"><a href="#c-作用域插槽" class="headerlink" title="c. 作用域插槽"></a>c. 作用域插槽</h4><p>**<code>数据在组件的自身，但根据数据生成的结构需要组件的使用者来决定。</code>**（新闻数据在<code>News</code>组件中，但使用数据所遍历出来的结构由<code>App</code>组件决定）</p>
<ul>
<li>作用域插槽也有默认名字<code>default</code>，同样可以是具名插槽</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/image-20250214140023935.png" alt="image-20250214140023935"></p>
<p><strong>父组件中：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;Game v-slot&#x3D;&quot;params&quot;&gt;
&lt;!-- &lt;Game v-slot:default&#x3D;&quot;params&quot;&gt; --&gt;
&lt;!-- &lt;Game #default&#x3D;&quot;params&quot;&gt; --&gt;
  &lt;ul&gt;
    &lt;li v-for&#x3D;&quot;g in params.games&quot; :key&#x3D;&quot;g.id&quot;&gt;&#123;&#123; g.name &#125;&#125;&lt;&#x2F;li&gt;
  &lt;&#x2F;ul&gt;
&lt;&#x2F;Game&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p> <strong>子组件中：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
  &lt;div class&#x3D;&quot;category&quot;&gt;
    &lt;h2&gt;今日游戏榜单&lt;&#x2F;h2&gt;
    &lt;slot :games&#x3D;&quot;games&quot; a&#x3D;&quot;哈哈&quot;&gt;&lt;&#x2F;slot&gt;
  &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;

&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;Category&quot;&gt;
  import &#123;reactive&#125; from &#39;vue&#39;
  let games &#x3D; reactive([
    &#123;id:&#39;asgdytsa01&#39;,name:&#39;英雄联盟&#39;&#125;,
    &#123;id:&#39;asgdytsa02&#39;,name:&#39;王者荣耀&#39;&#125;,
    &#123;id:&#39;asgdytsa03&#39;,name:&#39;红色警戒&#39;&#125;,
    &#123;id:&#39;asgdytsa04&#39;,name:&#39;斗罗大陆&#39;&#125;
  ])
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="7-其他API"><a href="#7-其他API" class="headerlink" title="7. 其他API"></a>7. 其他API</h2><h3 id="7-1【shallowRef-与-shallowReactive】"><a href="#7-1【shallowRef-与-shallowReactive】" class="headerlink" title="7.1【shallowRef 与 shallowReactive】"></a>7.1【shallowRef 与 shallowReactive】</h3><h4 id="7-1-1-shallowRef"><a href="#7-1-1-shallowRef" class="headerlink" title="7.1.1 shallowRef"></a>7.1.1 shallowRef</h4><ol>
<li><p>作用：创建一个响应式数据，但只对顶层属性进行响应式处理。只能处理第一层的数据。如person.value.name,这就属于二层数据。</p>
</li>
<li><p>用法： </p>
 <pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">let</span> myVar <span class="token operator">=</span> <span class="token function">shallowRef</span><span class="token punctuation">(</span>initialValue<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>特点：只跟踪引用值的变化，不关心值内部的属性变化。</p>
</li>
</ol>
<h4 id="7-1-2-shallowReactive"><a href="#7-1-2-shallowReactive" class="headerlink" title="7.1.2 shallowReactive"></a>7.1.2 shallowReactive</h4><ol>
<li><p>作用：创建一个浅层响应式对象，只会使对象的最顶层属性变成响应式的，对象内部的嵌套属性则不会变成响应式的</p>
</li>
<li><p>用法：</p>
 <pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token function">shallowReactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
</li>
<li><p>特点：对象的顶层属性是响应式的，但嵌套对象的属性不是。</p>
</li>
</ol>
<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><blockquote>
<p>通过使用 <code>shallowRef()</code> 和 <code>shallowReactive()</code> 来绕开深度响应。浅层式 <code>API</code> 创建的状态只在其顶层是响应式的，对所有深层的对象不会做任何处理，避免了对每一个内部属性做响应式所带来的性能成本，这使得属性的访问变得更快，可提升性能。</p>
</blockquote>
<h3 id="7-2-【readonly-与-shallowReadonly】"><a href="#7-2-【readonly-与-shallowReadonly】" class="headerlink" title="7.2.【readonly 与 shallowReadonly】"></a>7.2.【readonly 与 shallowReadonly】</h3><h4 id="7-2-1-readonly"><a href="#7-2-1-readonly" class="headerlink" title="7.2.1 readonly"></a>7.2.1 <code>readonly</code></h4><ol>
<li><p>作用：用于创建一个对象的深只读副本。对数据进行保护，限制只有某人能修改等</p>
</li>
<li><p>用法：</p>
 <pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> readOnlyCopy <span class="token operator">=</span> <span class="token keyword">readonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p>特点：</p>
</li>
</ol>
<ul>
<li>对象的所有嵌套属性都将变为只读。</li>
<li>任何尝试修改这个对象的操作都会被阻止（在开发模式下，还会在控制台中发出警告）。</li>
</ul>
<ol start="4">
<li>应用场景：</li>
</ol>
<ul>
<li>创建不可变的状态快照。</li>
<li>保护全局状态或配置不被修改。</li>
</ul>
<h4 id="7-2-2-shallowReadonly"><a href="#7-2-2-shallowReadonly" class="headerlink" title="7.2.2 shallowReadonly"></a>7.2.2 <code>shallowReadonly</code></h4><ol>
<li><p>作用：与 <code>readonly</code> 类似，但只作用于对象的顶层属性。</p>
</li>
<li><p>用法：</p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">const</span> original <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span> <span class="token operator">...</span> <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> shallowReadOnlyCopy <span class="token operator">=</span> <span class="token function">shallowReadonly</span><span class="token punctuation">(</span>original<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p>特点：</p>
<ul>
<li>只将对象的顶层属性设置为只读，对象内部的嵌套属性仍然是可变的。只限制第一层数据，内层数据不限制</li>
<li>适用于只需保护对象顶层属性的场景。</li>
</ul>
</li>
</ol>
<h3 id="7-3【toRaw-与-markRaw】"><a href="#7-3【toRaw-与-markRaw】" class="headerlink" title="7.3【toRaw 与 markRaw】"></a>7.3【toRaw 与 markRaw】</h3><h4 id="7-3-1-toRaw"><a href="#7-3-1-toRaw" class="headerlink" title="7.3.1 toRaw"></a>7.3.1 <code>toRaw</code></h4><ol>
<li>作用：用于获取一个响应式对象的原始对象， <code>toRaw</code> 返回的对象不再是响应式的，不会触发视图更新。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2025/01/12/vue3-typescript/ee8e73ce9f261112d111de1e2324ce0a.png" alt="img"></p>
<ol start="2">
<li>具体代码：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> reactive<span class="token punctuation">,</span>toRaw<span class="token punctuation">,</span>markRaw<span class="token punctuation">,</span>isReactive <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>

<span class="token comment">/* toRaw */</span>
<span class="token comment">// 响应式对象</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span><span class="token punctuation">&#123;</span>name<span class="token operator">:</span><span class="token string">'tony'</span><span class="token punctuation">,</span>age<span class="token operator">:</span><span class="token number">18</span><span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
<span class="token comment">// 原始对象</span>
<span class="token keyword">let</span> rawPerson <span class="token operator">=</span> <span class="token function">toRaw</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span>

<span class="token comment">/* markRaw */</span>
<span class="token keyword">let</span> citysd <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda01'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'北京'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda02'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'上海'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda03'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'天津'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda04'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'重庆'</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span>
<span class="token keyword">let</span> citys2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>rawPerson<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isReactive</span><span class="token punctuation">(</span>citys2<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="7-3-2markRaw"><a href="#7-3-2markRaw" class="headerlink" title="7.3.2markRaw"></a>7.3.2<code>markRaw</code></h4><ol>
<li>作用：标记一个对象，使其永远不会变成响应式的。</li>
</ol>
<blockquote>
<p>例如使用<code>mockjs</code>时，为了防止误把<code>mockjs</code>变为响应式对象，可以使用 <code>markRaw</code> 去标记<code>mockjs</code></p>
</blockquote>
<ol start="2">
<li>编码：</li>
</ol>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">/* markRaw */</span>
<span class="token comment">// 如中国就这些城市，不会发生改变，所以直接使其用markRaw标记</span>
<span class="token keyword">let</span> citys <span class="token operator">=</span> <span class="token function">markRaw</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda01'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'北京'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda02'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'上海'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda03'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'天津'</span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
    <span class="token punctuation">&#123;</span>id<span class="token operator">:</span><span class="token string">'asdda04'</span><span class="token punctuation">,</span>name<span class="token operator">:</span><span class="token string">'重庆'</span><span class="token punctuation">&#125;</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 根据原始对象citys去创建响应式对象citys2 —— 创建失败，因为citys被markRaw标记了</span>
<span class="token keyword">let</span> citys2 <span class="token operator">=</span> <span class="token function">reactive</span><span class="token punctuation">(</span>citys<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="7-4-【customRef】"><a href="#7-4-【customRef】" class="headerlink" title="7.4.【customRef】"></a>7.4.【customRef】</h3><p>作用：创建一个自定义的<code>ref</code>，并对其依赖项跟踪和更新触发进行逻辑控制。</p>
<p>实现防抖效果（<code>useSumRef.ts</code>）：</p>
<p><code>自定义hooks封装</code></p>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token keyword">import</span> <span class="token punctuation">&#123;</span> customRef <span class="token punctuation">&#125;</span> <span class="token keyword">from</span> <span class="token string">"vue"</span><span class="token punctuation">;</span>
 
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token punctuation">(</span>initValue<span class="token operator">:</span><span class="token builtin">string</span><span class="token punctuation">,</span>delay<span class="token operator">:</span><span class="token builtin">number</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
  <span class="token comment">// 使用Vue提供的customRef定义响应式数据</span>
  <span class="token keyword">let</span> timer<span class="token operator">:</span><span class="token builtin">number</span>
  <span class="token comment">// track(跟踪)、trigger(触发)</span>
  <span class="token keyword">let</span> msg <span class="token operator">=</span> <span class="token function">customRef</span><span class="token punctuation">(</span><span class="token punctuation">(</span>track<span class="token punctuation">,</span>trigger<span class="token punctuation">)</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
    <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>
      <span class="token comment">// get何时调用？—— msg被读取时</span>
      <span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">track</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//告诉Vue数据msg很重要，你要对msg进行持续关注，一旦msg变化就去更新</span>
        <span class="token keyword">return</span> initValue
      <span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
      <span class="token comment">// set何时调用？—— msg被修改时</span>
      <span class="token function">set</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">&#123;</span>
        <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
          initValue <span class="token operator">=</span> value
          <span class="token function">trigger</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//通知Vue一下数据msg变化了</span>
        <span class="token punctuation">&#125;</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">&#125;</span>
    <span class="token punctuation">&#125;</span>
  <span class="token punctuation">&#125;</span><span class="token punctuation">)</span>
  <span class="token keyword">return</span> <span class="token punctuation">&#123;</span>msg<span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>注意：customRef中最核心的就是<code>track</code>和<code>trigger</code>，track是持续跟踪，trigger是通知你完成了。</p>
<ul>
<li><p><code>track</code> 是用于跟踪依赖的函数。当 Vue 的响应式系统检测到某个响应式数据被访问时，会调用 <code>track</code> 函数，将当前的依赖（通常是组件的渲染函数）记录下来。</p>
</li>
<li><p><code>trigger</code> 是用于触发更新的函数。当 Vue 的响应式系统检测到某个响应式数据发生变化时，会调用 <code>trigger</code> 函数，通知所有依赖该数据的组件重新渲染。</p>
</li>
</ul>
<p><strong>组件中：</strong></p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
	&lt;div class&#x3D;&quot;app&quot;&gt;
		&lt;h2&gt;&#123;&#123; msg &#125;&#125;&lt;&#x2F;h2&gt;
		&lt;input type&#x3D;&quot;text&quot; v-model&#x3D;&quot;msg&quot;&gt;
	&lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
 
&lt;script setup lang&#x3D;&quot;ts&quot; name&#x3D;&quot;App&quot;&gt;
	import &#123;ref&#125; from &#39;vue&#39;
	import useMsgRef from &#39;.&#x2F;useMsgRef&#39;
 
	&#x2F;&#x2F; 使用Vue提供的默认ref定义响应式数据，数据一变，页面就更新
	&#x2F;&#x2F; let msg &#x3D; ref(&#39;你好&#39;)
 
	&#x2F;&#x2F; 使用useMsgRef来定义一个响应式数据且有延迟效果
	let &#123;msg&#125; &#x3D; useMsgRef(&#39;你好&#39;,2000)
 
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h2 id="8-Vue3新组件"><a href="#8-Vue3新组件" class="headerlink" title="8. Vue3新组件"></a>8. Vue3新组件</h2><h3 id="8-1【Teleport】"><a href="#8-1【Teleport】" class="headerlink" title="8.1【Teleport】"></a>8.1【Teleport】</h3><ul>
<li>什么是Teleport？—— Teleport 是一种能够将我们的组件html结构移动到指定位置的技术。</li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;teleport to&#x3D;&#39;body&#39; &gt;  &#x2F;&#x2F;to就是将下列代码转移到那个里面
    &lt;div class&#x3D;&quot;modal&quot; v-show&#x3D;&quot;isShow&quot;&gt;
      &lt;h2&gt;我是一个弹窗&lt;&#x2F;h2&gt;
      &lt;p&gt;我是弹窗中的一些内容&lt;&#x2F;p&gt;
      &lt;button @click&#x3D;&quot;isShow &#x3D; false&quot;&gt;关闭弹窗&lt;&#x2F;button&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;teleport&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-2【Suspense】"><a href="#8-2【Suspense】" class="headerlink" title="8.2【Suspense】"></a>8.2【Suspense】</h3><ul>
<li>等待异步组件时渲染一些额外内容，让应用有更好的用户体验 </li>
<li>使用步骤： <ul>
<li>异步引入组件</li>
<li>使用<code>Suspense</code>包裹组件，并配置好 <code>default</code> 与 <code>fallback</code></li>
</ul>
</li>
</ul>
<blockquote>
<p>当子组件中有<code>异步任务</code>的时候，直接将<code>组件标签放在父组件中会丢失</code>，所以需要使用<code>Suspense</code>，可以：</p>
<ul>
<li>异步任务未完成时，<code>fallback</code>插槽可以显示加载提示</li>
<li>完成后，<code>default</code>插槽可以显示完成后的数据</li>
</ul>
</blockquote>
<pre class="line-numbers language-markup" data-language="markup"><code class="language-markup"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>app<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>我是App组件<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Suspense</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>default</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Child</span><span class="token punctuation">/></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span> <span class="token attr-name"><span class="token namespace">v-slot:</span>fallback</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>加载中.......<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Suspense</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;child&quot;&gt;
        &lt;h1&gt;子组件&lt;&#x2F;h1&gt;
        &lt;h2&gt;当前求和为&#123;&#123; sum &#125;&#125;&lt;&#x2F;h2&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script setup lang&#x3D;&#39;ts&#39; name&#x3D;&#39;Child&#39;&gt;
import axios from &#39;axios&#39;;
import &#123; ref &#125; from &#39;vue&#39;;

let sum &#x3D; ref(0)
let &#123; data: &#123; content &#125; &#125; &#x3D; await axios.get(&#39;https:&#x2F;&#x2F;api.uomg.com&#x2F;api&#x2F;rand.qinghua&#39;)
console.log(content);
    
&lt;&#x2F;script&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="8-3【全局API转移到应用对象】"><a href="#8-3【全局API转移到应用对象】" class="headerlink" title="8.3【全局API转移到应用对象】"></a>8.3【全局API转移到应用对象】</h3><ul>
<li><code>app.component</code></li>
</ul>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&#x2F;&#x2F; 定义一个组件
&lt;template&gt;
    &lt;h1&gt;我是全局组件&lt;&#x2F;h1&gt;
&lt;&#x2F;template&gt;
&lt;script setup lang&#x3D;&#39;ts&#39; name&#x3D;&#39;Comp&#39;&gt;

&lt;&#x2F;script&gt;
&lt;style scoped&gt;&lt;&#x2F;style&gt;

&#x2F;&#x2F; 在main.ts中注册后就可以在任意组件中使用该全局组件
import Comp from &#39;.&#x2F;components&#x2F;Comp.vue&#39;
app.component(&#39;Comp&#39;, Comp)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>app.config</code> 全局配置<ul>
<li><code>app.config.globalProperties</code> 全局配置属性</li>
<li>但是在其他组件中语法检查不认识全局配置的属性，需要在<code>main.ts</code>中加上代码段<code>[TypeScript 与选项式 API | Vue.js](https://cn.vuejs.org/guide/typescript/options-api.html#augmenting-global-properties)</code></li>
</ul>
</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span>config<span class="token punctuation">.</span>globalProperties<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token number">123</span>
<span class="token comment">// 这样在任意位置都可以直接使用`&#123;&#123;x&#125;&#125;`使用该变量</span>

<span class="token keyword">declare</span> <span class="token keyword">module</span> <span class="token string">'vue'</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">interface</span> <span class="token class-name">ComponentCustomProperties</span> <span class="token punctuation">&#123;</span>
        x<span class="token operator">:</span> <span class="token builtin">number</span>
    <span class="token punctuation">&#125;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>app.directive</code> 自定义指令</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript"><span class="token comment">// 自定义指令</span>
<span class="token comment">// 处理的函数=>第一个参数是绑定指令元素，第二个参数是一个对象,其中的value是指令绑定的值</span>
app<span class="token punctuation">.</span><span class="token function">directive</span><span class="token punctuation">(</span><span class="token string">'beauty'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>element<span class="token punctuation">,</span> <span class="token punctuation">&#123;</span> value <span class="token punctuation">&#125;</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">&#123;</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    element<span class="token punctuation">.</span>style<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token string">'red'</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;h2&gt;num是&#123;&#123; num &#125;&#125;&lt;&#x2F;h2&gt;
&lt;p v-beauty&#x3D;&quot;num&quot;&gt;你好呀&lt;&#x2F;p&gt;
...
let num &#x3D; ref(10);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>app.mount</code> 挂载</li>
<li><code>app.unmount</code> 卸载<code>app.unmount(&#39;#app&#39;)</code></li>
<li><code>app.use</code> 使用插件</li>
</ul>
<pre class="line-numbers language-typescript" data-language="typescript"><code class="language-typescript">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>pinia<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="8-4-其他"><a href="#8-4-其他" class="headerlink" title="8.4 其他"></a>8.4 其他</h3><p>（干开发的最好去官网看看vue3中的<a target="_blank" rel="noopener" href="https://v3-migration.vuejs.org/zh/breaking-changes/">非兼容性改变 | Vue 3 迁移指南</a>，面试问）</p>
<ul>
<li>过渡类名 <code>v-enter</code> 修改为 <code>v-enter-from</code>、过渡类名 <code>v-leave</code> 修改为 <code>v-leave-from</code>。</li>
<li><code>keyCode</code> 作为 <code>v-on</code> 修饰符的支持。</li>
<li><code>v-model</code> 指令在组件上的使用已经被重新设计，替换掉了 <code>v-bind.sync。</code></li>
<li><code>v-if</code> 和 <code>v-for</code> 在同一个元素身上使用时的优先级发生了变化。</li>
<li>移除了<code>$on</code>、<code>$off</code> 和 <code>$once</code> 实例方法。</li>
<li>移除了过滤器 <code>filter</code>。</li>
<li>移除了<code>$children</code> 实例 <code>propert</code>。</li>
</ul>
<h3 id="8-5-Vue响应式的本质"><a href="#8-5-Vue响应式的本质" class="headerlink" title="8.5 Vue响应式的本质"></a>8.5 Vue响应式的本质</h3><p>示例错误代码</p>
<pre class="line-numbers language-vue" data-language="vue"><code class="language-vue">&lt;template&gt;
    &lt;div class&#x3D;&quot;demo&quot;&gt;
        &lt;p&gt;得到传入的属性: &#123;&#123; count &#125;&#125;&lt;&#x2F;p&gt;
        &lt;p&gt;doubled: &#123;&#123; doubleCount &#125;&#125;&lt;&#x2F;p&gt;
    &lt;&#x2F;div&gt;
&lt;&#x2F;template&gt;
&lt;script setup lang&#x3D;&#39;ts&#39; name&#x3D;&#39;Demo&#39;&gt;

    const props &#x3D; defineProps(&#123;
        count: Number,
    &#125;);
    &#x2F;&#x2F; 1. 错误
  	const doubleCount &#x3D; ref(props.count * 2)
    
    &#x2F;&#x2F; 2. 正确
    const doubleCount &#x3D; ref(0)
    watchEffect(()&#x3D;&gt;&#123;
        console.log(&quot;watchEffect&quot;)
        doubleCount.value &#x3D; props.count * 2
    &#125;)
    
    &#x2F;&#x2F; 3. 错误 自定义hooks
    function useDouble(count)&#123;
        const doubleCount &#x3D; ref(count * 2)
        watchEffect(()&#x3D;&gt;&#123;
        console.log(&quot;watchEffect&quot;)
        doubleCount.value &#x3D; props.count * 2
    &#125;)
    	return doubleCount;
    &#125;
    const doubleCount &#x3D; useDouble(props.count);
    
    &#x2F;&#x2F; 4. 正确
    const doubleCount &#x3D; computed(()&#x3D;&gt;props.count * 2)
    &#x2F;&#x2F; let c &#x3D; props.count &#x2F;&#x2F; 赋值之后c就是一个普通变量
    &#x2F;&#x2F; const doubleCount &#x3D; computed(()&#x3D;&gt;c * 2)  错误 传入的还是一个数值
    
    &#x2F;&#x2F; 5. 正确 传入响应式对象和属性名  常见于第三方库VueUse
    function useDouble(props, propName)&#123;
        const doubleCount &#x3D; computed(()&#x3D;&gt;props[propsName] * 2);
    	return doubleCount;
    &#125;
    const doubleCount &#x3D; useDouble(prop, &#39;count&#39;);
    
let num &#x3D; ref(10)
&lt;&#x2F;script&gt;
&lt;style scoped&gt;
&lt;&#x2F;style&gt;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ol>
<li>数据响应式本质： 函数和数据的关联 -&gt; 数据改变后，函数会重新运行</li>
</ol>
<ul>
<li><code>数据要求：函数中读取到的数据，该数据是响应式对象的某个属性</code></li>
<li><code>函数的要求（被监控的函数 - Vue内置的函数）</code>：Vue3 <code>effect()</code> <code>render()</code> <code>watchEffect() watch() computed()</code></li>
</ul>
<blockquote>
<p>所以第一个错误：</p>
<ul>
<li>界面刷新render()函数 和 <code>props.count, doubleCount.value</code></li>
<li>doubelCount的值<code>const doubleCount = ref(props.count * 2)等价于 = ref(0)</code> 其实没有发生变化（数据和数据之间是没有响应式的）</li>
</ul>
</blockquote>
<ol start="3">
<li>自定义hooks：</li>
</ol>
<ul>
<li>useDouble函数是普通函数，<code>而且参数count是传递一个数值而非响应式对象</code></li>
<li>watchEffect只被开始调用一次，后续没有任何响应式数据关联</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://0zxm.github.io">0zxm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://0zxm.github.io/2025/01/12/vue3-typescript/">https://0zxm.github.io/2025/01/12/vue3-typescript/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://0zxm.github.io" target="_blank">0zxm</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue3/">Vue3</a><a class="post-meta__tags" href="/tags/Typescript/">Typescript</a></div><div class="post-share"><div class="social-share" data-image="/img/cover1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2025/01/15/django-he-vue3-qian-hou-duan-fen-chi-kai-fa/" title="Django和Vue3前后端补充知识点"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">Django和Vue3前后端补充知识点</div></div><div class="info-2"><div class="info-item-1">Django和Vue3前后端分离开发</div></div></div></a><a class="pagination-related" href="/2025/01/12/qt-liu-lan-qi-yin-qing-de-shi-yong-he-wang-luo-qing-qiu/" title="Qt浏览器引擎的使用和网络请求"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">Qt浏览器引擎的使用和网络请求</div></div><div class="info-2"><div class="info-item-1">使用 Qt(c++)框架发送网络请求，并使用浏览器引擎展示网页内容。</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/01/15/django-he-vue3-qian-hou-duan-fen-chi-kai-fa/" title="Django和Vue3前后端补充知识点"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-15</div><div class="info-item-2">Django和Vue3前后端补充知识点</div></div><div class="info-2"><div class="info-item-1">Django和Vue3前后端分离开发</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">0zxm</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">65</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/0zxm"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/0zxm" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:m15813109801@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="http://0zxm.github.io" target="_blank" title="博客"><i class="fab fa-algolia" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Vue3%E7%AE%80%E4%BB%8B"><span class="toc-text">1. Vue3简介</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-%E6%80%A7%E8%83%BD%E7%9A%84%E6%8F%90%E5%8D%87"><span class="toc-text">1.1.性能的提升</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-%E6%BA%90%E7%A0%81%E7%9A%84%E5%8D%87%E7%BA%A7"><span class="toc-text">1.2.源码的升级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-%E3%80%90%E6%8B%A5%E6%8A%B1TypeScript%E3%80%91"><span class="toc-text">1.3.【拥抱TypeScript】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4-%E6%96%B0%E7%9A%84%E7%89%B9%E6%80%A7"><span class="toc-text">1.4 新的特性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%88%9B%E5%BB%BAVue3%E5%B7%A5%E7%A8%8B"><span class="toc-text">2. 创建Vue3工程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1-%E5%9F%BA%E4%BA%8EVue-cli%E5%88%9B%E5%BB%BA"><span class="toc-text">2.1 基于Vue-cli创建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2-%E5%9F%BA%E4%BA%8EVite%E5%88%9B%E5%BB%BA-%E6%8E%A8%E8%8D%90"><span class="toc-text">2.2 基于Vite创建(推荐)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Vue3%E6%A0%B8%E5%BF%83%E8%AF%AD%E6%B3%95"><span class="toc-text">3. Vue3核心语法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%90OptionsAPI-%E4%B8%8E-CompositionAPI%E3%80%91"><span class="toc-text">3.1【OptionsAPI 与 CompositionAPI】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#OptionsAPI-%E7%9A%84%E5%BC%8A%E7%AB%AF"><span class="toc-text">OptionsAPI 的弊端</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Composition-API-%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">Composition API 的优势</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%90%E6%8B%89%E5%BC%80%E5%BA%8F%E5%B9%95%E7%9A%84setup%E3%80%91"><span class="toc-text">3.2【拉开序幕的setup】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#setup%E6%A6%82%E8%BF%B0"><span class="toc-text">setup概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setup%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">setup返回值</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#setup%E4%B8%8EOptionsAPI%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">setup与OptionsAPI的关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#expose%E5%87%BD%E6%95%B0-%E8%A1%A5%E5%85%85"><span class="toc-text">expose函数(补充)</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3-setup%E8%AF%AD%E6%B3%95%E7%B3%96"><span class="toc-text">3.3 setup语法糖</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-4-ref%E5%88%9B%E5%BB%BA%E3%80%90%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-text">3.4 ref创建【基本类型的响应式数据】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-5-reactive%E5%AE%9A%E4%B9%89%E3%80%90%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-text">3.5 reactive定义【对象类型的响应式数据】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-6-ref%E5%AE%9A%E4%B9%89%E3%80%90%E5%AF%B9%E8%B1%A1%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-text">3.6 ref定义【对象类型的响应式数据】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-7%E3%80%90ref-%E5%AF%B9%E6%AF%94-reactive%E3%80%91"><span class="toc-text">3.7【ref 对比 reactive】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-8%E3%80%90toRefs-%E4%B8%8E-toRef%E3%80%91"><span class="toc-text">3.8【toRefs 与 toRef】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-9-computed%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7"><span class="toc-text">3.9 computed计算属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-10-watch"><span class="toc-text">3.10 watch</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%80"><span class="toc-text">情况一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%8C"><span class="toc-text">情况二</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%B8%89"><span class="toc-text">情况三</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E5%9B%9B"><span class="toc-text">情况四</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%83%85%E5%86%B5%E4%BA%94"><span class="toc-text">情况五</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-11-watchEffect"><span class="toc-text">3.11 watchEffect</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-12%E3%80%90%E6%A0%87%E7%AD%BE%E7%9A%84-ref-%E5%B1%9E%E6%80%A7%E3%80%91"><span class="toc-text">3.12【标签的 ref 属性】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E9%A1%BEts%E7%9A%84%E6%B3%9B%E5%9E%8B%E4%BB%A5%E5%8F%8A-%E8%B7%AF%E5%BE%84"><span class="toc-text">回顾ts的泛型以及@路径</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-13-%E7%BB%84%E4%BB%B6-props%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">3.13 (组件)props的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#App-vue"><span class="toc-text">App.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Person-vue"><span class="toc-text">Person.vue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-14-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90"><span class="toc-text">3.14 生命周期钩子</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Person-vue-1"><span class="toc-text">Person.vue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App-vue-1"><span class="toc-text">App.vue</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-15-%E8%87%AA%E5%AE%9A%E4%B9%89hooks"><span class="toc-text">3.15 自定义hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#useDog-ts"><span class="toc-text">useDog.ts</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useSum-ts"><span class="toc-text">useSum.ts</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-16-v-if%E5%92%8Cv-for"><span class="toc-text">3.16 v-if和v-for</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%8A%9F%E8%83%BD%E5%8C%BA%E5%88%AB"><span class="toc-text">1. 功能区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF%E5%8C%BA%E5%88%AB"><span class="toc-text">2. 使用场景区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E6%80%A7%E8%83%BD%E5%8C%BA%E5%88%AB"><span class="toc-text">3. 性能区别</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-text">4. 注意事项</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-17-v-on"><span class="toc-text">3.17 v-on</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%94%A8%E6%B3%95"><span class="toc-text">基本用法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B"><span class="toc-text">示例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%80%E5%86%99%E5%BD%A2%E5%BC%8F"><span class="toc-text">简写形式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%86%85%E8%81%94-JavaScript"><span class="toc-text">绑定内联 JavaScript</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E4%BA%8B%E4%BB%B6%E5%AF%B9%E8%B1%A1"><span class="toc-text">访问事件对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="toc-text">事件修饰符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E5%A4%9A%E4%B8%AA%E4%BA%8B%E4%BB%B6"><span class="toc-text">绑定多个事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="toc-text">动态绑定事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6"><span class="toc-text">自定义事件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AC%94%E8%AE%B0"><span class="toc-text">笔记</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E8%B7%AF%E7%94%B1%E5%99%A8"><span class="toc-text">4. 路由器</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1-%E5%AF%B9%E8%B7%AF%E7%94%B1%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%90%86%E8%A7%A3"><span class="toc-text">4.1 对路由的基本理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%9F%BA%E6%9C%AC%E5%88%87%E6%8D%A2%E6%95%88%E6%9E%9C"><span class="toc-text">4.2 基本切换效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3-%E4%B8%A4%E4%B8%AA%E6%B3%A8%E6%84%8F%E7%82%B9"><span class="toc-text">4.3 两个注意点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4-%E8%B7%AF%E7%94%B1%E5%99%A8%E5%B7%A5%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="toc-text">4.4 路由器工作模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-5-to%E7%9A%84%E4%B8%A4%E7%A7%8D%E5%86%99%E6%B3%95"><span class="toc-text">4.5 to的两种写法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-6-%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="toc-text">4.6 命名路由</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-7%E3%80%90%E5%B5%8C%E5%A5%97%E8%B7%AF%E7%94%B1%E3%80%91"><span class="toc-text">4.7【嵌套路由】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-8-Vue%E8%B7%AF%E7%94%B1%E4%BC%A0%E5%8F%82"><span class="toc-text">4.8 Vue路由传参</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#query%E4%BC%A0%E5%8F%82"><span class="toc-text">query传参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#params%E4%BC%A0%E5%8F%82"><span class="toc-text">params传参</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-9%E3%80%90%E8%B7%AF%E7%94%B1%E7%9A%84props%E9%85%8D%E7%BD%AE%E3%80%91"><span class="toc-text">4.9【路由的props配置】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-10%E3%80%90replace%E5%B1%9E%E6%80%A7%E3%80%91"><span class="toc-text">4.10【replace属性】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-11-%E7%BC%96%E7%A8%8B%E5%BC%8F%E5%AF%BC%E8%88%AA"><span class="toc-text">4.11 编程式导航</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-12-%E8%B7%AF%E7%94%B1%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">4.12 路由重定向</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-pinia"><span class="toc-text">5. pinia</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1-%E5%87%86%E5%A4%87%E4%B8%80%E4%B8%AA%E6%95%88%E6%9E%9C"><span class="toc-text">5.1 准备一个效果</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-%E6%90%AD%E5%BB%BApinia%E7%8E%AF%E5%A2%83"><span class="toc-text">5.2 搭建pinia环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E3%80%90%E5%AD%98%E5%82%A8-%E8%AF%BB%E5%8F%96%E6%95%B0%E6%8D%AE%E3%80%91"><span class="toc-text">5.3【存储+读取数据】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4%E3%80%90%E6%94%B9%E5%8F%98%E6%95%B0%E6%8D%AE%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%91-%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F"><span class="toc-text">5.4【改变数据的方式】(三种方式)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-5%E3%80%90storeToRefs%E3%80%91"><span class="toc-text">5.5【storeToRefs】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-6%E3%80%90getters%E3%80%91"><span class="toc-text">5.6【getters】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-7%E3%80%90-subscribe%E3%80%91"><span class="toc-text">5.7【$subscribe】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-8%E3%80%90store%E7%BB%84%E5%90%88%E5%BC%8F%E5%86%99%E6%B3%95%E3%80%91"><span class="toc-text">5.8【store组合式写法】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1"><span class="toc-text">6. 组件通信</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#6-1%E3%80%90props%E3%80%91"><span class="toc-text">6.1【props】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-2%E3%80%90%E8%87%AA%E5%AE%9A%E4%B9%89%E4%BA%8B%E4%BB%B6%E3%80%91"><span class="toc-text">6.2【自定义事件】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-3%E3%80%90mitt%E3%80%91"><span class="toc-text">6.3【mitt】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-4%E3%80%90v-model%E3%80%91"><span class="toc-text">6.4【v-model】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-5%E3%80%90-attrs%E3%80%91"><span class="toc-text">6.5【$attrs】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-6-%E3%80%90-refs-%E3%80%81-parent%E3%80%91"><span class="toc-text">6.6. 【 $refs 、$parent】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-7%E3%80%90provide%E3%80%81reject%E3%80%91"><span class="toc-text">6.7【provide、reject】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-8%E3%80%90pinia%E3%80%91"><span class="toc-text">6.8【pinia】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-9%E3%80%90solt%E3%80%91%E6%8F%92%E6%A7%BD"><span class="toc-text">6.9【solt】插槽</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#a-%E9%BB%98%E8%AE%A4%E6%8F%92%E6%A7%BD"><span class="toc-text">a. 默认插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#b-%E5%85%B7%E5%90%8D%E6%8F%92%E6%A7%BD"><span class="toc-text">b. 具名插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#c-%E4%BD%9C%E7%94%A8%E5%9F%9F%E6%8F%92%E6%A7%BD"><span class="toc-text">c. 作用域插槽</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E5%85%B6%E4%BB%96API"><span class="toc-text">7. 其他API</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1%E3%80%90shallowRef-%E4%B8%8E-shallowReactive%E3%80%91"><span class="toc-text">7.1【shallowRef 与 shallowReactive】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-1-shallowRef"><span class="toc-text">7.1.1 shallowRef</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-1-2-shallowReactive"><span class="toc-text">7.1.2 shallowReactive</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-text">总结</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-%E3%80%90readonly-%E4%B8%8E-shallowReadonly%E3%80%91"><span class="toc-text">7.2.【readonly 与 shallowReadonly】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-1-readonly"><span class="toc-text">7.2.1 readonly</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-2-2-shallowReadonly"><span class="toc-text">7.2.2 shallowReadonly</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-3%E3%80%90toRaw-%E4%B8%8E-markRaw%E3%80%91"><span class="toc-text">7.3【toRaw 与 markRaw】</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-1-toRaw"><span class="toc-text">7.3.1 toRaw</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-3-2markRaw"><span class="toc-text">7.3.2markRaw</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-4-%E3%80%90customRef%E3%80%91"><span class="toc-text">7.4.【customRef】</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-Vue3%E6%96%B0%E7%BB%84%E4%BB%B6"><span class="toc-text">8. Vue3新组件</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#8-1%E3%80%90Teleport%E3%80%91"><span class="toc-text">8.1【Teleport】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-2%E3%80%90Suspense%E3%80%91"><span class="toc-text">8.2【Suspense】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-3%E3%80%90%E5%85%A8%E5%B1%80API%E8%BD%AC%E7%A7%BB%E5%88%B0%E5%BA%94%E7%94%A8%E5%AF%B9%E8%B1%A1%E3%80%91"><span class="toc-text">8.3【全局API转移到应用对象】</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-4-%E5%85%B6%E4%BB%96"><span class="toc-text">8.4 其他</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-5-Vue%E5%93%8D%E5%BA%94%E5%BC%8F%E7%9A%84%E6%9C%AC%E8%B4%A8"><span class="toc-text">8.5 Vue响应式的本质</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/08/java-ji-chu-xia/" title="Java基础下"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础下"/></a><div class="content"><a class="title" href="/2025/03/08/java-ji-chu-xia/" title="Java基础下">Java基础下</a><time datetime="2025-03-08T03:43:21.000Z" title="发表于 2025-03-08 11:43:21">2025-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/08/duo-xian-cheng-e-wai-kuo-zhan/" title="Java基础之多线程"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础之多线程"/></a><div class="content"><a class="title" href="/2025/03/08/duo-xian-cheng-e-wai-kuo-zhan/" title="Java基础之多线程">Java基础之多线程</a><time datetime="2025-03-08T03:43:21.000Z" title="发表于 2025-03-08 11:43:21">2025-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/07/qian-ru-shi-xi-tong-gai-shu/" title="嵌入式系统概述"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="嵌入式系统概述"/></a><div class="content"><a class="title" href="/2025/03/07/qian-ru-shi-xi-tong-gai-shu/" title="嵌入式系统概述">嵌入式系统概述</a><time datetime="2025-03-07T06:08:48.000Z" title="发表于 2025-03-07 14:08:48">2025-03-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/05/da-shu-ju-ke-shi-hua/" title="大数据可视化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据可视化"/></a><div class="content"><a class="title" href="/2025/03/05/da-shu-ju-ke-shi-hua/" title="大数据可视化">大数据可视化</a><time datetime="2025-03-05T04:51:12.000Z" title="发表于 2025-03-05 12:51:12">2025-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/05/shou-ji-ruan-jian-kai-fa/" title="手机软件开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="手机软件开发"/></a><div class="content"><a class="title" href="/2025/03/05/shou-ji-ruan-jian-kai-fa/" title="手机软件开发">手机软件开发</a><time datetime="2025-03-05T04:50:56.000Z" title="发表于 2025-03-05 12:50:56">2025-03-05</time></div></div></div></div></div></div><!-- 登录验证模态框--><div id="login-modal"><div class="modal-overlay"></div><div class="modal-content"><h2>Welcome</h2><p>Please enter the password to access this page.</p><input id="password-input" type="password" placeholder="Enter Password"><button id="submit-btn">Submit</button><p id="error-msg" style="color: red; display: none;">Invalid Password. Please try again.</p></div></div></main><footer id="footer" style="background-image: url(/img/footer.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 0zxm</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- CSS 样式--><style>#login-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  cursor: pointer;
}

.modal-content {
  background-color: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  width: 80%;
  max-width: 400px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  z-index:999;
}

input#password-input {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button#submit-btn {
  background-color: #4CAF50;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button#submit-btn:hover {
  background-color: #45a049;
}
</style><!-- JavaScript 验证--><script>document.addEventListener('DOMContentLoaded', function() {

  (function() {
  // 禁用右键菜单
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });

  // 禁用快捷键 (F12/Ctrl+Shift+I/Ctrl+Shift+J/Ctrl+Shift+C)
  document.addEventListener('keydown', function(e) {
    if (e.key === 'F12' || 
        (e.ctrlKey && e.shiftKey && e.key === 'I') || 
        (e.ctrlKey && e.shiftKey && e.key === 'J') ||
        (e.ctrlKey && e.shiftKey && e.key === 'C')) {
      e.preventDefault();
      return false;
    }
  });
  })();
  

  const modal = document.getElementById('login-modal');
  const passwordInput = document.getElementById('password-input');
  const submitBtn = document.getElementById('submit-btn');
  const errorMsg = document.getElementById('error-msg');
  const bodyWrap = document.getElementById('body-wrap');


  // 默认显示模态框
  modal.style.display = 'flex';

  // 自动聚焦到密码输入框
  passwordInput.focus();

  submitBtn.addEventListener('click', function(e) {
    e.preventDefault();
    const password = passwordInput.value;
    const correctPassword = 'D&X'; // 替换为实际密码

    if (password === correctPassword) {
      modal.style.display = 'none';
      bodyWrap.style.opacity = 1; // 显示页面内容
    } else {
      passwordInput.classList.add('error');
      errorMsg.style.display = 'block';
      setTimeout(() => {
        passwordInput.classList.remove('error');
        errorMsg.style.display = 'none';
      }, 2000);
    }
  });
  // 按下 Enter 键提交
  passwordInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      submitBtn.click();
    }
  });
});</script></body></html>