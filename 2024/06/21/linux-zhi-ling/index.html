<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Linux指令 | 0zxm</title><meta name="author" content="0zxm"><meta name="copyright" content="0zxm"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="操作系统实践课">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux指令">
<meta property="og:url" content="https://0zxm.github.io/2024/06/21/linux-zhi-ling/index.html">
<meta property="og:site_name" content="0zxm">
<meta property="og:description" content="操作系统实践课">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://0zxm.github.io/img/cover1.jpg">
<meta property="article:published_time" content="2024-06-21T04:25:07.000Z">
<meta property="article:modified_time" content="2025-02-14T02:52:23.045Z">
<meta property="article:author" content="0zxm">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://0zxm.github.io/img/cover1.jpg"><link rel="shortcut icon" href="/favicon.png"><link rel="canonical" href="https://0zxm.github.io/2024/06/21/linux-zhi-ling/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        if (name && globalFn[key][name]) return
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"未找到符合您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":150,"languages":{"author":"作者: 0zxm","link":"链接: ","source":"来源: 0zxm","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: true,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux指令',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-02-14 10:52:23'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">65</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/src/"><i class="fa-fw fas fa-cloud"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/cover1.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">0zxm</span></a><a class="nav-page-title" href="/"><span class="site-name">Linux指令</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><span class="site-page group hide"><i class="fa-fw fas fa-list"></i><span> 链接</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/src/"><i class="fa-fw fas fa-cloud"></i><span> 资源</span></a></div><div class="menus_item"><a class="site-page" href="/shuoshuo/"><i class="fa-fw fas fa-comment"></i><span> 说说</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Linux指令</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-06-21T04:25:07.000Z" title="发表于 2024-06-21 12:25:07">2024-06-21</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2025-02-14T02:52:23.045Z" title="更新于 2025-02-14 10:52:23">2025-02-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">总字数:</span><span class="word-count">16.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>57分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Linux学习"><a href="#Linux学习" class="headerlink" title="Linux学习"></a>Linux学习</h1><h2 id="第一章-Linux的由来"><a href="#第一章-Linux的由来" class="headerlink" title="第一章 Linux的由来"></a>第一章 Linux的由来</h2><ul>
<li><p>开源协议<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/GPL%E5%8D%8F%E8%AE%AE.png" alt="alt text"></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_37037348/article/details/131488712">POSIX接口规范</a></p>
<p>POSIX接口规范，全称为“可移植操作系统接口”（Portable Operating System Interface），是由IEEE（电气和电子工程师协会）和ISO&#x2F;IEC联合制定的一组操作系统接口规范。其主要目的在于实现不同操作系统之间的兼容性和互操作性，使得开发人员能够跨平台编写和运行应用程序，而无需进行大量的代码修改。</p>
</li>
</ul>
<h2 id="第二章-linux基本命令"><a href="#第二章-linux基本命令" class="headerlink" title="第二章 linux基本命令"></a>第二章 linux基本命令</h2><h3 id="期末考试方式"><a href="#期末考试方式" class="headerlink" title="期末考试方式"></a>期末考试方式</h3><p>使用<code>exam</code>命令,输入数字选择选项或题目,答案默认保存,若想修改之前的答案,输入对应题号就行</p>
<h3 id="1-连接到学校主机10-188-2-251的帐号密码"><a href="#1-连接到学校主机10-188-2-251的帐号密码" class="headerlink" title="1.连接到学校主机10.188.2.251的帐号密码"></a>1.连接到学校主机10.188.2.251的帐号密码</h3><pre class="line-numbers language-text" data-language="text"><code class="language-text">账号:s223174
密码:welcome<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<h3 id="2-nano指令操作文件"><a href="#2-nano指令操作文件" class="headerlink" title="2.nano指令操作文件"></a>2.nano指令操作文件</h3><p>查看和编辑文件</p>
<h3 id="3-环境变量"><a href="#3-环境变量" class="headerlink" title="3.环境变量"></a>3.环境变量</h3><ol>
<li>PATH环境变量: 当shell执行时去哪找可执行文件,依次查找</li>
<li>PS1环境变量: shell命令提示符的样式</li>
<li>LANG环境变量: 与shell交互使用的语言</li>
<li>HOME环境变量: 当前用户工作目录</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">locale <span class="token parameter variable">-a</span> 指令
列出所有系统安装的语言<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314232303614.png" alt="image-20240314232303614"></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">修改<span class="token environment constant">PS1</span>环境变量---shell提示符样式
<span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'HAPPY: \u $ '</span>
<span class="token punctuation">\</span>u是特殊参数,表示用户名<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314232634341.png" alt="image-20240314232634341"></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">添加当前目录<span class="token punctuation">(</span>.<span class="token punctuation">)</span>到<span class="token environment constant">PATH</span>变量
注意:<span class="token environment constant">PATH</span>变量以冒号分割<span class="token punctuation">(</span>:<span class="token punctuation">)</span>,修改<span class="token environment constant">PATH</span>环境变量只对本次生效,想要永久生效,可以修改.profile文件
<span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:.<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314232909211.png" alt="image-20240314232909211"></p>
<h3 id="4-echo命令"><a href="#4-echo命令" class="headerlink" title="4.echo命令"></a>4.echo命令</h3><p>类似于打印命令</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314233218047.png" alt="image-20240314233218047"></p>
<h3 id="5-alias命令"><a href="#5-alias命令" class="headerlink" title="5.alias命令"></a>5.alias命令</h3><p>alias可以起别名或者修改命令默认的执行方式</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">alias</span> 别名<span class="token operator">=</span>源名
例子alias <span class="token assign-left variable">list</span><span class="token operator">=</span>ls

alias命令展示所有已取<span class="token punctuation">(</span>默认<span class="token punctuation">)</span>别名

unalias取消别名
<span class="token builtin class-name">unalias</span> list<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314233930938.png" alt="image-20240314233930938"></p>
<h3 id="6-Linux中的源字符"><a href="#6-Linux中的源字符" class="headerlink" title="6.Linux中的源字符"></a>6.Linux中的源字符</h3><ul>
<li>$美元符: 表示取值</li>
<li>双引号: 对引号里面的源字符进行处理</li>
<li>单引号: 不对引号里面的源字符处理</li>
<li>\ 反斜杠: 最常见的转义字符,用于转义其他字符</li>
<li>*字符: 任意字符</li>
<li>?问号: ? 可以用来匹配任意单个字符…命令 <code>ls a?.txt</code> 会列出所有以 <code>a</code> 开头,后面跟着任意单个字符,并且以 <code>.txt</code> 结尾的文件</li>
<li><code>[限制条件]</code>: 限制范围,例如 <code>ls /tmp/[123].tmp</code>(区间写法)等价于 <code>ls /tmp/[1-3].tmp</code>(列举写法),表示取出tmp目录下的所有1到3以<code>tmp</code>为后缀的文件,注意变通</li>
<li>^或者!: 表示否定negative</li>
<li>~字符: 表示工作目录,等价于<code>echo $HOME</code></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240315000305427.png" alt="image-20240315000305427"></p>
<h3 id="7-基本命令"><a href="#7-基本命令" class="headerlink" title="7.基本命令"></a>7.基本命令</h3><ul>
<li><p>clear清屏命令</p>
</li>
<li><p>cp 源文件路径 目的路径</p>
<p>  例: cp hello hi</p>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314234136513.png" alt="image-20240314234136513"><br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/cp.jpg" alt="alt text"></p>
</li>
<li><p>type xxx命令</p>
<p>  查看指令类型</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314234306905.png" alt="image-20240314234306905"></p>
<ul>
<li><p>rm 文件路径</p>
<p>  例: rm hi  (hi文件已经存在)</p>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314234422632.png" alt="image-20240314234422632"></p>
</li>
<li><p>ls指令(参数 -l等)</p>
<p>  例: ls -l hello</p>
<ul>
<li><code>-l</code>参数,显示更详细信息</li>
</ul>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240314234557355.png" alt="image-20240314234557355"></p>
</li>
<li><p>history命令</p>
<p>  显示shell命令的历史记录</p>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240315000404594.png" alt="image-20240315000404594"></p>
</li>
<li><p>!!直接执行上条命令,!加编号执行history里的第几条记录</p>
<p>  <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20240315000542358.png" alt="alt text"></p>
</li>
<li><p><code>su</code> 和 <code>sudo</code>超级用户(管理员)<br><code>su</code> : 把身份切换到超级用户(su之后就切换到root用户,要求输入的是root用户口令)<br><code>su 用户名</code> : 切换到其他用户<br><code>sudo</code> : 以超级用户的身份执行某条命令(sudo要求输入口令时,输入的是当前用户的口令)<br>值得注意的是,只有被指定的用户才能使用sudo命令,在&#x2F;etc&#x2F;sudoers文件里的才被允许<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/sudoers.png" alt="alt text"></p>
</li>
<li><p><code>whoami</code>查看当前用户</p>
</li>
<li><p><code>id</code>命令或<code>groups</code>显示所属组</p>
</li>
<li><p><code>hostname</code>查看主机名</p>
<ol>
<li><code>hostname</code></li>
<li><code>hostname 想要修改的主机名</code></li>
</ol>
</li>
<li><p><code>uname</code>查看操作系统内核<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/uname.png" alt="alt text"></p>
</li>
<li><p><code>free</code>查看内存<br><code>free -h</code>参数表示human readable 便于人类阅读的<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/free.png" alt="alt text"></p>
</li>
<li><p><code>date</code>显示当前系统时间<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/date.png" alt="alt text"></p>
</li>
<li><p><code>vi</code>命令查看<code>/proc</code>系统信息文件夹下文件<br>vi &#x2F;proc&#x2F;cpuinfo<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/proc.png" alt="alt text"></p>
</li>
<li><p><code>passwd</code>修改口令命令<br>以前存放在&#x2F;etc&#x2F;passwd下,现在存放在&#x2F;etc&#x2F;shadow文件</p>
</li>
<li><p><code>wall</code>广播命令<br>您可以使用<code>wall</code>命令来向所有登录用户发送消息。例如，要发送一句话给所有登录用户，您可以在终端中输入以下命令：</p>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"这是一条消息"</span> <span class="token operator">|</span> wall<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>这将向所有登录用户显示消息“这是一条消息”。请注意，您需要具有适当的权限才能向所有用户发送消息。</p>
<ul>
<li><p><code>w</code>或<code>who</code>查看所有当前登陆用户<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/who.png" alt="alt text"></p>
</li>
<li><p><code>seq</code>生成数字序列<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/seq.png" alt="alt text"></p>
</li>
</ul>
<h3 id="8-shell命令执行的优先级"><a href="#8-shell命令执行的优先级" class="headerlink" title="8.shell命令执行的优先级"></a>8.shell命令执行的优先级</h3><ol>
<li>alias别名</li>
<li>内置命令</li>
<li>可执行文件</li>
</ol>
<h3 id="9-源字符使用实例-第一次小测"><a href="#9-源字符使用实例-第一次小测" class="headerlink" title="9.源字符使用实例(第一次小测)"></a>9.源字符使用实例(第一次小测)</h3><ol>
<li>list files whose name start with a,b or c <ul>
<li>解答 : <code>ls [abc]*</code></li>
</ul>
</li>
<li>list files whose name don’t start with a digit<ul>
<li>解答 : <code>ls [^0-9]*</code></li>
</ul>
</li>
<li>list all files whose names only contains two characters<ul>
<li>解答 : <code>ls ??</code></li>
</ul>
</li>
<li>list all the file whose name contain a $<ul>
<li>解答 : <code>ls *\$*</code></li>
</ul>
</li>
<li>Which file stores the user information?<ul>
<li>解答 : <code>/etc/passwd</code></li>
</ul>
</li>
<li>Which file will be executed once when user login<ul>
<li>解答 : <code>.profile</code>或<code>.bash_login</code></li>
</ul>
</li>
<li>Create an alias called “la” for the command “ls -a”<ul>
<li>解答 : <code>alias la=&#39;ls -a&#39;</code></li>
</ul>
</li>
<li>The names of the directories that a shell searches to find the file corresponding to an external command are stored in the shell variable named<ul>
<li>解答 : <code>PATH</code></li>
</ul>
</li>
</ol>
<h3 id="10-链接命令"><a href="#10-链接命令" class="headerlink" title="10.链接命令"></a>10.链接命令</h3><ol>
<li>软链接<br>类似于Windows下的快捷方式，当一个源文件的目录层级比较深，我们想要方便使用它可以给源文件创建一个软链接,方便文件操作<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/link.png" alt="alt text"></li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ln</span> <span class="token parameter variable">-s</span> 源文件路径 软链接名字<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>ln -s</td>
<td>创建软链接</td>
</tr>
</tbody></table>
<h3 id="11-解压缩命令"><a href="#11-解压缩命令" class="headerlink" title="11.解压缩命令"></a>11.解压缩命令</h3><ul>
<li>.gz和.bz2的压缩包需要使用<code>tar</code>命令来压缩和解压缩</li>
<li>不加z参数，就没有压缩，只是打包成一个文件</li>
</ul>
<table>
<thead>
<tr>
<th>压缩格式</th>
<th>说明</th>
<th>压缩包后缀</th>
</tr>
</thead>
<tbody><tr>
<td>bz2</td>
<td>常见的压缩文件格式，由bzip2生成，具有高压缩率</td>
<td>.bz2</td>
</tr>
<tr>
<td>gz</td>
<td>常见的压缩文件格式，由gzip生成，广泛应用于Linux和Unix系统</td>
<td>.gz</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>tar命令选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-c</td>
<td>创建打包文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示打包或者解包的详细信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定文件名称, 必须放到所有选项后面</td>
</tr>
<tr>
<td>-z</td>
<td>压缩(.gz)</td>
</tr>
<tr>
<td>-j</td>
<td>压缩(.bz2)</td>
</tr>
<tr>
<td>-x</td>
<td>解压缩</td>
</tr>
<tr>
<td>-C</td>
<td>解压缩到指定目录</td>
</tr>
</tbody></table>
<h3 id="12-关机和重启命令的使用"><a href="#12-关机和重启命令的使用" class="headerlink" title="12.关机和重启命令的使用"></a>12.关机和重启命令的使用</h3><table>
<thead>
<tr>
<th align="center">命令</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>shutdown -h now</code></td>
<td align="center">立刻关机。这个命令会立即关闭系统，并断开所有用户的连接。</td>
</tr>
<tr>
<td align="center"><code>reboot</code></td>
<td align="center">重启。这个命令会重新启动系统，相当于按下计算机的重启按钮。</td>
</tr>
</tbody></table>
<h3 id="13-远程登陆，远程拷贝命令"><a href="#13-远程登陆，远程拷贝命令" class="headerlink" title="13.远程登陆，远程拷贝命令"></a>13.远程登陆，远程拷贝命令</h3><h4 id="13-1-ssh命令的使用"><a href="#13-1-ssh命令的使用" class="headerlink" title="13.1 ssh命令的使用"></a>13.1 ssh命令的使用</h4><p>安装步骤:<br>① 假如Ubuntu作为服务端,需要安装ssh服务端软件,执行命令: sudo apt-get install openssh-server<br>② 客户端电脑如果是macOS系统则不需要安装ssh客户端软件，默认已经安装过了，直接可以使用ssh命令<br>③ 客户端电脑如果是Windows系统则需要安装OpenSSH for Windows这个软件</p>
<h4 id="13-2-scp命令的使用"><a href="#13-2-scp命令的使用" class="headerlink" title="13.2 scp命令的使用"></a>13.2 scp命令的使用</h4><p><code>scp</code> 是基于 SSH 进行安全的远程文件拷贝的命令，也就是说需要保证服务端和客户端电脑安装了相应的 SSH 软件。</p>
<p><strong>scp命令格式:</strong></p>
<ol>
<li><p>远程拷贝文件:</p>
<ul>
<li><code>scp 本地文件 远程服务器用户名@远程服务器ip地址:指定拷贝到远程服务器的路径</code></li>
<li><code>scp 远程服务器用户名@远程服务器ip地址:远程服务器文件 指定拷贝到本地的路径</code></li>
</ul>
</li>
<li><p>远程拷贝目录:</p>
<ul>
<li><code>scp -r 本地目录 远程服务器用户名@远程服务器ip地址:指定拷贝到远程服务器的路径</code></li>
<li><code>scp -r 远程服务器用户名@远程服务器ip地址:远程服务器目录 指定拷贝到本地的路径</code></li>
<li><code>-r</code> 表示递归拷贝整个目录<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/scp.png" alt="alt text"></li>
</ul>
</li>
<li><p><code>ssh</code>命令是远程登录主机电脑，相当于直接操作的是远程电脑。</p>
</li>
<li><p><code>scp</code>命令是可以把本机文件拷贝到远程主机，也可以把远程主机文件远程拷贝的本机，注意:拷贝文件夹需要加<code>-r</code>选项。</p>
</li>
<li><p>大量的文件上传和下载可以通过可视化工具<code>FileZilla</code>来完成。</p>
</li>
</ol>
<h5 id="软件安装和卸载"><a href="#软件安装和卸载" class="headerlink" title="软件安装和卸载"></a>软件安装和卸载</h5><table>
<thead>
<tr>
<th>安装方式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>离线安装：deb文件格式安装</td>
<td>从本地存储介质安装软件，使用Debian软件包格式安装软件</td>
</tr>
<tr>
<td>在线安装：apt-get方式安装</td>
<td>通过网络下载并安装软，使用apt-get命令从仓库安装软件</td>
</tr>
</tbody></table>
<ul>
<li>更改镜像源<br>因为使用 apt-get 命令默认是从国外的服务器下载安装软件的，会导致下载安装速度很慢，所以需要更改成国内的镜像源服务器</li>
<li>镜像源就是下载软件来源的服务器。</li>
<li>apt-get 方式卸载命令: sudo apt-get remove 安装包名</li>
</ul>
<h2 id="第四章-文件和文件系统"><a href="#第四章-文件和文件系统" class="headerlink" title="第四章 文件和文件系统"></a>第四章 文件和文件系统</h2><p>使用文件系统的三个步骤：分区、格式化、挂载</p>
<ul>
<li>Linux系统中把一切可以用字节流传输的都看作一个文件</li>
<li>Linux系统里面的文件系统类型ext2 xfs jfs ext3 ext4</li>
<li>Windows系统里的文件系统类型: ntfs fat32<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/unix_device.png" alt="alt text"><pre class="line-numbers language-text" data-language="text"><code class="language-text">第一块SATA硬盘./dev/sda
第二块SATA硬盘 /dev/sdb
fdisk /dev/sdb  分区指令
mkfs -t  ext4 /dev/sdb  格式化指令,-t参数表示要创建什么样的文件系统<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="Linux系统下的重要文件"><a href="#Linux系统下的重要文件" class="headerlink" title="Linux系统下的重要文件"></a>Linux系统下的重要文件</h3><ul>
<li><code>/etc/passwd</code>: 每个用户在该文件中都有一行记录，其中包含了用户的登录名、密码（通常是一个指向加密密码的指针）、用户ID、组ID、用户信息、用户主目录和默认shell等信息<ol>
<li>&#x2F;usr&#x2F;bin&#x2F;chsh可以改变默认用户登陆的shell</li>
<li>&#x2F;etc&#x2F;passwd和&#x2F;usr&#x2F;bin&#x2F;passwd是两个不同文件,一个是记录用户口令等信息的文本文件,另一个是改变用户口令的可执行文件</li>
</ol>
</li>
<li><code>/dev/null</code>是Unix和类Unix操作系统（包括Linux）中的一个特殊文件，也被称为“空设备”或“空设备文件”。<ol>
<li>这个文件的主要特点是会丢弃所有写入到它的数据，就好像这些数据进入了一个黑洞一样。同时，当你尝试从&#x2F;dev&#x2F;null读取数据时，它会立即返回一个文件结束（EOF）标记。</li>
<li>在命令行操作中，&#x2F;dev&#x2F;null常被用作丢弃不需要的输出。例如，当你运行一个命令但并不关心其输出时，你可以将输出重定向到&#x2F;dev&#x2F;null，这样命令的输出就不会显示在终端或写入到其他文件。这对于清理不需要的日志信息或避免在脚本中产生垃圾数据非常有用。</li>
<li>简单来说，&#x2F;dev&#x2F;null就像一个数据的“黑洞”，任何写入其中的数据都会消失无踪，而读取它则不会得到任何实际内容。</li>
</ol>
</li>
</ul>
<h3 id="mount挂载命令"><a href="#mount挂载命令" class="headerlink" title="mount挂载命令"></a><code>mount</code>挂载命令</h3><ul>
<li>mount [-t vfstype][-o options] device dir</li>
<li>vfstype :vfat(window fat32 format)、ext3、ext4、iso9660(cdrom format)<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mount</span> /dev/sdc1 /mnt
<span class="token function">umount</span> .mnt
<span class="token function">umount</span> /dev/sdc1<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/mount.png" alt="alt text"></li>
</ul>
<h3 id="Types-of-Files文件种类"><a href="#Types-of-Files文件种类" class="headerlink" title="Types of Files文件种类"></a>Types of Files文件种类</h3><ul>
<li><code>Simple/ordinary Files(普通文件)</code></li>
<li><code>Directory Files(目录文件)</code><br> 目录文件只包含两个字段:一个包含目录下的所有文件名,另一个是索引节点号<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/direct.png" alt="alt text"></li>
<li><code>Link Files(链接文件)</code><br>A Link File is created by the system when a symbolic linkin created to an existing file.</li>
<li><code>Special(Device) Files(设备文件)</code><br>A special File is a means of accessinghardware devicesincluding the keyboard, hard disk, Cb-ROM drive, tapedrive andprinter.<ol>
<li>character special files(字符设备)</li>
<li>block special files(块设备)</li>
</ol>
</li>
<li><code>Named Pipe(FIFO)</code><br>Tools that enable processes to communicate with each other</li>
<li>Socket(网络插口)</li>
</ul>
<h3 id="动态库和静态库文件"><a href="#动态库和静态库文件" class="headerlink" title="动态库和静态库文件"></a>动态库和静态库文件</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/image-20250214101357322.png" alt="image-20250214101357322"> </p>
<ul>
<li><p>widows下</p>
<ol>
<li>动态库.dll,不把代码打包进可执行文件,只是链接</li>
<li>静态库.o</li>
</ol>
</li>
<li><p>linux</p>
<ol>
<li>动态.so</li>
<li>静态.a</li>
</ol>
</li>
</ul>
<h3 id="Linux下的目录结构"><a href="#Linux下的目录结构" class="headerlink" title="Linux下的目录结构"></a>Linux下的目录结构</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/directory_struct.jpg" alt="alt text"></p>
<h3 id="和文件操作相关的命令"><a href="#和文件操作相关的命令" class="headerlink" title="和文件操作相关的命令"></a>和文件操作相关的命令</h3><ul>
<li><code>df</code>命令  显示分区使用情况(挂载)<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/df.png" alt="alt text"></li>
<li><code>du</code>命令  查看文件分配的存储空间大小<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/du.png" alt="alt text"><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">du</span> <span class="token parameter variable">-s</span> /etc
<span class="token comment"># 查看目录占用空间</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><code>mkdir</code>命令  创建目录<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> <span class="token parameter variable">-p</span> dira/dirb
参数p表示创建路径上的所有目录<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><code>rmdir</code>命令  只能删除空目录<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">mkdir</span> dira
<span class="token function">rmdir</span> dira<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><code>ls</code>命令 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">ls</span> <span class="token parameter variable">-a</span> 目录或文件名
参数a表示显示出所有以.开头的隐藏文件
<span class="token function">ls</span> <span class="token parameter variable">-l</span> 目录或文件名
参数l表示以列表的形式列出详细信息<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/ls-l.png" alt="alt text"><br>第一个字段第一个字符表示文件类型,<code>-</code>表示普通文件<br>第二个字段: 链接数,有多少个条目指向了这个文件的索引节点<br>第三个字段:所属用户<br>第四个字段:所属组<br>第五个字段:大小(以字节为单位)<br>第六个字段:文件最后修改时间<br>第七个字段:文件名<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/Determining_File_Attributes.png" alt="alt text"></li>
<li><code>touch</code>命令  创建文件或修改文件最后修改时间<br>如果文件不存在,则创建文件,否则修改最后修改时间</li>
<li><code>rm</code>命令  删除文件或目录<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">rm</span> <span class="token parameter variable">-i</span> file1
参数i表示交互式的
<span class="token function">rm</span> <span class="token parameter variable">-rf</span> dirb
参数r表示递归删除子目录在删除所有文件
参数f表示强制删除<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><code>mv</code>命令  移动文件或者文件重命名</li>
<li><code>file</code>命令  查看文件详细信息</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/file.png" alt="alt text"></p>
<h3 id="逻辑卷管理-好处-可以动态扩充"><a href="#逻辑卷管理-好处-可以动态扩充" class="headerlink" title="逻辑卷管理(好处:可以动态扩充)"></a>逻辑卷管理(好处:可以动态扩充)</h3><ul>
<li>挂载: 把一个硬件设备和对应的目录关联起来</li>
<li>硬盘变成可用存储空间要经过三步<ol>
<li>分区</li>
<li>格式化</li>
<li>挂载</li>
</ol>
</li>
<li>逻辑卷管理软件工具:用多块硬盘上的分区虚拟成一个分区</li>
</ul>
<p> 逻辑卷管理软件工具，如逻辑卷管理器（LVM），允许用户将多块硬盘上的分区虚拟成一个分区，从而更有效地管理和使用硬盘资源。以下是使用LVM将多块硬盘上的分区虚拟成一个分区的基本步骤：</p>
<ol>
<li><strong>准备磁盘并标记物理卷</strong>：首先，你需要准备要进行逻辑卷管理的硬盘分区，并将这些分区标记为物理卷。物理卷是LVM管理的基本单位，可以是一个硬盘分区或者整个硬盘。</li>
<li><strong>创建卷组</strong>：接下来，你需要创建一个卷组。卷组是由一个或多个物理卷组成的集合，它提供了逻辑卷管理的框架。</li>
<li><strong>创建逻辑卷</strong>：在卷组中，你可以创建逻辑卷。逻辑卷是最终提供给操作系统使用的虚拟分区，它们可以跨多个物理卷或卷组。</li>
<li><strong>格式化逻辑卷</strong>：创建逻辑卷后，你需要对其进行格式化，以便操作系统可以识别和使用。</li>
<li><strong>挂载逻辑卷</strong>：最后，将逻辑卷挂载到操作系统的文件系统中，这样你就可以像访问其他分区一样访问逻辑卷上的数据。</li>
</ol>
<p>此外，LVM还提供了许多其他功能，如逻辑卷的扩容、缩小、迁移和备份等，这些都可以在不中断数据访问的情况下进行。</p>
<h2 id="第五章-文件安全"><a href="#第五章-文件安全" class="headerlink" title="第五章 文件安全"></a>第五章 文件安全</h2><h3 id="1-Protection-based-on-AccessPermission"><a href="#1-Protection-based-on-AccessPermission" class="headerlink" title="1.Protection based on AccessPermission"></a>1.Protection based on AccessPermission</h3><ul>
<li>Types of users <ol>
<li>User&#x2F;owner(文件拥有者)</li>
<li>groups(同组用户)</li>
<li>others(其他人)</li>
</ol>
</li>
<li>Types of Access Permissions<ul>
<li>Read, write, and execute(执行)</li>
</ul>
</li>
<li>Access Permissions for Directories<ul>
<li>Read: list the files</li>
<li>Write: create or remove directories and files</li>
</ul>
</li>
</ul>
<p>所以,对于每个文件,三个身份和三种权限组成九个权限位<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/file_permission.png" alt="alt text"></p>
<ul>
<li>目录也有权限<ol>
<li>目录的x执行权限:所有要进入到目录里的操作,包括(<code>cd</code>命令,<code>touch</code>命令,删除目录里的文件)<br>目录文件只包含两个字段:一个包含目录下的所有文件名,另一个是索引节点号<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 想要查看目录权限要加参数d</span>
<span class="token function">ls</span> <span class="token parameter variable">-ld</span> dira<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/ls_view_dir.png" alt="alt text"></li>
</ol>
</li>
</ul>
<h3 id="2-改变权限或者所属组的命令"><a href="#2-改变权限或者所属组的命令" class="headerlink" title="2. 改变权限或者所属组的命令"></a>2. 改变权限或者所属组的命令</h3><ul>
<li><code>chgrp  组1 文件或目录路径</code>: 改变组</li>
<li><code>chown newowner 文件</code>: 改变所属用户</li>
<li><code>id user</code>: Find the user id</li>
<li><code>group user</code>: Find the user group</li>
</ul>
<h3 id="3-Changing-File-Access-Privileges"><a href="#3-Changing-File-Access-Privileges" class="headerlink" title="3.Changing File Access Privileges"></a>3.Changing File Access Privileges</h3><p><code>chmod  权限语句 文件或目录对象</code>命令:改变文件权限位<br>权限语句由三部分组成:</p>
<ul>
<li>例如 <code>u-x</code><br>第一部分是要修改谁的权限:a表示所有,u表示owner,g表示group,o表示others,ugo也表示所有<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/chmod.png" alt="alt text"></li>
<li>也可以用八进制数来代替权限语句,能够一次性设定所有文件权限位<br>如要给一个文件设置rwxr-x—权限,每三位(111 101 000)转化成八进制数就是750,所以命令就是<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">chmod</span> <span class="token number">750</span> hello<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/rm_file_withoutpermisn.png" alt="alt text"></li>
</ul>
<h3 id="Default-file-access-privileges-默认文件权限"><a href="#Default-file-access-privileges-默认文件权限" class="headerlink" title="Default file access privileges 默认文件权限"></a>Default file access privileges 默认文件权限</h3><ul>
<li>通过掩码值umask来设定默认访问权限</li>
<li><code>umask</code>命令  <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 显示掩码值</span>
input: <span class="token builtin class-name">umask</span>
ouput: 0022
<span class="token comment"># 设置掩码值</span>
input: <span class="token builtin class-name">umask</span> 077<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>umask怎么决定文件访问权限<ol>
<li>The access permission value onexecutable file or directory iscomputed by(针对目录或者可执行文件): <code>file access permission=777-mask</code></li>
<li>The access permission value on otherfile is computed by(对于普通文件):<code>file access permission = 666-mask</code><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/umask01.png" alt="alt text"></li>
</ol>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/umask02.png" alt="alt text"></p>
<h3 id="三个特殊权限位"><a href="#三个特殊权限位" class="headerlink" title="三个特殊权限位"></a>三个特殊权限位</h3><ul>
<li><p><code>SUID</code>位<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/suid.png" alt="alt text"><br>If this bit is set for a file containing an executable program for a command,the command takes on the privileges of the owner of the file when it executes.</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置suid位 --<span class="token operator">></span>
<span class="token function">sudo</span> <span class="token function">chmod</span> u+s /usr/bin/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
</li>
<li><p><code>SGID</code>位<br>执行命令时,会把身份临时切换成同组成员(groups)</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置sgid位 --<span class="token operator">></span>
<span class="token function">sudo</span> <span class="token function">chmod</span> g+s /usr/bin/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li><p><code>STICKY</code>黏着位(对于目录)<br> 设置黏着位意味着在对于一些共享目录(所有人都能创建文件)时,不同用户只能删除自己的文件</p>
 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token operator">&lt;</span><span class="token operator">!</span>-- 设置/取消设置黏着位 --<span class="token operator">></span>
<span class="token function">chmod</span> +t /tmp
<span class="token function">chmod</span> <span class="token parameter variable">-t</span> /tmp<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h2 id="第六章-File-Processing"><a href="#第六章-File-Processing" class="headerlink" title="第六章 File Processing"></a>第六章 File Processing</h2><h3 id="view-complete-file"><a href="#view-complete-file" class="headerlink" title="view complete file"></a>view complete file</h3><h4 id="显示文件全部内容"><a href="#显示文件全部内容" class="headerlink" title="显示文件全部内容"></a>显示文件全部内容</h4><ul>
<li><code>cat</code>命令 <ol>
<li>参数<code>n</code>: 显示行号</li>
<li><code>cat</code>命令不加文件时,默认从标准输入中读取数据(等待键盘输入)</li>
</ol>
</li>
<li><code>nl</code>命令</li>
</ul>
<h4 id="分页查看文本文件"><a href="#分页查看文本文件" class="headerlink" title="分页查看文本文件"></a>分页查看文本文件</h4><ul>
<li><code>more</code>或<code>less</code>命令<ol>
<li>输入<code>/s22</code>会在文件中查找s22相对应文字</li>
<li>按Q退出</li>
</ol>
</li>
<li><code>od</code>命令 显示不可见字符<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/od.png" alt="alt text"><ol>
<li>参数<code>-c</code>表示以字符形式显示,例如空行会变成<code>\n</code></li>
<li><code>-h</code>以十六进制显示</li>
</ol>
</li>
</ul>
<h4 id="Viewing-the-head-or-tail-of-a-file"><a href="#Viewing-the-head-or-tail-of-a-file" class="headerlink" title="Viewing the head or tail of a file"></a>Viewing the head or tail of a file</h4><ul>
<li><code>head</code>默认显示文件前五行<ol>
<li>参数<code>-n5</code>表示显示文件开头前5行,数字可任意改,<code>n</code>可以不写</li>
</ol>
</li>
<li><code>tail</code>默认显示文件最后五行<ol>
<li>参数<code>-5</code>表示显示文件开头前5行,数字可任意改</li>
<li>参数<code>-f</code>实时刷新 ctrl+c退出</li>
</ol>
</li>
<li><code>wc</code> 查看文件大小的命令(Determining file size)<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/wc.png" alt="alt text"><ol>
<li>参数<code>-l</code>表示只显示行数</li>
<li><code>-w</code>只显示单词数</li>
<li><code>-c</code>表示只显示字符数<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">wc</span> <span class="token parameter variable">-l</span> /tmp/hello.cpp

<span class="token comment"># 查看系统里有多少个用户</span>
<span class="token function">wc</span> <span class="token parameter variable">-l</span> /etc/passwd<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ol>
</li>
</ul>
<h4 id="比较两个文本文件"><a href="#比较两个文本文件" class="headerlink" title="比较两个文本文件"></a>比较两个文本文件</h4><ul>
<li><code>diff</code>命令<br>diff [options] [file1] [file2]</li>
</ul>
<h3 id="查找文件命令"><a href="#查找文件命令" class="headerlink" title="查找文件命令"></a>查找文件命令</h3><h4 id="普通文件"><a href="#普通文件" class="headerlink" title="普通文件"></a>普通文件</h4><ul>
<li><code>find</code>命令</li>
<li><code>find</code> 后面跟一个目录,表示在此目录中寻找,  </li>
<li>expression:<ul>
<li><code>-name</code> pattern</li>
<li><code>-size</code> +&#x2F;-N  加号&#x2F;减号表示 大小&#x2F;小于 大于N的文件</li>
<li><code>-exec</code> or <code>-ok</code> CMD 表示对find找到的结果每一个都执行一条命令CMD,exec和ok的区别在于ok每一次都要询问 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">find</span> /tmp  <span class="token punctuation">\</span><span class="token punctuation">(</span> <span class="token parameter variable">-name</span> <span class="token string">"*.txt"</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-size</span> <span class="token number">0</span> <span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token parameter variable">-exec</span> <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token punctuation">&#123;</span><span class="token punctuation">&#125;</span> <span class="token punctuation">\</span><span class="token punctuation">;</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
 <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/find_exec.png" alt="alt text"></li>
<li><code>\( 组合 \)</code> 使用括号来把多个条件组合在一起 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">find</span> /tmp  <span class="token punctuation">\</span><span class="token punctuation">(</span> <span class="token parameter variable">-name</span> <span class="token string">"*.txt"</span> <span class="token parameter variable">-a</span> <span class="token parameter variable">-size</span> <span class="token number">0</span> <span class="token punctuation">\</span><span class="token punctuation">)</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
</ul>
</li>
</ul>
<ol>
<li>通配符的使用,通配符是一种特殊语句，主要有星号(*)和问号(?)，用来模糊搜索文件</li>
</ol>
<table>
<thead>
<tr>
<th>通配符</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>代表0个或多个任意字符</td>
</tr>
<tr>
<td>?</td>
<td>代表任意一个字符</td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/find.png" alt="alt text"><br>通配符不仅能结合 find 命令使用，还可以结合其它命令使用,比如: ls、mv、cp 等，这里需要注意只有find命令使用通配符需要加上引号。<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/dev_null.png" alt="alt text"></p>
<h4 id="命令文件"><a href="#命令文件" class="headerlink" title="命令文件"></a>命令文件</h4><ul>
<li><code>whereis</code> 查找命令文件，会找出可执行文件的位置和帮助文档的位置</li>
<li><code>which</code> 查找命令文件</li>
</ul>
<h3 id="对文件内容操作"><a href="#对文件内容操作" class="headerlink" title="对文件内容操作"></a>对文件内容操作</h3><h4 id="去掉重复内容"><a href="#去掉重复内容" class="headerlink" title="去掉重复内容"></a>去掉重复内容</h4><ul>
<li><code>uniq</code>命令<br>uniq命令只能除去中间没有其他行的重复行</li>
<li>参数<ol>
<li><code>-c</code> 统计连续重复出现的次数</li>
<li><code>-d</code> 显示重复的行</li>
<li><code>uniq 源文件名a 文件名b</code>表示把去重结果输出到文件中<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/uniq.png" alt="alt text"></li>
</ol>
</li>
</ul>
<h4 id="sort对文件内容进行排序"><a href="#sort对文件内容进行排序" class="headerlink" title="sort对文件内容进行排序"></a><code>sort</code>对文件内容进行排序</h4><ul>
<li><code>sort</code> 排序</li>
<li>参数<ul>
<li><code>-k3</code> 表示按第3个字段来排序</li>
<li><code>-n</code> 默认按字符串来排，看编码，想要把字段当作数字来排序，加参数<code>-n</code></li>
<li><code>-r</code> 逆序排列 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sort</span> <span class="token parameter variable">-nrk4</span> /tmp/student_record<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><code>-t&quot;分隔符&quot;</code> sort命令默认按空格分割字段，参数<code>-t</code>可以切换分隔符 <pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">sort</span> <span class="token parameter variable">-nrk4</span> -t<span class="token string">":"</span> /tmp/student_record<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><code>-f</code> 表示不区分大小写</li>
</ul>
</li>
</ul>
<h4 id="cut命令剪切文件内容"><a href="#cut命令剪切文件内容" class="headerlink" title="cut命令剪切文件内容"></a><code>cut</code>命令剪切文件内容</h4><ul>
<li>cut -blist [-n][file-list]</li>
<li>cut -clist [file-list]</li>
<li>cut -flist [-dchar][-s][file-list]</li>
<li>参数<ul>
<li><code>-f参数1,参数2...</code>  表示切割出第（参数）列字段</li>
<li><code>-d&quot;分隔符&quot;</code> <code>cut</code>命令默认使用<code>TAB制表符</code>来作为分隔符，加<code>-d</code>参数可以修改分隔符<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">cut</span> -d<span class="token string">":"</span> <span class="token parameter variable">-f2</span> /etc/passwd <span class="token operator">|</span> <span class="token function">head</span> <span class="token parameter variable">-3</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre></li>
<li><code>-c参数1,参数2</code> 表示切割出第（参数）列字符</li>
</ul>
</li>
</ul>
<h4 id="拼接命令"><a href="#拼接命令" class="headerlink" title="拼接命令"></a>拼接命令</h4><ul>
<li><code>paste 文件a 文件b</code>命令 简单的把文件a和b按行拼接，第一行拼第一行…</li>
<li><code>join</code>命令 实现按关键字拼接</li>
</ul>
<h4 id="查找文件内容"><a href="#查找文件内容" class="headerlink" title="查找文件内容"></a>查找文件内容</h4><p><code>grep</code>命令: 查找或搜索文件内容</p>
<ul>
<li><code>grep</code> 查找内容 文件名</li>
</ul>
<ol>
<li>grep命令及选项的使用</li>
</ol>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>-v</td>
<td>显示不包含匹配文本的所有行</td>
</tr>
<tr>
<td>-n</td>
<td>显示匹配行号</td>
</tr>
<tr>
<td>-i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>-l</td>
<td>只列出包含内容的文件列表，不关心内容</td>
</tr>
<tr>
<td>-c</td>
<td>只计数，对每个文件进行计数操作</td>
</tr>
</tbody></table>
<ol start="2">
<li>grep命令结合正则表达式使用</li>
</ol>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>^</td>
<td>(行)以指定字符开头</td>
</tr>
<tr>
<td>$</td>
<td>(行)以指定字符结尾</td>
</tr>
<tr>
<td>.</td>
<td>匹配任意一个非换行符的字符</td>
</tr>
<tr>
<td>*</td>
<td>代表前一个字符可以出现一次或者任意多次</td>
</tr>
<tr>
<td>[]</td>
<td>代表集合的意思,eg. [Hh]ello</td>
</tr>
<tr>
<td><code>[^]</code></td>
<td>方括号里上箭头表示取反,匹配除了括号里的其他所有字符</td>
</tr>
<tr>
<td><code>\&lt;</code></td>
<td>表示一个单词的开头,或者可以用grep的参数<code>-w</code></td>
</tr>
<tr>
<td><code>\&gt;</code></td>
<td>表示一个单词的结束</td>
</tr>
<tr>
<td><code>\&#123;a,b\&#125;</code></td>
<td>表示前一个字符出现a到b次,a为0表示至多出现b次,b不填表示至少出现a次以上</td>
</tr>
<tr>
<td><code>| </code></td>
<td>表示或,要用grep的升级版egrep</td>
</tr>
<tr>
<td><code>?</code></td>
<td>出现一次或者不出现</td>
</tr>
<tr>
<td><code>+</code></td>
<td>表示前一个字符至少出现一次</td>
</tr>
<tr>
<td><code>()</code></td>
<td>Grouping</td>
</tr>
<tr>
<td><code>\</code></td>
<td>转义斜杠</td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/re.png" alt="alt text"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/grep.png" alt="alt text"></p>
<ul>
<li>通过 grep 命令可以在指定文件中查找指定搜索内容，这里扩展一下，grep 还可以查找管道中的内容<br>比如:ls&#x2F;| grep ‘lib’</li>
<li>在使用 grep 命令时，还可以省略查找内容的引号比如:ls&#x2F;| grep lib , grep hello 1.txt</li>
</ul>
<h4 id="对文本批量修改"><a href="#对文本批量修改" class="headerlink" title="对文本批量修改"></a>对文本批量修改</h4><ul>
<li><code>sed</code>流处理<br> 对文件流水线处理,读一行处理一行sed ‘[address]command’ filename(s)<ul>
<li>根据行号选中行处理<ol>
<li><code>d</code> 删除操作对1到3行进行删除操作<code>sed &#39;1,3d&#39; filename</code></li>
</ol>
</li>
<li>根据正则表达式选中包含匹配项的行处理,<code>sed &#39;/正则表达式/&#39; file</code><ol>
<li><code>s</code>替换操作 对计算机系CS的学生替换成EECS<code>sed &#39;s/&lt;CS/EECS/&#39; file</code></li>
<li><code>s///g</code>全局替换操作 把数字替换成*屏蔽成绩<code>sed &#39;s/[0-9]/*/g&#39; file</code></li>
<li><code>p</code>打印前三行<code>sed &#39;1,3p&#39; file</code></li>
<li><code>a</code>在匹配行后加一行内容<code>sed &#39;/\&lt;CS/a =====High Salary=====&#39; file</code></li>
<li><code>i</code>在匹配后前加一行内容<code>sed &#39;/\&lt;CS/i =====High Salary=====&#39; file</code></li>
<li><code>!</code>否定</li>
</ol>
</li>
<li><code>-n</code>参数 表示只执行操作,不默认输出缓冲区</li>
<li><code>-i</code>参数（或 <code>--in-place</code>）是一个非常重要的选项，它允许你直接修改输入文件，而不是仅仅将结果发送到标准输出。</li>
</ul>
<ul>
<li><code>sed</code>格式<br>  <code>sed &#39;/正则表达式/s#原文#替换文本#&#39;</code><br>  <code>sed &#39;/^[[:space:]]*$/d&#39; output_sort.txt</code>严格删除所有空行<code>[[:space:]]</code>这是sed中的一个字符类，表示空白字符。它匹配任何空白字符，如空格、制表符、换行符、回车符等</li>
</ul>
</li>
<li><code>awk</code>命令<ul>
<li><code>awk</code>命令里的正则表达式格式为<code>awk &#39;/re/&#39; filename</code><br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/awk01.png" alt="alt text"></li>
<li>在awk命令中,美元符号表示字段的意思<code>$</code><br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/awk_$.png" alt="alt text"></li>
<li><code>F</code>参数指定分割符<ul>
<li>默认情况下，awk 使用空格或制表符作为字段分隔符</li>
<li>如果你有一个以逗号, 分隔的文件，并希望使用 awk 来处理它，你可以这样指定分隔符:<code>awk -F, &#39;&#123;print $1, $2&#125;&#39; filename</code></li>
<li>如果有都多个分隔符,用<code>[]</code>括起来,例如<code>-F&#39;[ab]&#39;</code></li>
</ul>
</li>
<li><code>$1~</code>字段匹配<ul>
<li><code>awk &#39;$2~/^D/&#123;print $1,$2&#125;&#39;</code>表示对字段2进行匹配,如果是以D开头的,就打印字段1,字段2</li>
<li><code>awk &#39;$2!~/^D/&#123;print $1,$2&#125;&#39;</code>表示对字段2不进行匹配以D开头的,就打印字段1,字段2</li>
</ul>
</li>
<li><code>过滤</code>条件<ul>
<li><code>awk -F: &#39;$3 &gt;= 1000 &amp;&amp; $3 &lt;= 2000 &#123;print $1, $3&#125;&#39; /etc/passwd</code>要显示用户ID在1000到2000之间的用户名，您可以使用awk来过滤&#x2F;etc&#x2F;passwd文件。$3 &gt;&#x3D; 1000 &amp;&amp; $3 &lt;&#x3D; 2000 是一个条件，它检查第三个字段（用户ID）是否在1000到2000之间（包括1000和2000）。</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">awk</span> <span class="token string">'/\&lt;CS/&#123;print $1,$2&#125;'</span> /tmp/student_record

<span class="token function">awk</span> <span class="token string">'$2~/^D/&#123;print $1,$2&#125;'</span>
<span class="token comment"># $2~/^D/：这是一个条件，它检查第二列（由字段分隔符分隔，默认为空格或制表符）是否以字母 "D" 开头,~ 是 awk 中用于模式匹配的操作符</span>

<span class="token function">awk</span> -F: <span class="token string">'$2 !~ /916/ &#123;print $1&#125;'</span> /tmp/donors
<span class="token comment">#这条命令将根据冒号分隔符(:)来解析文件中的内容，并打印出第二个字段中不包含916区号的人的名字。</span>

<span class="token function">awk</span> <span class="token string">'&#123;print NR ": " $0&#125;'</span> /tmp/donors
<span class="token comment"># 请将"文件名"替换为您要处理的文件名。这条命令将打印出每条记录的行号（记录号）后面跟着记录的内容。记录号由NR内置变量提供，表示当前处理的记录的序号。</span>

 <span class="token function">awk</span>  -F<span class="token string">'[: ]'</span> <span class="token string">'$7 &lt;= 85 &#123;print $1,$2,$4&#125;'</span> /tmp/donors<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><code>tr</code>命令(映射替换)<ul>
<li>tr 被映射域 映射域(可用区间表示)<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/tr.png" alt="alt text"></li>
</ul>
</li>
</ul>
<h3 id="文件解压缩"><a href="#文件解压缩" class="headerlink" title="文件解压缩"></a>文件解压缩</h3><ul>
<li><p><code>gzip</code> 只能保留压缩或者未压缩二选一</p>
<ul>
<li>压缩命令格式<code>gzip filename</code></li>
<li>解压格式<code>gzip -d ziped_filename</code></li>
</ul>
</li>
<li><p><code>bzip2</code> .bz2后缀</p>
<ul>
<li>压缩命令格式<code>bzip2 filename</code></li>
<li>解压格式<code>bzip2 -d ziped_filename</code></li>
</ul>
</li>
<li><p><code>Linux</code>下文本文件和<code>Windows</code>下文本文件不同:<br> <code>Windows</code>下文本文件会每行包含一个<code>\r</code><br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/linuxtxt_dif_windows.png" alt="alt text"></p>
</li>
</ul>
<h2 id="第七章-vim的使用"><a href="#第七章-vim的使用" class="headerlink" title="第七章 vim的使用"></a>第七章 vim的使用</h2><h3 id="7-1-vim的三种模式"><a href="#7-1-vim的三种模式" class="headerlink" title="7.1 vim的三种模式"></a>7.1 vim的三种模式</h3><ol>
<li>命令模式<br>命令模式下按i进入编辑模式（插入模式）</li>
<li>插入模式<br>在此模式下编辑文件内容，按esc退出，进入末行模式</li>
<li>末行模式<br>在此模式下输入<code>:q</code>表示直接退出，<code>:q！</code>强制退出<br><code>w</code>表示保存，<code>wq</code>保存且退出</li>
</ol>
<h3 id="7-2-vim的常用命令"><a href="#7-2-vim的常用命令" class="headerlink" title="7.2 vim的常用命令"></a>7.2 vim的常用命令</h3><table>
<thead>
<tr>
<th>快捷键</th>
<th>功能说明</th>
</tr>
</thead>
<tbody><tr>
<td>yy</td>
<td>复制当前行</td>
</tr>
<tr>
<td>p</td>
<td>粘贴</td>
</tr>
<tr>
<td>dd</td>
<td>删除当前行</td>
</tr>
<tr>
<td>v</td>
<td>普通视图模式</td>
</tr>
<tr>
<td>u</td>
<td>撤销</td>
</tr>
<tr>
<td>ctrl+r</td>
<td>重做,反撤销</td>
</tr>
<tr>
<td>g</td>
<td>跳到文件头</td>
</tr>
<tr>
<td>G</td>
<td>跳到文件尾</td>
</tr>
<tr>
<td>数字+G</td>
<td>跳转到指定行</td>
</tr>
<tr>
<td>&#x2F;关键词</td>
<td>向下查找关键词</td>
</tr>
<tr>
<td>:&#x2F;搜索的内容</td>
<td>搜索指定内容</td>
</tr>
<tr>
<td>?关键词</td>
<td>向上查找关键词</td>
</tr>
<tr>
<td>n</td>
<td>查找下一个</td>
</tr>
<tr>
<td>N</td>
<td>查找上一个</td>
</tr>
<tr>
<td>:%s&#x2F;原字符串&#x2F;新字符串&#x2F;g</td>
<td>全局替换</td>
</tr>
<tr>
<td>:开始行数,结束行数s&#x2F;原字符串&#x2F;新字符串&#x2F;g</td>
<td>局部替换</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>快捷键</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><code>.</code></td>
<td>重复上一次命令操作</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>跳至基地</td>
</tr>
<tr>
<td><code>shift</code>+<code>6</code></td>
<td>切换成蓝色主题的外观</td>
</tr>
<tr>
<td><code>shift</code>+<code>4</code></td>
<td>回到浅灰色主题</td>
</tr>
<tr>
<td><code>ctrl</code>+<code>f</code></td>
<td>回到黑暗主题</td>
</tr>
<tr>
<td><code>ctrl</code>+<code>b</code></td>
<td>上传一屏</td>
</tr>
</tbody></table>
<h2 id="第八章-File-Share"><a href="#第八章-File-Share" class="headerlink" title="第八章 File Share"></a>第八章 File Share</h2><h3 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h3><ul>
<li><p><code>ln 源文件名  链接文件名</code><br> 修改链接文件的内容,原文件也会改变</p>
</li>
<li><p>不能跨文件系统(设备)创建链接,也不能对目录创建硬链接</p>
</li>
<li><p>创建硬链接文件,链接文件与原文件分配同样的索引节点号(文件系统)</p>
</li>
</ul>
<h3 id="软链接"><a href="#软链接" class="headerlink" title="软链接"></a>软链接</h3><ul>
<li><code>ln -s 源文件名  链接文件名</code><br> 分配<strong>不同于源文件的索引节点</strong>,当访问链接文件时,先去根据索引节点号找到链接文件所在硬盘位置,访问<strong>链接文件内容(源文件路径信息等)<strong>找到源文件,在根据源文件的文件名和索引节点号找到源文件索引节点,从而找到</strong>源文件路径,对源文件进行访问</strong>。<code>要访问两次硬盘</code></li>
</ul>
<h2 id="第九章-重定向和管道"><a href="#第九章-重定向和管道" class="headerlink" title="第九章 重定向和管道"></a>第九章 重定向和管道</h2><h3 id="1-文件描述符表"><a href="#1-文件描述符表" class="headerlink" title="1.文件描述符表"></a>1.文件描述符表</h3><p><strong>文件描述符表</strong>（File Descriptor Table）是操作系统中用于管理打开的文件、套接字、管道等文件类型对象的一种数据结构。在Unix和类Unix系统（如Linux）中，每一个进程都有一个与之关联的文件描述符表。</p>
<ol>
<li><strong>文件描述符</strong>：这是一个非负整数，用于在进程中唯一地标识一个打开的文件或套接字。例如，当你使用<code>open()</code>函数打开一个文件时，系统会返回一个文件描述符。</li>
<li><strong>文件描述符表</strong>：这个表是一个数组，其索引是文件描述符，数组的元素是指向打开文件的指针（在更底层，这通常是一个指向文件表项的指针）。</li>
<li><strong>文件表</strong>：每个打开的文件在内核中都有一个对应的文件表项（也称为v-node或inode）。这个表项包含了文件的详细信息，如文件的大小、访问权限、偏移量等。</li>
<li><strong>关系</strong>：文件描述符表是进程级别的，而文件表是系统级别的。一个文件表项可以被多个进程共享（通过不同的文件描述符），但每个进程都有自己的文件描述符表。</li>
<li><strong>操作</strong>：当进程执行如<code>read()</code>、<code>write()</code>等系统调用时，它会使用文件描述符作为参数。系统会根据文件描述符在文件描述符表中查找对应的文件表项，并执行相应的操作。</li>
<li><strong>关闭文件</strong>：当进程使用<code>close()</code>系统调用关闭一个文件时，它实际上是在文件描述符表中删除对应的条目，而不是删除文件表项。只有当所有引用该文件的进程都关闭了该文件时，文件表项才会被释放。</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/file_desc_specl.png" alt="alt text"></p>
<ul>
<li>有三个特殊的文件描述符,是系统自动打开的<ol>
<li>标准输入描述符<code>stdin</code> 0</li>
<li>标准输出描述符<code>stdout</code> 1</li>
<li>标准错误输出描述符<code>stderr</code> 2</li>
</ol>
</li>
</ul>
<h3 id="2-重定向"><a href="#2-重定向" class="headerlink" title="2.重定向"></a>2.重定向</h3><h4 id="2-1标准输出重定向"><a href="#2-1标准输出重定向" class="headerlink" title="2.1标准输出重定向"></a>2.1标准输出重定向</h4><ul>
<li>格式: <code>command &lt; input_file</code></li>
<li>例子 把&#x2F;tmp&#x2F;studnet_record 里的所有小写字母变成大写<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/input_rediect.png" alt="alt text"></li>
</ul>
<h4 id="2-2标准输出重定向"><a href="#2-2标准输出重定向" class="headerlink" title="2.2标准输出重定向"></a>2.2标准输出重定向</h4><p>重定向也称为输出重定向，把在终端执行命令的结果保存到目标文件。</p>
<ul>
<li>格式: <code>command &gt; output_file</code></li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>&gt;</td>
<td>如果文件存在，会覆盖原有文件内容，相当于文件操作中的’w’模式</td>
</tr>
<tr>
<td>&gt;&gt;</td>
<td>如果文件存在，会追加写入文件末尾，相当于文件操作中的’a’模式</td>
</tr>
</tbody></table>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E9%87%8D%E5%AE%9A%E5%90%91.png" alt="alt text"></p>
<ul>
<li>可以使用输出重定向合并文件<ol>
<li>按列合并 cat filea fileb &gt; newfile</li>
<li>按行合并 paste filea fileb &gt; newfile</li>
</ol>
</li>
</ul>
<h4 id="2-2标准错误输出重定向"><a href="#2-2标准错误输出重定向" class="headerlink" title="2.2标准错误输出重定向"></a>2.2标准错误输出重定向</h4><ul>
<li>格式: <code>2 &gt; output_file</code><br> <code>2</code>表示标准错误输出</li>
<li>使用pipe出现错误输出时,<code>2&gt;/dev/null</code>放在出现错误命令的后面</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/stderr.png" alt="alt text"></p>
<ul>
<li><code>/dev/null</code> 空设备,一般不关心的错误输出就丢到空设备文件中</li>
</ul>
<h4 id="多种重定向结合"><a href="#多种重定向结合" class="headerlink" title="多种重定向结合"></a>多种重定向结合</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">find</span> /tmp <span class="token parameter variable">-name</span> <span class="token string">"*.cpp"</span> <span class="token operator"><span class="token file-descriptor important">2</span>></span>/dev/null <span class="token operator">></span>result 
<span class="token comment"># 即丢弃结果也保存正常输出文件</span>

<span class="token function">find</span> /tmp <span class="token parameter variable">-name</span> <span class="token string">"*.cpp"</span> <span class="token operator">>&amp;</span>result 
<span class="token comment"># 把标准输出和标准错误输出都保存到文件result中</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><p>Redirecting stdin and stdout in OneCommand<br> Command <input-file> out-file</input-file></p>
</li>
<li><p>Redirecting stdout and stderr in OneCommand<br> Command &gt;out-file 2&gt;err-file<br> Command &gt;out-file 2&gt;&amp;1<br> Command &gt;&amp; out-file</p>
</li>
</ul>
<h3 id="进程间通信的方式"><a href="#进程间通信的方式" class="headerlink" title="进程间通信的方式"></a>进程间通信的方式</h3><ul>
<li>匿名管道：是一种半双工的通信方式，只能在有亲缘关系的进程之间使用。管道可以实现在一个进程中生成输出，而在另一个进程中读取该输出</li>
<li>命名管道：是一种有名的FIFO文件，在文件系统中以文件形式存在，可以在不相关的进程之间进行通信</li>
<li>消息队列：是一种进程间通信的方式，一方发送消息到队列，而另一方则从队列中接收消息</li>
<li>信号量：用于进程间的同步与互斥，可以实现进程对临界资源的访问控制</li>
<li>信号：是一种异步的通知机制，用于通知进程发生了某种事件，比如接收到了某种信号或者错误</li>
<li>共享内存：是一种高效的进程间通信方式，多个进程可以共享同一块内存区域，以实现数据的共享</li>
<li>socket：是一种网络编程的通信方式，通过网络套接字实现不同主机的进程间通信</li>
</ul>
<h3 id="KISS原则"><a href="#KISS原则" class="headerlink" title="KISS原则"></a><code>KISS</code>原则</h3><p>Linux设计时,遵循<code>KISS(Keep It Simple Stupid)</code>原则</p>
<h3 id="匿名-管道命令"><a href="#匿名-管道命令" class="headerlink" title="(匿名)管道命令"></a>(匿名)管道命令</h3><p>管道<code>|</code>相当于一个容器,可以把命令执行的结果存储到里面,在释放出来</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">tree /bin/ <span class="token operator">|</span> <span class="token function">more</span>
<span class="token comment"># 统计当前登陆主机人数</span>
<span class="token function">who</span> <span class="token operator">|</span> <span class="token function">wc</span> <span class="token parameter variable">-l</span> 

<span class="token function">du</span> /tmp/* <span class="token operator"><span class="token file-descriptor important">2</span>></span> /dev/null <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-k1</span> <span class="token operator">|</span> <span class="token function">tail</span> -3<span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'&#123;print$2&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>tee</code>命令<br> 接收上一条命令的输出,拷贝保存到一个文件中,并把输出传入下一个管道命令的输入<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/tee.png" alt="alt text"></li>
</ul>
<h3 id="命名管道FIFOs"><a href="#命名管道FIFOs" class="headerlink" title="命名管道FIFOs"></a>命名管道FIFOs</h3><ul>
<li><p>FIFOs（命名管道）可用于系统上两个进程之间的通信。它们允许两个进程在系统上独立执行时进行通信，而不像普通管道那样只能在同一个进程内进行通信。</p>
</li>
<li><p>FIFOs（命名管道）是在磁盘上创建的，并且有一个类似文件名的名称。这意味着像操作文件一样，必须先创建并打开 FIFOs（命名管道）才能用于进程间通信。</p>
</li>
<li><p>可以在独立执行的程序之间使用 FIFOs（命名管道），这使得它成为进程间跨应用程序通信的一种有效方式。</p>
</li>
</ul>
<h4 id="FIFOs的使用"><a href="#FIFOs的使用" class="headerlink" title="FIFOs的使用"></a>FIFOs的使用</h4><ul>
<li><code>mkfifo [option] file-list</code>创建命名管道命令<ul>
<li><code>-m 八进制权限数</code> 参数用来设定管道文件的权限<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/fifo.png" alt="alt text"></li>
</ul>
</li>
</ul>
<h2 id="第十章-进程Processing"><a href="#第十章-进程Processing" class="headerlink" title="第十章 进程Processing"></a>第十章 进程Processing</h2><ul>
<li><code>进程</code>就是程序的一次运行</li>
<li>A process is a program in execution</li>
<li>A process is created every time you run an external command and is removed after the command finishes its execution</li>
</ul>
<h3 id="进程调度方式"><a href="#进程调度方式" class="headerlink" title="进程调度方式"></a>进程调度方式</h3><ul>
<li>先来先服务（FCFS）调度算法</li>
<li>短作业优先（SJF）调度算法</li>
<li>优先级调度算法</li>
<li>多优先级队列</li>
<li>高响应比优先调度算法</li>
<li>时间片轮转调度算法</li>
<li>多级反馈队列调度算法</li>
</ul>
<h3 id="Linux下的进程"><a href="#Linux下的进程" class="headerlink" title="Linux下的进程"></a>Linux下的进程</h3><p>Linux系统采用多级优先队列的方式</p>
<p><strong>1. Processor Scheduler（处理器调度器）</strong></p>
<ul>
<li><p><strong>定义</strong>：</p>
<ul>
<li>处理器调度器是操作系统中负责实现CPU调度算法的代码部分。</li>
</ul>
</li>
<li><p><strong>功能</strong>：</p>
<ul>
<li>确定下一个要运行哪个进程。</li>
<li>考虑多种因素，如进程优先级、等待时间、I&#x2F;O需求等。</li>
</ul>
</li>
<li><p><strong>目标</strong>：</p>
<ul>
<li>确保系统资源的公平分配。</li>
<li>提高系统的吞吐量和响应速度。</li>
</ul>
</li>
</ul>
<p><strong>2. Dispatcher（调度器）</strong></p>
<ul>
<li><p><strong>定义</strong>：</p>
<ul>
<li>调度器是操作系统中负责将CPU控制权从当前进程转移到新调度进程的组件。</li>
</ul>
</li>
<li><p><strong>功能</strong>：</p>
<ul>
<li>停止当前进程的执行。</li>
<li>保存当前进程的上下文（如程序计数器、寄存器状态等）。</li>
<li>加载新进程的上下文。</li>
<li>将新进程置于就绪状态，以便其可以开始执行。</li>
</ul>
</li>
<li><p><strong>要求</strong>：</p>
<ul>
<li>上下文切换过程需要快速且准确，以确保系统的稳定性和性能。</li>
</ul>
</li>
</ul>
<p><strong>3. 进程优先级值计算</strong></p>
<ul>
<li><p><strong>影响因素</strong>：</p>
<ul>
<li>Nice值：一个介于-20（最高优先级）和19（最低优先级）之间的整数。</li>
<li>CPU使用情况：进程占用的CPU资源量。</li>
</ul>
</li>
<li><p><strong>调整方式</strong>：</p>
<ul>
<li>用户可以使用<code>nice</code>命令或<code>renice</code>命令来调整进程的Nice值。</li>
<li>操作系统根据进程的CPU使用情况动态地调整其优先级值。</li>
</ul>
</li>
<li><p><strong>目的</strong>：</p>
<ul>
<li>确保所有进程能够公平地获得CPU资源。</li>
<li>防止某个进程长时间占用过多CPU资源，影响其他进程的执行。</li>
</ul>
</li>
<li><p>怎么改变Nice_Value值</p>
<ul>
<li><code>nice -n nice_value</code>命令</li>
</ul>
</li>
</ul>
<h3 id="进程相关命令"><a href="#进程相关命令" class="headerlink" title="进程相关命令"></a>进程相关命令</h3><ul>
<li><code>ps</code>命令<ul>
<li><code>-l</code>参数: 显示详细信息</li>
<li><code>-e</code>选项: 显示系统中所有进程</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/ps.png" alt="alt text"></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 修改进程优先级(普通用户只能降低优先级--->给nice_value赋正值)</span>
<span class="token function">nice</span> <span class="token parameter variable">-n</span> <span class="token parameter variable">-20</span> <span class="token function">ps</span> <span class="token parameter variable">-l</span> <span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6.png" alt="alt text"></p>
<p><strong>Shell命令</strong>可以是内部的（内建的）或外部的。</p>
<ul>
<li><p><strong>内部（内建）命令</strong>：这些命令的代码是shell进程的一部分。内部命令直接由shell解释和执行，不需要创建新的进程。您列举的内部命令包括<code>bg</code>（将后台暂停的任务继续执行）、<code>cd</code>（更改目录）、<code>continue</code>（在循环中跳过当前迭代的剩余部分）、<code>echo</code>（在终端显示文本或将文本写入文件）、<code>exec</code>（替换当前shell进程为新的进程）。</p>
</li>
<li><p><strong>外部命令</strong>：这些命令的代码存储在文件中，文件内容可以是二进制代码或shell脚本。外部命令需要shell创建一个新的子进程来执行。您列举的外部命令包括<code>grep</code>（搜索文件中的文本模式）、<code>more</code>（分页查看文件内容）、<code>cat</code>（连接并打印文件内容）、<code>mkdir</code>（创建目录）、<code>rmdir</code>（删除空目录）和<code>ls</code>（列出目录内容）。</p>
</li>
</ul>
<p>在UNIX系统中，一个进程可以通过使用<strong>fork系统调用</strong>来创建另一个进程。这个系统调用会创建一个与原始进程完全相同的内存映射。</p>
<ul>
<li><strong>父进程</strong>：执行fork系统调用的原始进程被称为父进程。</li>
<li><strong>子进程</strong>：通过fork系统调用创建的新进程被称为子进程。</li>
</ul>
<p>可以使用type命令来查看是内部命令还是外部命令</p>
<ul>
<li><code>type</code>命令</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/type.png" alt="alt text"></p>
<h3 id="shell环境下执行命令"><a href="#shell环境下执行命令" class="headerlink" title="shell环境下执行命令"></a>shell环境下执行命令</h3><ul>
<li>命令执行</li>
</ul>
<p>在Linux下，Bash执行外部命令的过程涉及多个步骤。以下是该过程的大致描述：</p>
<ol>
<li><p><strong>命令输入</strong>：</p>
<ul>
<li>用户在Bash shell中输入一个命令，例如<code>ls</code>。</li>
</ul>
</li>
<li><p><strong>词法分析</strong>：</p>
<ul>
<li>Bash首先对输入的命令进行词法分析，将命令分解为单词或标记（tokens），例如命令名、选项、参数等。</li>
</ul>
</li>
<li><p><strong>路径搜索</strong>：</p>
<ul>
<li>Bash需要确定输入的是内部命令（如<code>cd</code>、<code>echo</code>等Bash内置的命令）还是外部命令。</li>
<li>对于外部命令，Bash会在环境变量<code>PATH</code>指定的目录中搜索该命令的可执行文件。<code>PATH</code>环境变量包含了一系列用冒号分隔的目录路径，Bash会按照这些路径的顺序进行搜索。</li>
</ul>
</li>
<li><p><strong>创建子进程</strong>：</p>
<ul>
<li>一旦找到可执行文件，Bash会使用<code>fork()</code>系统调用来创建一个新的子进程。这个子进程是当前Bash进程的副本，它将用于执行外部命令。</li>
</ul>
</li>
<li><p><strong>执行外部命令</strong>：</p>
<ul>
<li>在子进程中，Bash使用<code>exec()</code>系统调用来替换当前进程的映像为外部命令的可执行文件映像，从而开始执行该命令。</li>
<li><code>exec()</code>调用会导致子进程完全变成另一个程序（即外部命令），执行完毕后不会返回到原Bash进程，除非遇到错误或外部命令执行完成。</li>
</ul>
</li>
<li><p><strong>等待命令完成</strong>：</p>
<ul>
<li>父进程（即原始的Bash进程）会等待子进程（执行外部命令的进程）完成。这通常是通过<code>wait()</code>系统调用来实现的，它允许父进程挂起执行，直到子进程结束。</li>
</ul>
</li>
<li><p><strong>处理命令输出</strong>：</p>
<ul>
<li>外部命令执行过程中可能会产生标准输出（stdout）和标准错误输出（stderr）。这些输出通常会被打印到终端上，除非用户通过重定向（<code>&gt;</code>、<code>&gt;&gt;</code>、<code>2&gt;</code>等）或管道（<code>|</code>）改变了输出的方向。</li>
</ul>
</li>
<li><p><strong>命令结束</strong>：</p>
<ul>
<li>当外部命令执行完毕后，控制权会返回到Bash进程。如果命令成功执行，Bash通常会返回一个成功的退出状态（通常是0）；如果命令执行失败，则会返回一个非零的退出状态。</li>
</ul>
</li>
</ol>
<ul>
<li><p>脚本文件执行<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/script.png" alt="alt text"></p>
</li>
<li><p><code>top</code>命令<br>动态实时的显示系统中进程变化<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/top.png" alt="alt text"></p>
<ul>
<li><code>d</code>: 按D键切换刷新时间</li>
<li><code>h</code>: 显示可选项</li>
<li><code>q</code>: 退出</li>
</ul>
</li>
<li><p><code>pstree</code>命令<br>用树的方式显示进程之间的关系</p>
</li>
</ul>
<h3 id="对进程进行控制"><a href="#对进程进行控制" class="headerlink" title="对进程进行控制"></a>对进程进行控制</h3><p>前台进程的概念:<br>   前台进程是与用户直接交互的进程。以下是对前台进程的详细解释：</p>
<ol>
<li><strong>定义</strong>：前台进程指的是那些当前正在与用户进行直接交互的进程。这类进程通常位于屏幕的最前端，接收用户的输入并显示输出结果。</li>
<li><strong>特性</strong>：<ul>
<li>交互性：前台进程能够直接响应用户的操作，如点击、输入等。</li>
<li>阻塞性：当一个前台进程正在运行时，它通常会阻塞用户终端，意味着用户无法进行其他操作，直到该进程完成。</li>
<li>单一性：在任何时刻，通常只有一个进程（或进程组）可以在前台运行。</li>
</ul>
</li>
<li><strong>与后台进程的区别</strong>：与前台进程不同，后台进程在后台运行，不会阻塞用户终端，允许用户在同一终端启动新的前台或后台进程。后台进虽&gt;然可以向终端发送输出，但通常不能从终端接收输入。</li>
<li><strong>操作系统中的表现</strong>：在Unix-like操作系统中，用户可以通过特定的命令在前台和后台之间切换进程。</li>
<li><strong>实例</strong>：以Oracle数据库为例，当用户运行一个应用进程时，系统会为该应用建立一个服务进程，这个服务进程可以被视为前台进程，用于处理连接到数据库实例的用户进程的请求。</li>
<li><strong>其他系统中的应用</strong>：在Android系统中，前台进程也是极其重要的，它代表当前正在与用户交互的应用程序。这类进程在系统资源分配中通常享有优先级，以确保流畅的用户体验。<br>总的来说，前台进程是计算机系统中直接与用户进行交互的进程，它具有高度的交互性和实时性要求。在不同的操作系统和应用场景中，前台进程的具体表现和管理方式可能会有所不同。</li>
</ol>
<ul>
<li>执行命令时指定其为后台进程<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">/tmp/loop <span class="token operator">&amp;</span>
<span class="token comment"># 此时后台进程loop不断输出数字,按CTRL+C无效,因为是后台进程</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
<p><strong>jobs命令</strong>是Linux系统中的一个内置命令，它用于显示当前shell中正在运行或已经挂起的任务列表。</p>
<ol>
<li><p><strong>基本功能</strong>：</p>
<ul>
<li>显示当前shell中所有正在运行或挂起的任务。</li>
<li>通过任务编号、状态、进程编号和任务名称来展示任务信息。</li>
</ul>
</li>
<li><p><strong>常用操作</strong>：</p>
<ul>
<li>使用<code>jobs</code>命令直接查看任务列表。</li>
<li><code>fg [%n]</code>用于将后台执行的进程调到前台。</li>
<li><code>bg [%n]</code>用于将后台暂停的进程继续运行。</li>
<li><code>Ctrl+Z</code>可以将当前正在运行的前台进程暂停，并将其移动到后台。</li>
</ul>
</li>
<li><p><strong>任务状态</strong>：</p>
<ul>
<li>任务的状态可以是停止状态(S)、运行状态(R)或已完成状态(D)。</li>
</ul>
</li>
<li><p><strong>命令参数</strong>：</p>
<ul>
<li><code>-l</code>选项：显示详细的任务信息，包括进程ID（PID）、状态、作业编号、命令和进程组ID。</li>
<li><code>-n</code>选项：只显示上次显示过的已经停止的或已经退出的作业。</li>
<li><code>-p</code>选项：仅显示选定作业的进程组的进程ID。</li>
<li><code>-r</code>选项：仅显示正在运行的作业。</li>
<li><code>-s</code>选项：仅显示停止的作业。</li>
</ul>
</li>
<li><p><strong>使用场景</strong>：</p>
<ul>
<li>当你在终端中运行了多个命令或脚本，并且想要查看或管理这些任务时，可以使用jobs命令。</li>
<li>特别是当你需要切换任务的执行前后台，或者查看哪些任务正在运行、哪些已经暂停时，jobs命令会非常有用。</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/loop.png" alt="alt text"></p>
<ul>
<li><code>fg</code><br> 把后台进程变成前台进程<ul>
<li>默认把带<code>+</code>的进程调到前台</li>
<li><code>%1</code>: 指定把哪个(进程id)进程变成前台进程</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/fg.png" alt="alt text"></p>
<ul>
<li><code>bg</code><br> 挂起前台任务使用<code>CTRL+Z</code>，<code>bg</code>命令来把后台挂起的任务唤醒</li>
</ul>
<h3 id="命令的顺序和并行执行（Sequential-and-Parallel-Execution-of-Commands）"><a href="#命令的顺序和并行执行（Sequential-and-Parallel-Execution-of-Commands）" class="headerlink" title="命令的顺序和并行执行（Sequential and Parallel Execution of Commands）"></a>命令的顺序和并行执行（Sequential and Parallel Execution of Commands）</h3><ul>
<li>串行: cmd1 ; cmd2</li>
<li>并行: cmd1 &amp; cmd2</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E5%91%BD%E4%BB%A4%E4%B8%B2%E5%B9%B6%E8%A1%8C.png" alt="alt text"></p>
<h3 id="如何终止进程"><a href="#如何终止进程" class="headerlink" title="如何终止进程"></a>如何终止进程</h3><ul>
<li>终止前台进程<ul>
<li>CTRL+C</li>
</ul>
</li>
<li>终止后台进程<ul>
<li><code>kill</code>命令<br> <img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/kill.png" alt="alt text"></li>
</ul>
</li>
</ul>
<h4 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a><code>kill</code>命令</h4><p><code>kill</code> 命令在 Unix 和 Linux 系统中用于向进程发送信号。其基本语法是：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">kill</span> <span class="token punctuation">[</span>-信号编号<span class="token punctuation">]</span> 进程ID<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<ul>
<li><code>信号编号</code> 是一个可选参数，用于指定要发送给进程的信号。如果省略，则默认信号是 SIGTERM（软件终止信号，通常为编号 15）。</li>
<li><code>进程ID</code> 是要发送信号的进程的 ID。</li>
</ul>
<p><code>kill -l</code> 命令会列出所有可用的信号。</p>
<p>目的：将 <code>信号编号</code> 指定的信号发送给 <code>proc-list</code> 中指定的进程ID（PID）对应的进程。作业ID通常用于 shell 作业控制，必须以 <code>%</code> 符号开头。</p>
<p><code>kill -l</code> 命令返回所有信号及其名称的列表。在某些系统上，信号编号可能不会与名称一起显示。</p>
<p>常用的信号编号包括：</p>
<ul>
<li>HUP（挂起，通常为信号编号 1）</li>
<li>INT（中断，通常由按 Ctrl+C 发送，信号编号 2）</li>
<li>QUIT（退出，通常由按 Ctrl+\ 发送，信号编号 3）</li>
<li>KILL（强制杀死，信号编号 9）</li>
<li>TERM（软件信号，如果没有指定则为默认信号，通常为编号 15）</li>
</ul>
<p>请注意，向进程发送某些信号，尤其是 KILL（信号 9），应该谨慎进行，因为它可以在不给进程机会适当清理资源的情况下突然终止进程。</p>
<p>如果你想向多个进程发送信号，可以通过空格分隔指定多个 PID，如下所示：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">kill</span> <span class="token parameter variable">-SIGTERM</span> <span class="token number">1234</span> <span class="token number">5678</span> <span class="token number">9012</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>此命令将 SIGTERM 信号发送给 PID 为 1234、5678 和 9012 的进程。</p>
<h4 id="信号的处理"><a href="#信号的处理" class="headerlink" title="信号的处理"></a>信号的处理</h4><p>命令和进程的异常终止（续）</p>
<p><code>kill</code>命令的主要目的是向进程发送信号（软件中断）。进程在接收到信号时可以采取以下三种行动之一：</p>
<ol>
<li>接受由UNIX内核决定的默认操作。</li>
<li>忽略该信号。</li>
<li>拦截信号并执行用户定义的操作。</li>
</ol>
<p>由进程内部事件引起的信号被称为内部信号或陷阱（trap）。由进程外部事件引起的信号被称为外部信号。</p>
<h3 id="程序怎么通过代码处理信号"><a href="#程序怎么通过代码处理信号" class="headerlink" title="程序怎么通过代码处理信号"></a>程序怎么通过代码处理信号</h3><p>让我们详细探讨一下这三个策略：使用 <code>sigaction</code> 设置信号处理程序、使用信号掩码以及使用守护进程。</p>
<h4 id="1-使用-sigaction-设置信号处理程序"><a href="#1-使用-sigaction-设置信号处理程序" class="headerlink" title="1. 使用 sigaction 设置信号处理程序"></a>1. 使用 <code>sigaction</code> 设置信号处理程序</h4><p><code>sigaction</code> 是一个系统调用，它允许你为特定的信号设置一个处理程序。虽然 <code>SIGKILL</code> 不能被捕获或处理，但你可以为<code>其他信号</code>设置处理程序，以便在进程被 <code>SIGKILL</code> 之前，有机会执行一些清理工作。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;signal.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">void</span> <span class="token function">handle_sigint</span><span class="token punctuation">(</span><span class="token keyword">int</span> sig<span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Caught SIGINT, cleaning up..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token comment">// 执行清理操作</span>
    <span class="token comment">// ...</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Cleanup done, exiting..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token keyword">struct</span> <span class="token class-name">sigaction</span> sa<span class="token punctuation">;</span>
    sa<span class="token punctuation">.</span>sa_handler <span class="token operator">=</span> handle_sigint<span class="token punctuation">;</span> <span class="token comment">// 设置信号处理程序</span>
    sa<span class="token punctuation">.</span>sa_flags <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">sigemptyset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sa<span class="token punctuation">.</span>sa_mask<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清空信号集</span>

    <span class="token comment">// 为 SIGINT 设置信号处理程序</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">sigaction</span><span class="token punctuation">(</span>SIGINT<span class="token punctuation">,</span> <span class="token operator">&amp;</span>sa<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"sigaction"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Running, press Ctrl+C to interrupt..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 主循环</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们为 <code>SIGINT</code>（通常由 Ctrl+C 产生）设置了一个信号处理程序。当 <code>SIGINT</code> 被捕获时，程序会执行清理操作并优雅地退出。</p>
<h4 id="2-使用信号掩码"><a href="#2-使用信号掩码" class="headerlink" title="2. 使用信号掩码"></a>2. 使用信号掩码</h4><p>信号掩码是一个进程用来阻塞（忽略）特定信号的机制。通过设置信号掩码，你可以暂时阻止某些信号被处理，直到你准备好处理它们。这可以用来确保在执行关键操作时不会被打断。</p>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;signal.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    sigset_t mask<span class="token punctuation">;</span>
    <span class="token function">sigemptyset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mask<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 清空信号集</span>
    <span class="token function">sigaddset</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>mask<span class="token punctuation">,</span> SIGINT<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 将 SIGINT 添加到信号集中</span>

    <span class="token comment">// 阻塞 SIGINT</span>
    <span class="token function">sigprocmask</span><span class="token punctuation">(</span>SIG_BLOCK<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mask<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"SIGINT is blocked, perform critical operation..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token comment">// 执行关键操作</span>
    <span class="token comment">// ...</span>

    <span class="token comment">// 解除对 SIGINT 的阻塞</span>
    <span class="token function">sigprocmask</span><span class="token punctuation">(</span>SIG_UNBLOCK<span class="token punctuation">,</span> <span class="token operator">&amp;</span>mask<span class="token punctuation">,</span> <span class="token keyword">nullptr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Critical operation completed, SIGINT is unblocked."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>

    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 主循环</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们使用 <code>sigprocmask</code> 来阻塞 <code>SIGINT</code>，这样在执行关键操作时，<code>SIGINT</code> 不会被处理。操作完成后，我们解除阻塞，允许 <code>SIGINT</code> 被正常处理。</p>
<h4 id="3-使用守护进程"><a href="#3-使用守护进程" class="headerlink" title="3. 使用守护进程"></a>3. 使用守护进程</h4><p>守护进程（Daemon）是一种在后台运行的进程，通常用于执行长期任务或等待某些事件的发生。守护进程可以监控你的应用程序，并在应用程序被 <code>SIGKILL</code> 或其他信号终止后自动重启它。</p>
<p>创建守护进程通常涉及以下几个步骤：</p>
<ul>
<li>从终端会话中分离。</li>
<li>关闭标准文件描述符（stdin、stdout、stderr）。</li>
<li>改变当前工作目录。</li>
<li>设置适当的信号处理程序。</li>
</ul>
<pre class="line-numbers language-cpp" data-language="cpp"><code class="language-cpp"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;unistd.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/types.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;sys/stat.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;fcntl.h></span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream></span></span>

<span class="token keyword">void</span> <span class="token function">daemonize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    pid_t pid<span class="token punctuation">;</span>

    <span class="token comment">// 创建子进程</span>
    pid <span class="token operator">=</span> <span class="token function">fork</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">perror</span><span class="token punctuation">(</span><span class="token string">"fork"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>pid <span class="token operator">></span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 父进程退出</span>
        <span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">&#125;</span>

    <span class="token comment">// 从终端会话中分离</span>
    <span class="token function">setsid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 关闭标准文件描述符</span>
    <span class="token function">close</span><span class="token punctuation">(</span>STDIN_FILENO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">close</span><span class="token punctuation">(</span>STDOUT_FILENO<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">close</span><span class="token punctuation">(</span>STDERR_FILENO<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 改变当前工作目录</span>
    <span class="token function">chdir</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 设置文件权限掩码</span>
    <span class="token function">umask</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 重定向标准文件描述符到 /dev/null</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"/dev/null"</span><span class="token punctuation">,</span> O_RDWR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stdin</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"/dev/null"</span><span class="token punctuation">,</span> O_RDWR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stdout</span>
    <span class="token function">open</span><span class="token punctuation">(</span><span class="token string">"/dev/null"</span><span class="token punctuation">,</span> O_RDWR<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// stderr</span>
<span class="token punctuation">&#125;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
    <span class="token function">daemonize</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    std<span class="token double-colon punctuation">::</span>cout <span class="token operator">&lt;&lt;</span> <span class="token string">"Daemon started..."</span> <span class="token operator">&lt;&lt;</span> std<span class="token double-colon punctuation">::</span>endl<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token comment">// 守护进程的主循环</span>
    <span class="token punctuation">&#125;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">&#125;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<p>在这个例子中，我们定义了一个 <code>daemonize</code> 函数，它执行了创建守护进程所需的步骤。然后在 <code>main</code> 函数中调用 <code>daemonize</code> 来启动守护进程。</p>
<h2 id="第十一章-Shell脚本编程"><a href="#第十一章-Shell脚本编程" class="headerlink" title="第十一章 Shell脚本编程"></a>第十一章 Shell脚本编程</h2><ol>
<li><p><strong>Shell Script (Shell 程序)</strong>:</p>
<ul>
<li>一个Shell脚本是一个包含一系列Shell命令的文本文件。这些命令可以由Shell（如bash, zsh, sh等）解释并执行。</li>
<li>Shell脚本通常用于自动化任务和简化复杂的命令序列。</li>
</ul>
</li>
<li><p><strong>Shell Variable (Shell 变量)</strong>:</p>
<ul>
<li>Shell变量是用户或程序员在Shell环境中用于存储和引用数据的机制。</li>
<li>变量可以存储字符串、数字或其他数据类型（取决于Shell）。</li>
<li>Shell变量通常用于在脚本中传递和存储数据，以及动态地构建命令。</li>
</ul>
</li>
<li><p><strong>Program Control Flow Commands (程序控制流命令)</strong>:</p>
<ul>
<li>这些命令允许在Shell脚本中执行非顺序的命令，以及重复执行命令块。</li>
<li>常见的控制流命令包括<code>if</code>、<code>for</code>、<code>while</code>、<code>until</code>、<code>case</code>等。</li>
<li>这些命令使得脚本能够基于条件执行不同的命令序列，或者重复执行某个命令块，直到满足某个条件为止。</li>
</ul>
</li>
</ol>
<p>总结：Shell脚本是包含一系列Shell命令的文本文件，用于自动化任务和简化命令序列。Shell变量用于存储和引用数据，而程序控制流命令则允许在脚本中执行非顺序的命令和重复执行命令块。</p>
<p>Shell脚本也是一种编程语言(解释型)<br>编程语言分为两种</p>
<ul>
<li>编译型: 如C++这种,通过g++先生成可执行文件</li>
<li>解释型: python或java,读一行命令,解释执行一行</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/shellscript.png" alt="alt text"></p>
<h3 id="编写shell脚本"><a href="#编写shell脚本" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h3><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token function">vim</span> first.sh

<span class="token function">date</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello world"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>shell脚本有三种执行方式</p>
<ol>
<li><code>bash first.sh</code> 指定运行shell来执行脚本</li>
<li><code>first.sh</code> 直接执行shell脚本</li>
<li><code>. first.sh</code>或<code>source first.sh</code></li>
</ol>
<ul>
<li>在脚本文件第一行指定shell环境<code>#! /bin/bash</code>表示把<code>/bin/bash</code>程序加载进来,由它来解释执行脚本文件<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E6%8C%87%E5%AE%9A%E8%84%9A%E6%9C%AC%E8%A7%A3%E9%87%8A%E5%99%A8.png" alt="alt text"></li>
</ul>
<h3 id="shell变量分类及操作"><a href="#shell变量分类及操作" class="headerlink" title="shell变量分类及操作"></a>shell变量分类及操作</h3><ul>
<li>环境变量(子进程无法修改父进程的环境变量)<br> 使用<code>env</code>命令直接显示环境变量</li>
<li>用户自定义变量</li>
</ul>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /usr/bin/bash</span>
<span class="token comment"># 定义变量,不能加空格</span>
<span class="token assign-left variable">nam</span><span class="token operator">=</span><span class="token string">"Jack"</span>
<span class="token comment"># 不能使用双引号</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Hello, <span class="token variable">$nam</span>"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li><code>readonly</code>: 把一个变量变成只读</li>
<li><code>export</code>: 把一个用户定义变量变成环境变量</li>
<li><code>source</code>: 允许脚本修改环境变量值(使用<code>source</code>或者<code>.</code>执行脚本文件时,不会再创建子进程来执行,使用当前shell进程来解释执行脚本)<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /usr/bin/bash</span>
<span class="token comment"># 设置父(当前)进程环境变量值</span>
<span class="token assign-left variable"><span class="token environment constant">PS1</span></span><span class="token operator">=</span><span class="token string">'Study Hard/$'</span>
<span class="token comment"># 执行时使用 . first.sh  或者 source first.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="内置的环境变量"><a href="#内置的环境变量" class="headerlink" title="内置的环境变量"></a>内置的环境变量</h3><ol>
<li><p><code>PATH</code></p>
<ul>
<li><strong>Purpose</strong>: 包含目录名称的列表，shell在查找外部命令或程序时会搜索这些目录。</li>
<li><strong>Default</strong>: 通常包括<code>/usr/bin</code>, <code>/bin</code>, <code>/usr/local/bin</code>等目录。</li>
</ul>
</li>
<li><p><code>EDITOR</code></p>
<ul>
<li><strong>Purpose</strong>: 指定默认文本编辑器，如<code>vi</code>, <code>nano</code>, <code>emacs</code>等。</li>
<li><strong>Default</strong>: 根据系统配置和用户偏好而定。</li>
</ul>
</li>
<li><p><code>ENV</code></p>
<ul>
<li><strong>Purpose</strong>: 指定shell启动时要读取的初始化文件。在某些shell中，如<code>ksh</code>，它可能用于指定环境设置文件。</li>
<li><strong>Default</strong>: 通常不设置，但在某些shell配置中可能使用。</li>
</ul>
</li>
<li><p><code>HOME</code></p>
<ul>
<li><strong>Purpose</strong>: 用户的主目录路径。当用户首次登录时，shell通常会切换到这个目录。</li>
<li><strong>Default</strong>: <code>/home/username</code>（其中<code>username</code>是用户的登录名）。</li>
</ul>
</li>
<li><p><code>MAIL</code></p>
<ul>
<li><strong>Purpose</strong>: 用户的系统邮箱文件的路径。当有新邮件时，某些shell会显示通知。</li>
<li><strong>Default</strong>: <code>/var/spool/mail/username</code>（其中<code>username</code>是用户的登录名）。</li>
</ul>
</li>
<li><p><code>MAILCHECK</code></p>
<ul>
<li><strong>Purpose</strong>: 指定shell检查用户邮箱以查找新邮件的频率（以秒为单位）。</li>
<li><strong>Default</strong>: 通常设置为60秒，但可能因系统而异。</li>
</ul>
</li>
<li><p><code>PPID</code></p>
<ul>
<li><strong>Purpose</strong>: 当前进程的父进程ID（PID）。这不是一个通常设置的环境变量，而是可以通过shell命令（如<code>$!</code>或<code>$PPID</code>在某些shell中）或程序内部API获取的。</li>
<li><strong>Default</strong>: 由操作系统在进程创建时设置。</li>
</ul>
</li>
<li><p><code>PS1</code></p>
<ul>
<li><strong>Purpose</strong>: 主shell提示符，显示在命令行上。</li>
<li><strong>Default</strong>: 通常设置为类似<code>$</code>或<code>#</code>（对于root用户）的字符，但用户可以通过修改<code>.bashrc</code>、<code>.bash_profile</code>等文件来定制它。</li>
</ul>
</li>
<li><p><code>PWD</code></p>
<ul>
<li><strong>Purpose</strong>: 当前工作目录的路径。</li>
<li><strong>Default</strong>: 由shell在每次更改目录时设置。</li>
</ul>
</li>
<li><p><code>TERM</code></p>
<ul>
<li><strong>Purpose</strong>: 终端类型。它告诉应用程序（如文本编辑器、终端仿真器等）关于终端的功能和特性。</li>
<li><strong>Default</strong>: 根据用户使用的终端仿真器而定，如<code>xterm</code>, <code>vt100</code>, <code>linux</code>等。</li>
</ul>
</li>
</ol>
<table>
<thead>
<tr>
<th>变量</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>$0</code></td>
<td>程序的名称</td>
</tr>
<tr>
<td><code>$1 - $9</code></td>
<td>命令行参数1到9的值</td>
</tr>
<tr>
<td><code>$@</code></td>
<td>所有命令行参数的值</td>
</tr>
<tr>
<td><code>$*</code></td>
<td>所有命令行参数的值,单一字符串<code>&quot;a b c d&quot;</code></td>
</tr>
<tr>
<td><code>&quot;$@&quot;</code></td>
<td>所有命令行参数的值；每个参数都单独引用 <code>&quot;a&quot; &quot;b&quot; &quot;c&quot; &quot;d&quot;</code></td>
</tr>
<tr>
<td><code>$#</code></td>
<td>命令行参数的总数</td>
</tr>
<tr>
<td><code>$$</code></td>
<td>当前进程的进程ID（PID）</td>
</tr>
<tr>
<td><code>$?</code></td>
<td>最近命令的退出状态,执行成功返回值0</td>
</tr>
<tr>
<td><code>$!</code></td>
<td>最近后台进程的PID</td>
</tr>
</tbody></table>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Study Hard:<span class="token variable">$cat</span> first.sh

<span class="token comment">#!/bin/bash</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$0</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$1</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$2</span>

Study Hard:<span class="token variable">$first</span>.sh a b c

./first.sh
a
b

Study Hard:<span class="token variable">$vim</span> first.sh
Study Hard:<span class="token variable">$cat</span> first.sh

<span class="token comment">#!/bin/bashecho $1</span>

Study Hard:<span class="token variable">$first</span>.sh Tom
Tom<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="shell变量的数据类型"><a href="#shell变量的数据类型" class="headerlink" title="shell变量的数据类型"></a>shell变量的数据类型</h3><p><strong>变量声明</strong></p>
<p><strong>语法：</strong></p>
<ul>
<li><code>declare [选项][名称[=值]]</code></li>
<li><code>typeset [选项][名称[=值]]</code></li>
</ul>
<p><strong>目的：</strong><br>声明变量并初始化它们，设置它们的属性。在函数内部，会创建新的变量副本。使用<code>+</code>代替<code>-</code>关闭属性。</p>
<p><strong>输出：</strong></p>
<ul>
<li>没有名称和选项时，在当前shell环境中显示所有shell变量的名称和值。</li>
<li>使用选项时，显示具有特定属性的变量名称和其值。</li>
</ul>
<p><strong>常用选项&#x2F;特性：</strong></p>
<ul>
<li><code>-a</code>：将每个“名称”标记为数组</li>
<li><code>-f</code>：将每个“名称”标记为函数</li>
<li><code>-i</code>：将“名称”标记为整数</li>
<li><code>-r</code>：将“名称”标记为只读（无法通过<code>+x</code>关闭）</li>
<li><code>-x</code>：将“名称”标记为环境变量</li>
</ul>
<p>shell变量被默认为是字符串类型</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash">Input: <span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">1</span>
Input: <span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">2</span>
Input: <span class="token assign-left variable">c</span><span class="token operator">=</span><span class="token variable">$a</span>+<span class="token variable">$b</span>
Input: <span class="token builtin class-name">echo</span> <span class="token variable">$c</span>

Output: <span class="token number">1</span>+2

<span class="token comment"># 正确输出加法公式</span>
Input: <span class="token builtin class-name">declare</span> <span class="token parameter variable">-i</span> z
Input: <span class="token assign-left variable">z</span><span class="token operator">=</span>a+b
Iuput: <span class="token builtin class-name">echo</span> <span class="token variable">$z</span>
Output: <span class="token number">3</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="算数拓展"><a href="#算数拓展" class="headerlink" title="算数拓展"></a>算数拓展</h3><ol>
<li><code>$()</code>: 这是命令替换（Command Substitution）的语法。当你想要将命令的输出赋值给一个变量，或者将命令的输出作为另一个命令的参数时，你会使用它。<code>$()</code> 的结果会被替换为括号内命令的输出。例如：</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$(</span><span class="token function">ls</span><span class="token variable">)</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$files</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>在这个例子中，<code>ls</code> 命令的输出会被赋值给变量 <code>files</code>，然后 <code>echo</code> 命令会打印出这个输出。</p>
<p>另外，<code>$()</code> 是反引号（<code>...</code>）的现代替代方式，两者在功能上是等价的。例如：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">files</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">ls</span><span class="token variable">`</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$files</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>

<ol start="2">
<li><code>$((...))</code>: 这是算术扩展（Arithmetic Expansion）的语法。当你需要在 Bash 脚本中执行算术运算时，你会使用它。<code>$((...))</code> 的结果会被替换为括号内算术表达式的结果。例如：</li>
</ol>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">5</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">10</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>a <span class="token operator">+</span> b<span class="token variable">))</span></span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p>在这个例子中，算术表达式 <code>a + b</code> 的结果（即 15）会被赋值给变量 <code>sum</code>，然后 <code>echo</code> 命令会打印出这个结果。</p>
<h3 id="命令替换-把命令结果存储成变量"><a href="#命令替换-把命令结果存储成变量" class="headerlink" title="命令替换(把命令结果存储成变量)"></a>命令替换(把命令结果存储成变量)</h3><ul>
<li><strong>变量名&#x3D;`cmd`</strong></li>
<li><code>cmd1 &quot;$(cmd2)&quot;</code><ul>
<li><code>$(...)</code>: 这是一个命令替换的语法，它允许你执行一个命令，并将该命令的输出作为另一个命令的输入。在这个例子中，<code>$(sort &quot;$filename&quot;)</code> 会执行 <code>sort &quot;$filename&quot;</code> 命令，该命令会对 <code>$filename</code> 文件的内容进行排序，并输出排序后的结果。这个输出随后被用作 <code>nl</code> 命令的输入。</li>
</ul>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2.png" alt="alt text"></p>
<h3 id="变量的输入输出"><a href="#变量的输入输出" class="headerlink" title="变量的输入输出"></a>变量的输入输出</h3><h4 id="变量的输入"><a href="#变量的输入" class="headerlink" title="变量的输入"></a>变量的输入</h4><p><code>read</code> 是一个在Linux中常用的命令，用于从标准输入或其他文件描述符中读取输入并赋值给变量。它的基本语法如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> 变量名<span class="token punctuation">(</span>列表<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>其中：</p>
<ul>
<li><code>选项</code> 是可选的，可以用来指定read命令的特定行为。</li>
<li><code>变量名</code> 是要将输入赋值给的变量。</li>
</ul>
<p>示例：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"Please enter your name:"</span>
<span class="token builtin class-name">read</span> name
<span class="token builtin class-name">echo</span> <span class="token string">"Hello, <span class="token variable">$name</span>. Welcome!"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>在这个示例中，当用户输入其名字并按下回车后，<code>read</code> 命令将输入的内容赋值给变量 <code>name</code>，然后 <code>echo</code> 命令使用这个变量进行输出。</p>
<p>常用选项包括：</p>
<ul>
<li><code>-p</code> ：用于显示提示信息而不是使用<code>echo</code>命令来显示。</li>
<li><code>-a</code> ：将输入分配到数组而不是普通变量。</li>
<li><code>-n</code> ：限制输入的字符数。</li>
<li><code>-s</code> ：用于静默模式，输入时不显示在屏幕上。</li>
<li><code>-t</code> ：设置等待时间，如果超过指定秒数没有输入，则读取终止。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/read.png" alt="alt text"></p>
<h4 id="变量的输出-echo"><a href="#变量的输出-echo" class="headerlink" title="变量的输出-&gt;echo"></a>变量的输出-&gt;<code>echo</code></h4><p><code>echo</code> 命令用于在终端中显示文本或变量的内容。它的基本语法如下：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token punctuation">[</span>选项<span class="token punctuation">]</span> <span class="token punctuation">[</span>字符串或变量<span class="token punctuation">]</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>其中：</p>
<ul>
<li><code>[选项]</code> 是可选的，可以用来指定特定行为，比如 <code>-e</code> 用于解释转义字符。</li>
<li><code>[字符串或变量]</code> 是要显示的文本或变量的内容。</li>
</ul>
<p>示例：</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">echo</span> <span class="token string">"Hello, World!"</span><span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<p>在这个示例中，<code>echo</code> 命令会在终端中显示 “Hello, World!”。</p>
<p>常用选项包括：</p>
<ul>
<li><code>-e</code> ：允许使用反斜杠转义字符。</li>
<li><code>-n</code> ：不在结尾添加换行符。</li>
<li><code>-E</code> ：关闭反斜杠转义功能，将反斜杠字符输出为原始字符。</li>
<li><code>&gt;&gt; 文件</code> ：将输出追加到指定文件。</li>
<li><code>-E</code> ：关闭 <code>-e</code> 选项开启的转义字符解释功能。</li>
</ul>
<h3 id="对数值进行处理"><a href="#对数值进行处理" class="headerlink" title="对数值进行处理"></a>对数值进行处理</h3><p>因为shell变量被默认为是字符串类型</p>
<h4 id="整数"><a href="#整数" class="headerlink" title="整数"></a>整数</h4><ul>
<li><code>declare</code></li>
<li><code>expr 表达式</code></li>
<li><code>let</code>命令<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/expr&let.png" alt="alt text"></li>
</ul>
<h4 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h4><ul>
<li><code>bc</code>命令: 默认从标准输入读取小数<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">a</span><span class="token operator">=</span><span class="token number">1.1</span>
<span class="token assign-left variable">b</span><span class="token operator">=</span><span class="token number">2.1</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$a</span> + <span class="token variable">$b</span> <span class="token operator">|</span> <span class="token function">bc</span>
<span class="token comment"># 从标准输出中通过管道变成标准输入在交给bc命令</span>

Output: <span class="token number">3.2</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="Homework"><a href="#Homework" class="headerlink" title="Homework"></a>Homework</h3><ul>
<li>Write a script that take a directory as a command-line argument and output the names of all directories within that directory.(1.sh)<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">dirname</span><span class="token operator">=</span><span class="token variable">$1</span>
<span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token variable">$dirname</span> <span class="token operator">|</span> <span class="token function">awk</span> <span class="token string">'/^d/&#123;print $9&#125;'</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
<li>Write a script that read a text filename from the keybard, sort the file and display it with the line number(2.sh)<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Please input a file name:"</span> filename
<span class="token function">sort</span> <span class="token variable">$filename</span> <span class="token operator">|</span> <span class="token function">nl</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre></li>
</ul>
<h3 id="shell脚本的注释"><a href="#shell脚本的注释" class="headerlink" title="shell脚本的注释"></a>shell脚本的注释</h3><p><code>#</code>用来注释一行,类似于python(除第一行外)</p>
<h3 id="编写shell脚本-1"><a href="#编写shell脚本-1" class="headerlink" title="编写shell脚本"></a>编写shell脚本</h3><h4 id="shell表达式"><a href="#shell表达式" class="headerlink" title="shell表达式"></a>shell表达式</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/shell%E8%A1%A8%E8%BE%BE%E5%BC%8F.png" alt="alt text"></p>
<ul>
<li><p><code>-eq</code>: 两个整数相等</p>
</li>
<li><p><code>-ge</code>: 大于等于</p>
</li>
<li><p><code>-gt</code>: 大于</p>
</li>
<li><p><code>-le</code>: 小于等于</p>
</li>
<li><p><code>-lt</code>: 小于</p>
</li>
<li><p><code>-a</code>: AND</p>
</li>
<li><p><code>-o</code>: OR</p>
</li>
<li><p><code>!</code>: 非</p>
</li>
</ul>
<p>对表达式求值有两种方式</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">if</span> <span class="token builtin class-name">test</span> <span class="token variable">$a</span> <span class="token parameter variable">-eq</span> <span class="token variable">$b</span>

<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-eq</span> <span class="token variable">$b</span> <span class="token punctuation">]</span>
<span class="token comment"># 要有空格</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="if结构"><a href="#if结构" class="headerlink" title="if结构"></a>if结构</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash  </span>
  
<span class="token assign-left variable">num1</span><span class="token operator">=</span><span class="token number">10</span>  
<span class="token assign-left variable">num2</span><span class="token operator">=</span><span class="token number">20</span>  
  
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$num1</span> <span class="token parameter variable">-lt</span> <span class="token variable">$num2</span> <span class="token punctuation">]</span>  
<span class="token keyword">then</span>  
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$num1</span> is less than <span class="token variable">$num2</span>"</span>  
<span class="token keyword">fi</span>


<span class="token comment">#! /usr/bin/bash</span>
<span class="token builtin class-name">read</span> a
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">'zero'</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">"is Postive"</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$a</span> <span class="token parameter variable">-lt</span> <span class="token number">0</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span> <span class="token builtin class-name">echo</span> <span class="token string">" is Negative"</span>
<span class="token keyword">fi</span>
<span class="token comment"># if.sh</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h4 id="循环结构"><a href="#循环结构" class="headerlink" title="循环结构"></a>循环结构</h4><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E5%BE%AA%E7%8E%AF%E8%AF%BB%E5%8F%96.png" alt="alt text"></p>
<h5 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/if%E7%BB%93%E6%9E%84.png" alt="alt text"></p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># for循环格式 in可以不写,表示从命令行取参数列表</span>
<span class="token keyword">for</span> variable <span class="token punctuation">[</span>in argument-list<span class="token punctuation">]</span>
<span class="token keyword">do</span>
   command-list
<span class="token keyword">done</span>
<span class="token comment"># 实例</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">name</span> <span class="token keyword">in</span> tom jack marry
<span class="token keyword">do</span>
   <span class="token builtin class-name">echo</span> <span class="token string">"hello <span class="token variable">$name</span>"</span>
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li><p>题目： 输出命令行参数之和</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#! /bin/bash</span>
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> i 
<span class="token keyword">do</span> 
   <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $sum + $i<span class="token variable">`</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</li>
<li><p>题目: 从1加到100,输出结果</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> n
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>
<span class="token keyword">for</span> <span class="token for-or-select variable">i</span> <span class="token keyword">in</span> <span class="token variable"><span class="token variable">$(</span><span class="token function">seq</span> <span class="token number">1</span> $n<span class="token variable">)</span></span>
<span class="token keyword">do</span>
        <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $sum + $i<span class="token variable">`</span></span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li><p>题目: 批量的给文件改名</p>
<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash  </span>
  
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入目录（默认为当前目录）: "</span> <span class="token function">dir</span>  
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-z</span> <span class="token string">"<span class="token variable">$dir</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  
    <span class="token assign-left variable">dir</span><span class="token operator">=</span><span class="token string">"./"</span>  <span class="token comment"># 如果目录为空，则默认为当前目录  </span>
<span class="token keyword">fi</span>  
  
<span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token number">1</span>  
<span class="token keyword">for</span> <span class="token for-or-select variable">filename</span> <span class="token keyword">in</span> <span class="token string">"<span class="token variable">$dir</span>"</span>*.txt<span class="token punctuation">;</span> <span class="token keyword">do</span>  <span class="token comment"># 注意这里使用引号包围变量和模式  </span>
    <span class="token builtin class-name">echo</span> <span class="token string">"重命名 <span class="token variable">$filename</span> 到 <span class="token variable">$i</span>.txt，y 或 n"</span>  
    <span class="token builtin class-name">read</span> choice  
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$choice</span>"</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  
        <span class="token function">mv</span> <span class="token string">"<span class="token variable">$filename</span>"</span> <span class="token string">"<span class="token variable">$dir</span><span class="token variable">$i</span>.txt"</span>  <span class="token comment"># 确保重命名后的文件路径正确  </span>
        <span class="token assign-left variable">i</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>i<span class="token operator">+</span><span class="token number">1</span><span class="token variable">))</span></span>  
    <span class="token keyword">fi</span>  
<span class="token keyword">done</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h5 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h5><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token keyword">while</span> expression
<span class="token keyword">do</span>
   command-list
<span class="token keyword">done</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<ul>
<li>题目: 输入密码检验<pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment">#/bin/bash</span>
<span class="token assign-left variable">passwd</span><span class="token operator">=</span><span class="token string">"007"</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Please input your password"</span> password
<span class="token comment"># 变量要加双引号,防止用户输入出现空格导致异常</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$password</span>"</span> <span class="token operator">!=</span> <span class="token string">"<span class="token variable">$passwd</span>"</span> <span class="token punctuation">]</span>
<span class="token keyword">do</span>
        <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Please input your password"</span> password
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Congradulations!"</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
<li>while循环中的break和continue<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/break_continue.png" alt="alt text"></li>
</ul>
<h4 id="case分支语句"><a href="#case分支语句" class="headerlink" title="case分支语句"></a>case分支语句</h4><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token comment"># 格式</span>
<span class="token keyword">case</span> test-string <span class="token keyword">in</span>
pattern1<span class="token punctuation">)</span>   command-list1
            <span class="token punctuation">;</span><span class="token punctuation">;</span>

pattern2<span class="token punctuation">)</span>   command-list2
            <span class="token punctuation">;</span><span class="token punctuation">;</span>
patternN<span class="token punctuation">)</span>   command-listN
            <span class="token punctuation">;</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>


<h2 id="PTA习题"><a href="#PTA习题" class="headerlink" title="PTA习题"></a>PTA习题</h2><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9801.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> a b other  
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>a <span class="token operator">+</span> b<span class="token variable">))</span></span>  
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>

<span class="token comment"># 解法2</span>
<span class="token builtin class-name">read</span> a b other  
<span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $a + $b<span class="token variable">`</span></span>  
<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9802.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash  </span>
<span class="token comment"># 提示用户输入密码  </span>
<span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">"输入密码password: "</span>  
<span class="token builtin class-name">read</span> <span class="token parameter variable">-s</span> password  <span class="token comment"># -s 选项使输入不回显到屏幕上  </span>
<span class="token builtin class-name">echo</span>  <span class="token comment"># 打印一个空行以分隔密码输入和后续输出  </span>
  
<span class="token comment"># 检查密码是否正确  </span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$password</span>"</span> <span class="token operator">=</span> <span class="token string">"pta12345"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>  
    <span class="token builtin class-name">echo</span> <span class="token string">"密码正确"</span>  
<span class="token keyword">else</span>  
    <span class="token builtin class-name">echo</span> <span class="token string">"密码错误"</span>  
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9803.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> n
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token parameter variable">-o</span> <span class="token variable">$n</span> <span class="token parameter variable">-eq</span> <span class="token number">1</span> <span class="token punctuation">]</span>
<span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$n</span> indian boy."</span>
<span class="token keyword">elif</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span> 
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$n</span> indian boys."</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9804.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> n
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$n</span> <span class="token parameter variable">-lt</span> <span class="token number">0</span> <span class="token parameter variable">-o</span> <span class="token variable">$n</span> <span class="token parameter variable">-gt</span> <span class="token number">100</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"输入整数小于0或大于100"</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"输入整数在0到100之间（含）"</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9805.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token builtin class-name">read</span> a
<span class="token comment"># 算数拓展</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable"><span class="token variable">$((</span>$a <span class="token operator">%</span> <span class="token number">2</span><span class="token variable">))</span></span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$a</span>是偶数"</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"<span class="token variable">$a</span>是奇数"</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9806.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token comment"># 读取用户输入的文件名</span>
<span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"请输入文件名："</span> filename

<span class="token comment"># 判断文件是否为目录</span>
<span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> <span class="token string">"<span class="token variable">$filename</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"Yes"</span>
<span class="token keyword">else</span>
    <span class="token builtin class-name">echo</span> <span class="token string">"No"</span>
<span class="token keyword">fi</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9807.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token number">0</span>

<span class="token keyword">while</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> num    <span class="token comment"># 读取用户输入的数字</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$num</span> <span class="token parameter variable">-eq</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">break</span>   <span class="token comment"># 如果输入为0，跳出循环</span>
    <span class="token keyword">fi</span>
    <span class="token assign-left variable">sum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>sum <span class="token operator">+</span> num<span class="token variable">))</span></span>  <span class="token comment"># 求和</span>
<span class="token keyword">done</span>

<span class="token builtin class-name">echo</span> <span class="token variable">$sum</span>   <span class="token comment"># 输出求和结果</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/06/21/linux-zhi-ling/%E4%B9%A0%E9%A2%9808.png" alt="alt text"></p>
<ul>
<li><code>解答</code><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token assign-left variable">chance</span><span class="token operator">=</span><span class="token number">3</span>
<span class="token keyword">while</span> <span class="token punctuation">[</span> <span class="token variable">$chance</span> <span class="token parameter variable">-gt</span> <span class="token number">0</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">do</span>
    <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"Enter password: "</span> <span class="token function">passwd</span>
    <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$passwd</span>"</span> <span class="token operator">=</span> <span class="token string">"zust"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Success"</span>
        <span class="token builtin class-name">exit</span>
    <span class="token keyword">else</span>
        <span class="token builtin class-name">echo</span> <span class="token string">"Password error"</span>
        <span class="token assign-left variable">chance</span><span class="token operator">=</span><span class="token variable"><span class="token variable">$((</span>chance <span class="token operator">-</span> <span class="token number">1</span><span class="token variable">))</span></span>
        <span class="token builtin class-name">continue</span>
    <span class="token keyword">fi</span>
<span class="token keyword">done</span>
<span class="token builtin class-name">echo</span> <span class="token string">"Login failed"</span>
<span class="token builtin class-name">exit</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre></li>
</ul>
<h1 id="期末考试exam程序源代码"><a href="#期末考试exam程序源代码" class="headerlink" title="期末考试exam程序源代码"></a>期末考试exam程序源代码</h1><pre class="line-numbers language-bash" data-language="bash"><code class="language-bash"><span class="token shebang important">#!/bin/bash</span>

<span class="token assign-left variable">paperdir</span><span class="token operator">=</span><span class="token string">"/tmp"</span>
<span class="token assign-left variable">select_first</span><span class="token operator">=</span>True
<span class="token assign-left variable">command_first</span><span class="token operator">=</span>True

<span class="token function-name function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token function">clear</span>

        <span class="token keyword">while</span> <span class="token boolean">true</span>
        <span class="token keyword">do</span>
                <span class="token function">cat</span> <span class="token operator">&lt;&lt;-</span> <span class="token string">MENU
                        1) select
                        2) command
                        3) script
                        0) quit
MENU</span>
                <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"please input your selection:"</span> section
                <span class="token builtin class-name">echo</span>
                <span class="token keyword">case</span> <span class="token string">"<span class="token variable">$section</span>"</span> <span class="token keyword">in</span>
                        <span class="token number">1</span><span class="token punctuation">)</span> selection<span class="token punctuation">;</span><span class="token punctuation">;</span>
                        <span class="token number">2</span><span class="token punctuation">)</span> <span class="token builtin class-name">command</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
                        <span class="token number">3</span><span class="token punctuation">)</span> script <span class="token punctuation">;</span><span class="token punctuation">;</span>
                        <span class="token number">0</span><span class="token punctuation">)</span> <span class="token builtin class-name">exit</span> <span class="token number">0</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
                        *<span class="token punctuation">)</span> <span class="token builtin class-name">echo</span> <span class="token string">"input error!"</span> <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token keyword">esac</span>
        <span class="token keyword">done</span>
<span class="token punctuation">&#125;</span>



<span class="token function-name function">selection</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token assign-left variable">paper</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$paperdir</span>/p1"</span>
        <span class="token function">grep</span> <span class="token string">"^#"</span> <span class="token variable">$paper</span>
        <span class="token assign-left variable">select_ans</span><span class="token operator">=~</span>/1.ans
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$select_first</span>"</span> <span class="token operator">=</span> <span class="token string">"True"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token assign-left variable">snum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token string">'^[0-9]\&#123;1,2\&#125;\.'</span> $paperdir/p1<span class="token variable">`</span></span>
                gen_ans <span class="token number">1</span> <span class="token variable">$snum</span>
        <span class="token keyword">fi</span>
        <span class="token assign-left variable">select_first</span><span class="token operator">=</span>False
        <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token boolean">true</span>
        <span class="token keyword">do</span>
                <span class="token builtin class-name">echo</span>
                <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;curr&#125;</span>p"</span> $select_ans <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'.'</span> <span class="token parameter variable">-f1</span><span class="token variable">`</span></span>
                <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">"/^<span class="token variable">$pid</span>\./,/^$/p"</span> <span class="token variable">$paper</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">"s/^[0-9]\&#123;1,2\&#125;./<span class="token variable">$curr</span>./"</span>
                <span class="token assign-left variable">youranswer</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token string">"^"</span>$pid<span class="token string">"\."</span> $select_ans <span class="token operator">|</span> <span class="token function">cut</span> <span class="token parameter variable">-f2</span> -d<span class="token string">" "</span><span class="token variable">`</span></span>
                <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"input your answer(<span class="token variable">$youranswer</span>): "</span> answer
                <span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
                <span class="token number">0</span><span class="token punctuation">)</span>
                        main
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span><span class="token number">1</span>-2<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-ge</span> <span class="token number">1</span> <span class="token parameter variable">-a</span> <span class="token variable">$curr</span> <span class="token parameter variable">-le</span> <span class="token variable">$snum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$answer</span>"</span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span>a-d<span class="token punctuation">]</span><span class="token operator">|</span><span class="token punctuation">[</span>A-D<span class="token punctuation">]</span><span class="token punctuation">)</span>
                        <span class="token assign-left variable">answer</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">echo</span> $answer <span class="token operator">|</span> <span class="token function">tr</span> <span class="token string">"[a-z]"</span> <span class="token string">"[A-Z]"</span><span class="token variable">`</span></span>
                        <span class="token function">sed</span>  <span class="token parameter variable">-i</span> <span class="token string">"s/^<span class="token variable">$pid</span>\. .*/<span class="token variable">$pid</span>\. <span class="token variable">$answer</span>/"</span> <span class="token variable">$select_ans</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-lt</span> <span class="token variable">$snum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr + <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                -<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr - <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-lt</span> <span class="token variable">$snum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr + <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                *<span class="token punctuation">)</span>
                        <span class="token builtin class-name">echo</span> <span class="token string">"input the correct problem number or answer!"</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token keyword">esac</span>
        <span class="token keyword">done</span>
<span class="token punctuation">&#125;</span>

<span class="token function-name function">command</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token assign-left variable">paper</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$paperdir</span>/p2"</span>
        <span class="token assign-left variable">cmd_ans</span><span class="token operator">=~</span>/2.ans
        <span class="token function">grep</span> <span class="token string">"^#"</span> <span class="token variable">$paper</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$command_first</span>"</span> <span class="token operator">=</span> <span class="token string">"True"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token assign-left variable">cnum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token string">'^[0-9]\&#123;1,2\&#125;\.'</span> $paperdir/p2<span class="token variable">`</span></span>
                <span class="token comment">#gen_ans 2 8 $cnum</span>
                gen_ans <span class="token number">2</span> <span class="token variable">$cnum</span>
        <span class="token keyword">fi</span>
        <span class="token assign-left variable">command_first</span><span class="token operator">=</span>False
        <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token boolean">true</span>
        <span class="token keyword">do</span>
                <span class="token builtin class-name">echo</span>
                <span class="token assign-left variable">pid</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">"<span class="token variable">$&#123;curr&#125;</span>p"</span> $cmd_ans <span class="token operator">|</span> <span class="token function">cut</span> -d<span class="token string">'.'</span> <span class="token parameter variable">-f1</span><span class="token variable">`</span></span>
                <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">"/^<span class="token variable">$pid</span>\./,/^$/p"</span> <span class="token variable">$paper</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">"s/^<span class="token variable">$pid</span>\./<span class="token variable">$curr</span>./"</span>
                <span class="token builtin class-name">echo</span> <span class="token parameter variable">-n</span> <span class="token string">"ANS: "</span>
                <span class="token function">grep</span> <span class="token string">"^<span class="token variable">$pid</span>\."</span> <span class="token variable">$cmd_ans</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">"s/^<span class="token variable">$pid</span>\.//"</span>
                <span class="token builtin class-name">echo</span>
                <span class="token builtin class-name">read</span> <span class="token parameter variable">-rep</span> <span class="token string">"input your answer: "</span> answer
                <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-eq</span> <span class="token variable">$cnum</span> <span class="token punctuation">]</span>
                <span class="token keyword">then</span>
                   <span class="token builtin class-name">echo</span> <span class="token string">'============  Last problem. This is my bottom line. ================'</span>
                <span class="token keyword">fi</span>
                <span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
                <span class="token number">0</span><span class="token punctuation">)</span>
                        main
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token number">1</span>-9<span class="token punctuation">]</span><span class="token operator">|</span><span class="token number">1</span><span class="token punctuation">[</span><span class="token number">0</span>-9<span class="token punctuation">]</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$answer</span> <span class="token parameter variable">-le</span> <span class="token variable">$cnum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$answer</span>"</span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                -<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr - <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-lt</span> <span class="token variable">$cnum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr + <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                *<span class="token punctuation">)</span>

                        <span class="token comment">#answer=$&#123;answer//\\/\\\\&#125;</span>
                        <span class="token assign-left variable">answer</span><span class="token operator">=</span><span class="token variable">$&#123;answer<span class="token operator">/</span><span class="token operator">/</span><span class="token operator">#</span><span class="token operator">/</span>\\<span class="token operator">#</span>&#125;</span>
                        <span class="token assign-left variable">answer</span><span class="token operator">=</span><span class="token variable">$&#123;answer<span class="token operator">/</span><span class="token operator">/</span>&amp;<span class="token operator">/</span>\\&amp;&#125;</span>
                        <span class="token builtin class-name">echo</span> <span class="token variable">$answer</span>
                        <span class="token function">sed</span>  <span class="token parameter variable">-i</span> <span class="token string">"s#^<span class="token variable">$pid</span>\. .*#<span class="token variable">$pid</span>\. <span class="token variable">$answer</span>#"</span> <span class="token variable">$cmd_ans</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-lt</span> <span class="token variable">$cnum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr + <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token keyword">esac</span>
        <span class="token keyword">done</span>
<span class="token punctuation">&#125;</span>

<span class="token function-name function">script</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token assign-left variable">paper</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$paperdir</span>/p3"</span>
        <span class="token function">grep</span> <span class="token string">"^#"</span> <span class="token variable">$paper</span>
        <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token assign-left variable">scnum</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token string">'^[0-9]\&#123;1,2\&#125;\.'</span> $paperdir/p3<span class="token variable">`</span></span>
        <span class="token keyword">while</span> <span class="token boolean">true</span>
        <span class="token keyword">do</span>
                <span class="token builtin class-name">echo</span>
                <span class="token function">sed</span> <span class="token parameter variable">-n</span> <span class="token string">"/^<span class="token variable">$curr</span>\./,/^$/p"</span> <span class="token variable">$paper</span>
                <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"input your selection( n(nano)/v(vim) to edit the file ): "</span> answer
                <span class="token keyword">case</span> <span class="token variable">$answer</span> <span class="token keyword">in</span>
                <span class="token number">0</span><span class="token punctuation">)</span>
                        main
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token punctuation">[</span><span class="token number">1</span>-<span class="token variable">$scnum</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
                        <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$answer</span>"</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                -<span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-gt</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr - <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                n<span class="token punctuation">)</span>
                        <span class="token function">nano</span> ~/<span class="token variable">$curr</span>.sh
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token function">v</span><span class="token punctuation">)</span>
                        <span class="token function">vim</span> ~/<span class="token variable">$curr</span>.sh
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token string">""</span><span class="token punctuation">)</span>
                        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$curr</span> <span class="token parameter variable">-lt</span> <span class="token variable">$scnum</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                                <span class="token assign-left variable">curr</span><span class="token operator">=</span><span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $curr + <span class="token number">1</span><span class="token variable">`</span></span>
                        <span class="token keyword">fi</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                *<span class="token punctuation">)</span>
                        <span class="token builtin class-name">echo</span> <span class="token string">"input the correct number"</span>
                        <span class="token punctuation">;</span><span class="token punctuation">;</span>
                <span class="token keyword">esac</span>
        <span class="token keyword">done</span>
<span class="token punctuation">&#125;</span>

<span class="token function-name function">makefile</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token assign-left variable">paper</span><span class="token operator">=</span><span class="token string">"<span class="token variable">$paperdir</span>/p4"</span>
        <span class="token function">cat</span> <span class="token variable">$paper</span>
        <span class="token builtin class-name">read</span> <span class="token parameter variable">-p</span> <span class="token string">"press 0 to quit or any other key to start edit the makefile...: "</span> choice
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$choice</span> <span class="token operator">=</span> <span class="token string">"0"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                main
        <span class="token keyword">else</span>
                <span class="token function">vi</span> makefile
                main
        <span class="token keyword">fi</span>
<span class="token punctuation">&#125;</span>

<span class="token function-name function">gen_ans</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">&#123;</span>
        <span class="token assign-left variable">ans_file</span><span class="token operator">=~</span>/<span class="token variable">$1</span>.ans
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token parameter variable">-f</span> <span class="token string">"<span class="token variable">$ans_file</span>"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token builtin class-name">return</span>
                <span class="token builtin class-name">echo</span> <span class="token parameter variable">-ne</span>  <span class="token string">"There is a answer sheet in your home directory.<span class="token entity" title="\n">\n</span>Do you want to recreate it? (y/n): "</span>
                <span class="token builtin class-name">read</span> ans
                <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$ans</span>"</span> <span class="token operator">=</span> <span class="token string">"Y"</span> <span class="token parameter variable">-o</span> <span class="token string">"<span class="token variable">$ans</span>"</span> <span class="token operator">=</span> <span class="token string">"y"</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                        <span class="token function">shuf</span> <span class="token parameter variable">-i</span> <span class="token number">1</span>-<span class="token variable">$2</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/$/. /'</span>  <span class="token operator">></span> <span class="token variable">$ans_file</span>
                <span class="token keyword">fi</span>
        <span class="token keyword">else</span>
                <span class="token function">shuf</span> <span class="token parameter variable">-i</span> <span class="token number">1</span>-<span class="token variable">$2</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/$/. /'</span>  <span class="token operator">>></span> <span class="token variable">$ans_file</span>
        <span class="token keyword">fi</span>
        <span class="token keyword">if</span> <span class="token punctuation">[</span> <span class="token variable">$#</span> <span class="token parameter variable">-gt</span> <span class="token number">2</span> <span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token keyword">then</span>
                <span class="token function">seq</span> <span class="token variable"><span class="token variable">`</span><span class="token function">expr</span> $2 + <span class="token number">1</span><span class="token variable">`</span></span> <span class="token variable">$3</span> <span class="token operator">|</span> <span class="token function">sed</span> <span class="token string">'s/$/. /'</span>  <span class="token operator">>></span> <span class="token variable">$ans_file</span>
        <span class="token keyword">fi</span>

        <span class="token comment">#seq -f '%g. ' 1 $2  >> $select_ans</span>
<span class="token punctuation">&#125;</span>

main<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="https://0zxm.github.io">0zxm</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="https://0zxm.github.io/2024/06/21/linux-zhi-ling/">https://0zxm.github.io/2024/06/21/linux-zhi-ling/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="https://0zxm.github.io" target="_blank">0zxm</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post-share"><div class="social-share" data-image="/img/cover1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i>赞助</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/wechat.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2024/07/02/cao-zuo-xi-tong-she-ji-yu-shi-xian/" title="操作系统设计与实现"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">操作系统设计与实现</div></div><div class="info-2"><div class="info-item-1">操作系统设计与实现学期综合</div></div></div></a><a class="pagination-related" href="/2024/06/21/shu-ju-ku/" title="数据库"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">数据库</div></div><div class="info-2"><div class="info-item-1">数据库编程期末复习(突击)</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2024/08/28/linux-ji-chu/" title="Linux基础"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-28</div><div class="info-item-2">Linux基础</div></div><div class="info-2"><div class="info-item-1">黑马Linux系统笔记</div></div></div></a><a class="pagination-related" href="/2024/08/28/linux-xi-tong-ruan-jian-an-zhuang/" title="Linux系统软件安装"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-28</div><div class="info-item-2">Linux系统软件安装</div></div><div class="info-2"><div class="info-item-1">黑马Linux系统安装常用软件笔记</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/favicon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">0zxm</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">57</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">65</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">18</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/0zxm"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/0zxm" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="mailto:m15813109801@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="http://0zxm.github.io" target="_blank" title="博客"><i class="fab fa-algolia" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">欢迎来到我的博客</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E5%AD%A6%E4%B9%A0"><span class="toc-text">Linux学习</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E7%AB%A0-Linux%E7%9A%84%E7%94%B1%E6%9D%A5"><span class="toc-text">第一章 Linux的由来</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E7%AB%A0-linux%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">第二章 linux基本命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95%E6%96%B9%E5%BC%8F"><span class="toc-text">期末考试方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%BF%9E%E6%8E%A5%E5%88%B0%E5%AD%A6%E6%A0%A1%E4%B8%BB%E6%9C%BA10-188-2-251%E7%9A%84%E5%B8%90%E5%8F%B7%E5%AF%86%E7%A0%81"><span class="toc-text">1.连接到学校主机10.188.2.251的帐号密码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-nano%E6%8C%87%E4%BB%A4%E6%93%8D%E4%BD%9C%E6%96%87%E4%BB%B6"><span class="toc-text">2.nano指令操作文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">3.环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-echo%E5%91%BD%E4%BB%A4"><span class="toc-text">4.echo命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-alias%E5%91%BD%E4%BB%A4"><span class="toc-text">5.alias命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Linux%E4%B8%AD%E7%9A%84%E6%BA%90%E5%AD%97%E7%AC%A6"><span class="toc-text">6.Linux中的源字符</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-%E5%9F%BA%E6%9C%AC%E5%91%BD%E4%BB%A4"><span class="toc-text">7.基本命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-shell%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E7%9A%84%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">8.shell命令执行的优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9-%E6%BA%90%E5%AD%97%E7%AC%A6%E4%BD%BF%E7%94%A8%E5%AE%9E%E4%BE%8B-%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%B0%8F%E6%B5%8B"><span class="toc-text">9.源字符使用实例(第一次小测)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10-%E9%93%BE%E6%8E%A5%E5%91%BD%E4%BB%A4"><span class="toc-text">10.链接命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11-%E8%A7%A3%E5%8E%8B%E7%BC%A9%E5%91%BD%E4%BB%A4"><span class="toc-text">11.解压缩命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12-%E5%85%B3%E6%9C%BA%E5%92%8C%E9%87%8D%E5%90%AF%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">12.关机和重启命令的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13-%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%EF%BC%8C%E8%BF%9C%E7%A8%8B%E6%8B%B7%E8%B4%9D%E5%91%BD%E4%BB%A4"><span class="toc-text">13.远程登陆，远程拷贝命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#13-1-ssh%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">13.1 ssh命令的使用</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#13-2-scp%E5%91%BD%E4%BB%A4%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">13.2 scp命令的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E5%AE%89%E8%A3%85%E5%92%8C%E5%8D%B8%E8%BD%BD"><span class="toc-text">软件安装和卸载</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E7%AB%A0-%E6%96%87%E4%BB%B6%E5%92%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-text">第四章 文件和文件系统</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E7%B3%BB%E7%BB%9F%E4%B8%8B%E7%9A%84%E9%87%8D%E8%A6%81%E6%96%87%E4%BB%B6"><span class="toc-text">Linux系统下的重要文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mount%E6%8C%82%E8%BD%BD%E5%91%BD%E4%BB%A4"><span class="toc-text">mount挂载命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Types-of-Files%E6%96%87%E4%BB%B6%E7%A7%8D%E7%B1%BB"><span class="toc-text">Types of Files文件种类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8A%A8%E6%80%81%E5%BA%93%E5%92%8C%E9%9D%99%E6%80%81%E5%BA%93%E6%96%87%E4%BB%B6"><span class="toc-text">动态库和静态库文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E4%B8%8B%E7%9A%84%E7%9B%AE%E5%BD%95%E7%BB%93%E6%9E%84"><span class="toc-text">Linux下的目录结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%92%8C%E6%96%87%E4%BB%B6%E6%93%8D%E4%BD%9C%E7%9B%B8%E5%85%B3%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-text">和文件操作相关的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%8D%B7%E7%AE%A1%E7%90%86-%E5%A5%BD%E5%A4%84-%E5%8F%AF%E4%BB%A5%E5%8A%A8%E6%80%81%E6%89%A9%E5%85%85"><span class="toc-text">逻辑卷管理(好处:可以动态扩充)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%94%E7%AB%A0-%E6%96%87%E4%BB%B6%E5%AE%89%E5%85%A8"><span class="toc-text">第五章 文件安全</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Protection-based-on-AccessPermission"><span class="toc-text">1.Protection based on AccessPermission</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E6%94%B9%E5%8F%98%E6%9D%83%E9%99%90%E6%88%96%E8%80%85%E6%89%80%E5%B1%9E%E7%BB%84%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="toc-text">2. 改变权限或者所属组的命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Changing-File-Access-Privileges"><span class="toc-text">3.Changing File Access Privileges</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Default-file-access-privileges-%E9%BB%98%E8%AE%A4%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="toc-text">Default file access privileges 默认文件权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%89%E4%B8%AA%E7%89%B9%E6%AE%8A%E6%9D%83%E9%99%90%E4%BD%8D"><span class="toc-text">三个特殊权限位</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AD%E7%AB%A0-File-Processing"><span class="toc-text">第六章 File Processing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#view-complete-file"><span class="toc-text">view complete file</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E6%96%87%E4%BB%B6%E5%85%A8%E9%83%A8%E5%86%85%E5%AE%B9"><span class="toc-text">显示文件全部内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E7%9C%8B%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">分页查看文本文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Viewing-the-head-or-tail-of-a-file"><span class="toc-text">Viewing the head or tail of a file</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AF%94%E8%BE%83%E4%B8%A4%E4%B8%AA%E6%96%87%E6%9C%AC%E6%96%87%E4%BB%B6"><span class="toc-text">比较两个文本文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E5%91%BD%E4%BB%A4"><span class="toc-text">查找文件命令</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%99%AE%E9%80%9A%E6%96%87%E4%BB%B6"><span class="toc-text">普通文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%96%87%E4%BB%B6"><span class="toc-text">命令文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%93%8D%E4%BD%9C"><span class="toc-text">对文件内容操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%BB%E6%8E%89%E9%87%8D%E5%A4%8D%E5%86%85%E5%AE%B9"><span class="toc-text">去掉重复内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sort%E5%AF%B9%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E8%BF%9B%E8%A1%8C%E6%8E%92%E5%BA%8F"><span class="toc-text">sort对文件内容进行排序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cut%E5%91%BD%E4%BB%A4%E5%89%AA%E5%88%87%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-text">cut命令剪切文件内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8B%BC%E6%8E%A5%E5%91%BD%E4%BB%A4"><span class="toc-text">拼接命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E6%89%BE%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9"><span class="toc-text">查找文件内容</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AF%B9%E6%96%87%E6%9C%AC%E6%89%B9%E9%87%8F%E4%BF%AE%E6%94%B9"><span class="toc-text">对文本批量修改</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E8%A7%A3%E5%8E%8B%E7%BC%A9"><span class="toc-text">文件解压缩</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%83%E7%AB%A0-vim%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">第七章 vim的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#7-1-vim%E7%9A%84%E4%B8%89%E7%A7%8D%E6%A8%A1%E5%BC%8F"><span class="toc-text">7.1 vim的三种模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-2-vim%E7%9A%84%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4"><span class="toc-text">7.2 vim的常用命令</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%85%AB%E7%AB%A0-File-Share"><span class="toc-text">第八章 File Share</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="toc-text">硬链接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BD%AF%E9%93%BE%E6%8E%A5"><span class="toc-text">软链接</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B9%9D%E7%AB%A0-%E9%87%8D%E5%AE%9A%E5%90%91%E5%92%8C%E7%AE%A1%E9%81%93"><span class="toc-text">第九章 重定向和管道</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%96%87%E4%BB%B6%E6%8F%8F%E8%BF%B0%E7%AC%A6%E8%A1%A8"><span class="toc-text">1.文件描述符表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">2.重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">2.1标准输出重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E6%A0%87%E5%87%86%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">2.2标准输出重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2%E6%A0%87%E5%87%86%E9%94%99%E8%AF%AF%E8%BE%93%E5%87%BA%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-text">2.2标准错误输出重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E7%A7%8D%E9%87%8D%E5%AE%9A%E5%90%91%E7%BB%93%E5%90%88"><span class="toc-text">多种重定向结合</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%97%B4%E9%80%9A%E4%BF%A1%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="toc-text">进程间通信的方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#KISS%E5%8E%9F%E5%88%99"><span class="toc-text">KISS原则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8C%BF%E5%90%8D-%E7%AE%A1%E9%81%93%E5%91%BD%E4%BB%A4"><span class="toc-text">(匿名)管道命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E5%90%8D%E7%AE%A1%E9%81%93FIFOs"><span class="toc-text">命名管道FIFOs</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#FIFOs%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">FIFOs的使用</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E7%AB%A0-%E8%BF%9B%E7%A8%8BProcessing"><span class="toc-text">第十章 进程Processing</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E8%B0%83%E5%BA%A6%E6%96%B9%E5%BC%8F"><span class="toc-text">进程调度方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Linux%E4%B8%8B%E7%9A%84%E8%BF%9B%E7%A8%8B"><span class="toc-text">Linux下的进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9B%B8%E5%85%B3%E5%91%BD%E4%BB%A4"><span class="toc-text">进程相关命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E7%8E%AF%E5%A2%83%E4%B8%8B%E6%89%A7%E8%A1%8C%E5%91%BD%E4%BB%A4"><span class="toc-text">shell环境下执行命令</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E8%BF%9B%E7%A8%8B%E8%BF%9B%E8%A1%8C%E6%8E%A7%E5%88%B6"><span class="toc-text">对进程进行控制</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%9A%84%E9%A1%BA%E5%BA%8F%E5%92%8C%E5%B9%B6%E8%A1%8C%E6%89%A7%E8%A1%8C%EF%BC%88Sequential-and-Parallel-Execution-of-Commands%EF%BC%89"><span class="toc-text">命令的顺序和并行执行（Sequential and Parallel Execution of Commands）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E7%BB%88%E6%AD%A2%E8%BF%9B%E7%A8%8B"><span class="toc-text">如何终止进程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#kill%E5%91%BD%E4%BB%A4"><span class="toc-text">kill命令</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%A1%E5%8F%B7%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">信号的处理</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A8%8B%E5%BA%8F%E6%80%8E%E4%B9%88%E9%80%9A%E8%BF%87%E4%BB%A3%E7%A0%81%E5%A4%84%E7%90%86%E4%BF%A1%E5%8F%B7"><span class="toc-text">程序怎么通过代码处理信号</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E4%BD%BF%E7%94%A8-sigaction-%E8%AE%BE%E7%BD%AE%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%E7%A8%8B%E5%BA%8F"><span class="toc-text">1. 使用 sigaction 设置信号处理程序</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E4%BD%BF%E7%94%A8%E4%BF%A1%E5%8F%B7%E6%8E%A9%E7%A0%81"><span class="toc-text">2. 使用信号掩码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E4%BD%BF%E7%94%A8%E5%AE%88%E6%8A%A4%E8%BF%9B%E7%A8%8B"><span class="toc-text">3. 使用守护进程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0-Shell%E8%84%9A%E6%9C%AC%E7%BC%96%E7%A8%8B"><span class="toc-text">第十一章 Shell脚本编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99shell%E8%84%9A%E6%9C%AC"><span class="toc-text">编写shell脚本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E5%8F%98%E9%87%8F%E5%88%86%E7%B1%BB%E5%8F%8A%E6%93%8D%E4%BD%9C"><span class="toc-text">shell变量分类及操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E7%BD%AE%E7%9A%84%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="toc-text">内置的环境变量</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E5%8F%98%E9%87%8F%E7%9A%84%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-text">shell变量的数据类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%95%B0%E6%8B%93%E5%B1%95"><span class="toc-text">算数拓展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2-%E6%8A%8A%E5%91%BD%E4%BB%A4%E7%BB%93%E6%9E%9C%E5%AD%98%E5%82%A8%E6%88%90%E5%8F%98%E9%87%8F"><span class="toc-text">命令替换(把命令结果存储成变量)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA"><span class="toc-text">变量的输入输出</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E8%BE%93%E5%85%A5"><span class="toc-text">变量的输入</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E8%BE%93%E5%87%BA-echo"><span class="toc-text">变量的输出-&gt;echo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AF%B9%E6%95%B0%E5%80%BC%E8%BF%9B%E8%A1%8C%E5%A4%84%E7%90%86"><span class="toc-text">对数值进行处理</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B4%E6%95%B0"><span class="toc-text">整数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%95%B0"><span class="toc-text">小数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Homework"><span class="toc-text">Homework</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E8%84%9A%E6%9C%AC%E7%9A%84%E6%B3%A8%E9%87%8A"><span class="toc-text">shell脚本的注释</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BC%96%E5%86%99shell%E8%84%9A%E6%9C%AC-1"><span class="toc-text">编写shell脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#shell%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">shell表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#if%E7%BB%93%E6%9E%84"><span class="toc-text">if结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BE%AA%E7%8E%AF%E7%BB%93%E6%9E%84"><span class="toc-text">循环结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="toc-text">for循环</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#while%E5%BE%AA%E7%8E%AF"><span class="toc-text">while循环</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#case%E5%88%86%E6%94%AF%E8%AF%AD%E5%8F%A5"><span class="toc-text">case分支语句</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PTA%E4%B9%A0%E9%A2%98"><span class="toc-text">PTA习题</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%9F%E6%9C%AB%E8%80%83%E8%AF%95exam%E7%A8%8B%E5%BA%8F%E6%BA%90%E4%BB%A3%E7%A0%81"><span class="toc-text">期末考试exam程序源代码</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/03/08/java-ji-chu-xia/" title="Java基础下"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Java基础下"/></a><div class="content"><a class="title" href="/2025/03/08/java-ji-chu-xia/" title="Java基础下">Java基础下</a><time datetime="2025-03-08T03:43:21.000Z" title="发表于 2025-03-08 11:43:21">2025-03-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/07/qian-ru-shi-xi-tong-gai-shu/" title="嵌入式系统概述"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="嵌入式系统概述"/></a><div class="content"><a class="title" href="/2025/03/07/qian-ru-shi-xi-tong-gai-shu/" title="嵌入式系统概述">嵌入式系统概述</a><time datetime="2025-03-07T06:08:48.000Z" title="发表于 2025-03-07 14:08:48">2025-03-07</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/05/da-shu-ju-ke-shi-hua/" title="大数据可视化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="大数据可视化"/></a><div class="content"><a class="title" href="/2025/03/05/da-shu-ju-ke-shi-hua/" title="大数据可视化">大数据可视化</a><time datetime="2025-03-05T04:51:12.000Z" title="发表于 2025-03-05 12:51:12">2025-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/05/shou-ji-ruan-jian-kai-fa/" title="手机软件开发"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/default_cover.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="手机软件开发"/></a><div class="content"><a class="title" href="/2025/03/05/shou-ji-ruan-jian-kai-fa/" title="手机软件开发">手机软件开发</a><time datetime="2025-03-05T04:50:56.000Z" title="发表于 2025-03-05 12:50:56">2025-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/03/04/ji-suan-ji-tu-xing-xue-he-xu-ni-xian-shi/" title="计算机图形学和虚拟现实"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/cover2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="计算机图形学和虚拟现实"/></a><div class="content"><a class="title" href="/2025/03/04/ji-suan-ji-tu-xing-xue-he-xu-ni-xian-shi/" title="计算机图形学和虚拟现实">计算机图形学和虚拟现实</a><time datetime="2025-03-04T15:30:27.000Z" title="发表于 2025-03-04 23:30:27">2025-03-04</time></div></div></div></div></div></div><!-- 登录验证模态框--><div id="login-modal"><div class="modal-overlay"></div><div class="modal-content"><h2>Welcome</h2><p>Please enter the password to access this page.</p><input id="password-input" type="password" placeholder="Enter Password"><button id="submit-btn">Submit</button><p id="error-msg" style="color: red; display: none;">Invalid Password. Please try again.</p></div></div></main><footer id="footer" style="background-image: url(/img/footer.jpg);"><div id="footer-wrap"><div class="copyright">&copy;2024 - 2025 By 0zxm</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>(() => {
  const loadMathjax = () => {
    if (!window.MathJax) {
      window.MathJax = {
        tex: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          tags: 'none',
        },
        chtml: {
          scale: 1.1
        },
        options: {
          enableMenu: true,
          renderActions: {
            findScript: [10, doc => {
              for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
                const display = !!node.type.match(/; *mode=display/)
                const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
                const text = document.createTextNode('')
                node.parentNode.replaceChild(text, node)
                math.start = {node: text, delim: '', n: 0}
                math.end = {node: text, delim: '', n: 0}
                doc.math.push(math)
              }
            }, '']
          }
        }
      }
      
      const script = document.createElement('script')
      script.src = 'https://cdn.jsdelivr.net/npm/mathjax/es5/tex-mml-chtml.min.js'
      script.id = 'MathJax-script'
      script.async = true
      document.head.appendChild(script)
    } else {
      MathJax.startup.document.state(0)
      MathJax.texReset()
      MathJax.typesetPromise()
    }
  }

  btf.addGlobalFn('encrypt', loadMathjax, 'mathjax')
  window.pjax ? loadMathjax() : window.addEventListener('load', loadMathjax)
})()</script></div><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="text-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div><!-- CSS 样式--><style>#login-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.8);
  cursor: pointer;
}

.modal-content {
  background-color: white;
  padding: 20px;
  border-radius: 10px;
  text-align: center;
  width: 80%;
  max-width: 400px;
  box-shadow: 0 0 10px rgba(0,0,0,0.3);
  z-index:999;
}

input#password-input {
  width: 100%;
  padding: 10px;
  margin-top: 10px;
  margin-bottom: 20px;
  border: 1px solid #ccc;
  border-radius: 4px;
}

button#submit-btn {
  background-color: #4CAF50;
  color: white;
  padding: 10px 20px;
  border: none;
  border-radius: 4px;
  cursor: pointer;
}

button#submit-btn:hover {
  background-color: #45a049;
}
</style><!-- JavaScript 验证--><script>document.addEventListener('DOMContentLoaded', function() {

  (function() {
  // 禁用右键菜单
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
  });

  // 禁用快捷键 (F12/Ctrl+Shift+I/Ctrl+Shift+J/Ctrl+Shift+C)
  document.addEventListener('keydown', function(e) {
    if (e.key === 'F12' || 
        (e.ctrlKey && e.shiftKey && e.key === 'I') || 
        (e.ctrlKey && e.shiftKey && e.key === 'J') ||
        (e.ctrlKey && e.shiftKey && e.key === 'C')) {
      e.preventDefault();
      return false;
    }
  });
  })();
  

  const modal = document.getElementById('login-modal');
  const passwordInput = document.getElementById('password-input');
  const submitBtn = document.getElementById('submit-btn');
  const errorMsg = document.getElementById('error-msg');
  const bodyWrap = document.getElementById('body-wrap');


  // 默认显示模态框
  modal.style.display = 'flex';

  // 自动聚焦到密码输入框
  passwordInput.focus();

  submitBtn.addEventListener('click', function(e) {
    e.preventDefault();
    const password = passwordInput.value;
    const correctPassword = 'D&X'; // 替换为实际密码

    if (password === correctPassword) {
      modal.style.display = 'none';
      bodyWrap.style.opacity = 1; // 显示页面内容
    } else {
      passwordInput.classList.add('error');
      errorMsg.style.display = 'block';
      setTimeout(() => {
        passwordInput.classList.remove('error');
        errorMsg.style.display = 'none';
      }, 2000);
    }
  });
  // 按下 Enter 键提交
  passwordInput.addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
      submitBtn.click();
    }
  });
});</script></body></html>